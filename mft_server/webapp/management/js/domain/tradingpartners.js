/* Copyright Â© 2009-2024. Redwood Software Inc. All rights reserved. */
jscape.domain=jscape.domain||{};jscape.TradingPartner=Class.extend({initialize:function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar){this.name=a||"";this.protocol=b||null;this.company=c||null;this.email=d||"";this.url=e||"";this.host=f||"";this.port=parseInt(g)||0;this.timeout=parseInt(h)||0;this.proxyData=i||null;this.tcpNoDelayEnabled=!!j;this.connectionType=k||null;this.username=l!==undefined?l:"";this.password=m!==undefined&&!!m?m:null;this.creationDate=null;this.domain=n!==undefined?n:null;this.keyProvider=o||null;this.hostKeyProvider=p||null;this.encryptionRequired=!!q;this.aftpData=r||null;this.agentData=s||null;this.ftpData=t||null;this.sftpData=u||null;this.oftpData=v||null;this.as2Data=w||null;this.amazonS3Data=x||new jscape.AmazonS3Data();this.s3CompatibleData=y||new jscape.S3CompatibleData();this.amazonAwsData=z||new jscape.AmazonAwsData();this.googleStorageData=aa||null;this.googleCloudData=ab||null;this.googleDriveData=ac||null;this.microsoftAzureFileStorageData=ad||null;this.microsoftAzureBlobStorageData=ae||null;this.microsoftAzureDataLakeData=af||null;this.microsoftAzureDataLake2Data=ag||null;this.microsoftOneDriveData=ah||null;this.boxData=ai||null;this.dropboxData=aj||null;this.ibmCloudData=ak||null;this.imapData=al||null;this.pop3Data=am||null;this.smtpData=an||null;this.splunkHttpData=ao||null;this.activeBatchData=ap||null;this.cyberArkData=aq||new jscape.CyberArkData();this.tags=ar||[];}});jscape.TradingPartner.fromJSON=function(data){return $.extend(new jscape.TradingPartner(),data,{protocol:jscape.TradingPartner.Protocol.fromString(data.protocol),proxyData:jscape.ProxyData.fromJSON(data.proxyData),keyProvider:jscape.KeyProvider.fromJSON(data.keyProvider),hostKeyProvider:jscape.KeyProvider.fromJSON(data.hostKeyProvider),aftpData:jscape.AftpData.fromJSON(data.aftpData),agentData:jscape.AgentData.fromJSON(data.agentData),ftpData:jscape.FtpData.fromJSON(data.ftpData),sftpData:jscape.SftpData.fromJSON(data.sftpData),oftpData:jscape.OftpPartnerData.fromJSON(data.oftpData),as2Data:jscape.As2Data.fromJSON(data.as2Data),amazonS3Data:jscape.AmazonS3Data.fromJSON(data.amazonS3Data),s3CompatibleData:jscape.S3CompatibleData.fromJSON(data.s3CompatibleData),amazonAwsData:jscape.AmazonAwsData.fromJSON(data.amazonAwsData),googleCloudData:jscape.GoogleCloudData.fromJSON(data.googleCloudData),googleStorageData:jscape.GoogleStorageData.fromJSON(data.googleStorageData),googleDriveData:jscape.GoogleDriveData.fromJSON(data.googleDriveData),microsoftAzureFileStorageData:jscape.MicrosoftAzureFileStorageData.fromJSON(data.microsoftAzureFileStorageData),microsoftAzureBlobStorageData:jscape.MicrosoftAzureBlobStorageData.fromJSON(data.microsoftAzureBlobStorageData),microsoftAzureDataLakeData:jscape.MicrosoftAzureDataLakeData.fromJSON(data.microsoftAzureDataLakeData),microsoftAzureDataLake2Data:jscape.MicrosoftAzureDataLake2Data.fromJSON(data.microsoftAzureDataLake2Data),microsoftOneDriveData:jscape.MicrosoftOneDriveData.fromJSON(data.microsoftOneDriveData),boxData:jscape.BoxData.fromJSON(data.boxData),dropboxData:jscape.DropboxData.fromJSON(data.dropboxData),ibmCloudData:jscape.IbmCloudData.fromJSON(data.ibmCloudData),imapData:jscape.ImapData.fromJSON(data.imapData),pop3Data:jscape.Pop3Data.fromJSON(data.pop3Data),smtpData:jscape.SmtpData.fromJSON(data.smtpData),splunkHttpData:jscape.SplunkHttpData.fromJSON(data.splunkHttpData),activeBatchData:jscape.ActiveBatchData.fromJSON(data.activeBatchData),cyberArkData:jscape.CyberArkData.fromJSON(data.cyberArkData),password:null,creationDate:null});};jscape.TradingPartner.aftp=function(name,company,email,host,port,timeout,tcpNoDelay,username,password,keyProvider,hostKeyProvider,partnerData,tags){return $.extend(new jscape.TradingPartner(name,jscape.TradingPartner.Protocol.AFTP,company,email,undefined,host,port,timeout,undefined,tcpNoDelay,undefined,username,password),{keyProvider:keyProvider,hostKeyProvider:hostKeyProvider,aftpData:partnerData,tags:tags});};jscape.TradingPartner.agent=function(name,company,email,partnerData,tags){return $.extend(new jscape.TradingPartner(name,jscape.TradingPartner.Protocol.AGENT,company,email),{agentData:partnerData,tags:tags});};jscape.TradingPartner.amazonS3=function(name,company,email,timeout,proxyData,username,password,partnerData,tags){return $.extend(new jscape.TradingPartner(name,jscape.TradingPartner.Protocol.AMAZON_S3,company,email,undefined,undefined,undefined,timeout,proxyData,undefined,undefined,username||undefined,password),{amazonS3Data:partnerData,tags:tags});};jscape.TradingPartner.amazonS3Compatible=function(name,company,email,timeout,username,password,partnerData,tags){return $.extend(new jscape.TradingPartner(name,jscape.TradingPartner.Protocol.S3_COMPATIBLE,company,email,undefined,undefined,undefined,timeout,undefined,undefined,undefined,username,password),{s3CompatibleData:partnerData,tags:tags});};jscape.TradingPartner.amazonAws=function(name,company,email,timeout,username,password,partnerData,tags){return $.extend(new jscape.TradingPartner(name,jscape.TradingPartner.Protocol.AMAZON_AWS,company,email,undefined,undefined,undefined,timeout,undefined,undefined,undefined,username||undefined,password),{amazonAwsData:partnerData,tags:tags});};jscape.TradingPartner.as2=function(name,company,email,url,timeout,proxyData,username,password,keyProvider,hostKeyProvider,as2Data,tags){return $.extend(new jscape.TradingPartner(name,jscape.TradingPartner.Protocol.AS2,company,email,url,undefined,undefined,timeout,proxyData,undefined,undefined,username,password),{keyProvider:keyProvider,hostKeyProvider:hostKeyProvider,as2Data:as2Data,tags:tags});};jscape.TradingPartner.sftp=function(name,company,email,host,port,timeout,proxyData,tcpNoDelay,username,password,keyProvider,hostKeyProvider,sftpData,tags){return $.extend(new jscape.TradingPartner(name,jscape.TradingPartner.Protocol.SFTP,company,email,undefined,host,port,timeout,proxyData,tcpNoDelay,undefined,username,password),{keyProvider:keyProvider,hostKeyProvider:hostKeyProvider,sftpData:sftpData,tags:tags});};jscape.TradingPartner.ftp=function(name,company,email,host,port,timeout,proxyData,tcpNoDelay,username,password,ftpData,tags){return $.extend(new jscape.TradingPartner(name,jscape.TradingPartner.Protocol.FTP,company,email,undefined,host,port,timeout,proxyData,tcpNoDelay,undefined,username,password),{ftpData:ftpData,tags:tags});};jscape.TradingPartner.ftpsImplicit=function(name,company,email,host,port,timeout,proxyData,tcpNoDelay,username,password,keyProvider,hostKeyProvider,ftpData,tags){return $.extend(new jscape.TradingPartner(name,jscape.TradingPartner.Protocol.FTPS_IMPLICIT,company,email,undefined,host,port,timeout,proxyData,tcpNoDelay,undefined,username,password),{keyProvider:keyProvider,hostKeyProvider:hostKeyProvider,ftpData:ftpData,tags:tags});};jscape.TradingPartner.ftpsExplicit=function(name,company,email,host,port,timeout,proxyData,tcpNoDelay,username,password,keyProvider,hostKeyProvider,ftpData,tags){return $.extend(new jscape.TradingPartner(name,jscape.TradingPartner.Protocol.FTPS_EXPLICIT,company,email,undefined,host,port,timeout,proxyData,tcpNoDelay,undefined,username,password),{keyProvider:keyProvider,hostKeyProvider:hostKeyProvider,ftpData:ftpData,tags:tags});};jscape.TradingPartner.webdav=function(name,company,email,url,timeout,proxyData,username,password,domain,keyProvider,hostKeyProvider,tags){return $.extend(new jscape.TradingPartner(name,jscape.TradingPartner.Protocol.WEBDAV,company,email,url,undefined,undefined,timeout,proxyData,undefined,undefined,username,password,domain),{keyProvider:keyProvider,hostKeyProvider:hostKeyProvider,tags:tags});};jscape.TradingPartner.oftp=function(name,company,email,host,port,timeout,proxyData,username,password,oftpData,tags){return $.extend(new jscape.TradingPartner(name,jscape.TradingPartner.Protocol.OFTP,company,email,undefined,host,port,timeout,proxyData,undefined,undefined,username,password),{oftpData:oftpData,tags:tags});};jscape.TradingPartner.rest=function(name,company,email,host,port,timeout,proxyData,username,password,domain,keyProvider,hostKeyProvider,encryptionRequired,tags){return $.extend(new jscape.TradingPartner(name,jscape.TradingPartner.Protocol.REST,company,email,undefined,host,port,timeout,proxyData,undefined,undefined,username,password,domain),{keyProvider:keyProvider,hostKeyProvider:hostKeyProvider,encryptionRequired:!!encryptionRequired,tags:tags});};jscape.TradingPartner.tftp=function(name,company,email,host,port,timeout,tags){return $.extend(new jscape.TradingPartner(name,jscape.TradingPartner.Protocol.TFTP,company,email,undefined,host,port,timeout),{tags:tags});};jscape.TradingPartner.imap=function(name,company,email,host,port,timeout,proxyData,connectionType,username,password,imapData,keyProvider,hostKeyProvider,tags){return $.extend(new jscape.TradingPartner(name,jscape.TradingPartner.Protocol.IMAP,company,email,undefined,host,port,timeout,proxyData,undefined,connectionType,username,password),{keyProvider:keyProvider,hostKeyProvider:hostKeyProvider,imapData:imapData,tags:tags});};jscape.TradingPartner.pop3=function(name,company,email,host,port,timeout,proxyData,connectionType,username,password,pop3Data,keyProvider,hostKeyProvider,tags){return $.extend(new jscape.TradingPartner(name,jscape.TradingPartner.Protocol.POP3,company,email,undefined,host,port,timeout,proxyData,undefined,connectionType,username,password),{keyProvider:keyProvider,hostKeyProvider:hostKeyProvider,pop3Data:pop3Data,tags:tags});};jscape.TradingPartner.smtp=function(name,company,email,host,port,timeout,proxyData,connectionType,username,password,smtpData,keyProvider,hostKeyProvider,tags){return $.extend(new jscape.TradingPartner(name,jscape.TradingPartner.Protocol.SMTP,company,email,undefined,host,port,timeout,proxyData,undefined,connectionType,username,password),{keyProvider:keyProvider,hostKeyProvider:hostKeyProvider,smtpData:smtpData,tags:tags});};jscape.TradingPartner.smb=function(name,company,email,host,port,timeout,username,password,domain,tags){return $.extend(new jscape.TradingPartner(name,jscape.TradingPartner.Protocol.SMB,company,email,undefined,host,port,timeout,undefined,undefined,undefined,username,password,domain),{tags:tags});};jscape.TradingPartner.googleCloud=function(name,company,email,timeout,authenticationType,keyFile,credentials,tags){return $.extend(new jscape.TradingPartner(name,jscape.TradingPartner.Protocol.GOOGLE_CLOUD,company,email,undefined,undefined,undefined,timeout),{googleCloudData:new jscape.GoogleCloudData(authenticationType,keyFile,credentials),tags:tags});};jscape.TradingPartner.googleStorage=function(name,company,email,timeout,authenticationType,keyFile,credentials,tags){return $.extend(new jscape.TradingPartner(name,jscape.TradingPartner.Protocol.GOOGLE_CLOUD_STORAGE,company,email,undefined,undefined,undefined,timeout),{googleStorageData:new jscape.GoogleStorageData(authenticationType,keyFile,credentials),tags:tags});};jscape.TradingPartner.googleDrive=function(name,company,email,timeout,proxyData,keyFile,credentials,tags){return $.extend(new jscape.TradingPartner(name,jscape.TradingPartner.Protocol.GOOGLE_DRIVE,company,email,undefined,undefined,undefined,timeout,proxyData),{googleDriveData:new jscape.GoogleDriveData(keyFile,credentials),tags:tags});};jscape.TradingPartner.microsoftAzureFileStorage=function(name,company,email,timeout,username,password,authenticationType,endPointSuffix,sslRequired,tags){return $.extend(new jscape.TradingPartner(name,jscape.TradingPartner.Protocol.MICROSOFT_AZURE_FILE_STORAGE,company,email,undefined,undefined,undefined,timeout,undefined,undefined,undefined,username,password),{microsoftAzureFileStorageData:new jscape.MicrosoftAzureFileStorageData(authenticationType,endPointSuffix,sslRequired),tags:tags});};jscape.TradingPartner.microsoftAzureBlobStorage=function(name,company,email,timeout,username,password,authenticationType,endPointSuffix,sslRequired,tags){return $.extend(new jscape.TradingPartner(name,jscape.TradingPartner.Protocol.MICROSOFT_AZURE_BLOB_STORAGE,company,email,undefined,undefined,undefined,timeout,undefined,undefined,undefined,username,password),{microsoftAzureBlobStorageData:new jscape.MicrosoftAzureBlobStorageData(authenticationType,endPointSuffix,sslRequired),tags:tags});};jscape.TradingPartner.microsoftAzureDataLake=function(name,company,email,timeout,username,password,authenticationType,azureTenantId,azureAccount,tags){return $.extend(new jscape.TradingPartner(name,jscape.TradingPartner.Protocol.MICROSOFT_AZURE_DATA_LAKE,company,email,undefined,undefined,undefined,timeout,undefined,undefined,undefined,username,password),{microsoftAzureDataLakeData:new jscape.MicrosoftAzureDataLakeData(authenticationType,azureTenantId,azureAccount),tags:tags});};jscape.TradingPartner.microsoftAzureDataLake2=function(name,company,email,timeout,username,password,authenticationType,endPointSuffix,tags){return $.extend(new jscape.TradingPartner(name,jscape.TradingPartner.Protocol.MICROSOFT_AZURE_DATA_LAKE_2,company,email,undefined,undefined,undefined,timeout,undefined,undefined,undefined,username,password),{microsoftAzureDataLake2Data:new jscape.MicrosoftAzureDataLake2Data(authenticationType,endPointSuffix),tags:tags});};jscape.TradingPartner.microsoftOneDrive=function(name,company,email,directoryId,clientId,clientSecret,username,rootDriveAccessRequired,tags){return $.extend(new jscape.TradingPartner(name,jscape.TradingPartner.Protocol.MICROSOFT_ONEDRIVE,company,email),{microsoftOneDriveData:new jscape.MicrosoftOneDriveData(directoryId,clientId,clientSecret,username,rootDriveAccessRequired),tags:tags});};jscape.TradingPartner.box=function(name,company,email,accessToken,credentials,tags){return $.extend(new jscape.TradingPartner(name,jscape.TradingPartner.Protocol.BOX,company,email),{boxData:new jscape.BoxData(accessToken,credentials),tags:tags});};jscape.TradingPartner.dropbox=function(name,company,email,accessToken,tags){return $.extend(new jscape.TradingPartner(name,jscape.TradingPartner.Protocol.DROPBOX,company,email),{dropboxData:new jscape.DropboxData(accessToken),tags:tags});};jscape.TradingPartner.ibmCloud=function(name,company,email,endPoint,proxyData,username,password,tags){return $.extend(new jscape.TradingPartner(name,jscape.TradingPartner.Protocol.IBM_CLOUD,company,email,undefined,undefined,undefined,undefined,proxyData,undefined,undefined,username,password),{ibmCloudData:new jscape.IbmCloudData(endPoint),tags:tags});};jscape.TradingPartner.splunkHttp=function(name,company,email,host,port,timeout,token,sslRequired,tags){return $.extend(new jscape.TradingPartner(name,jscape.TradingPartner.Protocol.SPLUNK_HTTP,company,email,undefined,host,port,timeout),{splunkHttpData:new jscape.SplunkHttpData(token,sslRequired),tags:tags});};jscape.TradingPartner.redwood=function(name,company,email,url,timeout,username,tags){return $.extend(new jscape.TradingPartner(name,jscape.TradingPartner.Protocol.REDWOOD,company,email,url,undefined,undefined,timeout,undefined,undefined,undefined,username),{tags:tags});};jscape.TradingPartner.localDirectory=function(name,company,email,tags){return $.extend(new jscape.TradingPartner(name,jscape.TradingPartner.Protocol.LOCAL_DIRECTORY,company,email),{tags:tags});};jscape.TradingPartner.jdbc=function(name,company,email,url,username,password,tags){return $.extend(new jscape.TradingPartner(name,jscape.TradingPartner.Protocol.JDBC,company,email,url,undefined,undefined,undefined,undefined,undefined,undefined,username,password),{tags:tags});};jscape.TradingPartner.activeBatch=function(name,company,email,host,port,timeout,username,password,jobSchedulerHost,tags){return $.extend(new jscape.TradingPartner(name,jscape.TradingPartner.Protocol.ACTIVE_BATCH,company,email,undefined,host,port,timeout,undefined,undefined,undefined,username,password),{activeBatchData:new jscape.ActiveBatchData(jobSchedulerHost),tags:tags});};jscape.TradingPartner.tidal=function(name,company,email,url,username,password,tags){return new jscape.TradingPartner(name,jscape.TradingPartner.Protocol.TIDAL,company,email,url,undefined,undefined,undefined,undefined,undefined,undefined,username,password);};jscape.TradingPartner.cyberArk=function(name,company,email,host,port,timeout,username,password,tags){return $.extend(new jscape.TradingPartner(name,jscape.TradingPartner.Protocol.CYBER_ARK,company,email,undefined,host,port,timeout,undefined,undefined,undefined,username,password),{cyberArkData:new jscape.CyberArkData(),tags:tags});};jscape.TradingPartner.Protocol={AFTP:"AFTP",AGENT:"Agent",AMAZON_S3:"AmazonS3",S3_COMPATIBLE:"S3 Compatible",AMAZON_AWS:"AmazonAWS",AS2:"AS2",BOX:"BOX",DROPBOX:"DROPBOX",FTP:"FTP",FTPS_IMPLICIT:"Implicit FTPS",FTPS_EXPLICIT:"Explicit FTPS",LOCAL_DIRECTORY:"Local Directory",IMAP:"IMAP",IBM_CLOUD:"IBM CLOUD",OFTP:"OFTP",POP3:"POP3",REST:"REST",SFTP:"SFTP",SMB:"SMB",SMTP:"SMTP",SPLUNK_HTTP:"Splunk HTTP Event Collector",TFTP:"TFTP",WEBDAV:"WebDAV",GOOGLE_CLOUD_STORAGE:"Google Cloud Storage",GOOGLE_CLOUD:"Google Cloud",GOOGLE_DRIVE:"Google Drive",MICROSOFT_AZURE_FILE_STORAGE:"Microsoft Azure File Storage",MICROSOFT_AZURE_BLOB_STORAGE:"Microsoft Azure Blob Storage",MICROSOFT_AZURE_DATA_LAKE:"Microsoft Azure Data Lake",MICROSOFT_AZURE_DATA_LAKE_2:"Microsoft Azure Data Lake Gen2",MICROSOFT_ONEDRIVE:"Microsoft OneDrive",REDWOOD:"Redwood",JDBC:"JDBC",ACTIVE_BATCH:"ActiveBatch",TIDAL:"Tidal",CYBER_ARK:"CyberArk"};jscape.TradingPartner.Protocol.values=function(){return $.map(this,function(val){return typeof val!=="function"?val:null;});};jscape.TradingPartner.Protocol.fromString=function(str){var name=(""+str).toUpperCase();var ret=$.map(this,function(val,key){return val==str||key==name?val:null;});return ret.length!=0?ret[0]:null;};jscape.TradingPartner.Protocol.format=function(str){function _keyFor(value){return"APPLICATION_PROTOCOL_"+(""+value).replace(/\s+/g,"_").toUpperCase();}
var key=_keyFor(str);if(window.R.string.contains(key)){return window.R.string[key];}
var name=(""+str).toUpperCase();var keys=$.map(this,function(val,key){return val==str||key==name?key:null;});return keys.length!=0&&window.R.string.contains(_keyFor(keys[0]))?window.R.string[_keyFor(keys[0])]:"";};jscape.AftpData=Class.extend({initialize:function(a,b,c){this.downloadRate=parseInt(a)||0;this.uploadRate=parseInt(b)||0;this.congestionControlEnabled=!!c;}});jscape.AftpData.fromJSON=function(data){return data?new jscape.AftpData(data.downloadRate,data.uploadRate,data.congestionControlEnabled):undefined;};jscape.AgentData=Class.extend({initialize:function(a){this.agentName=a||"";}});jscape.AgentData.fromJSON=function(data){return data?new jscape.AgentData(data.agentName):undefined;};jscape.FtpData=Class.extend({initialize:function(a,b,c){this.postLoginCommand=a||"";this.passiveTransferModeRequired=!!b;this.epsvCommandAllowed=c!=undefined?!!c:true;}});jscape.FtpData.fromJSON=function(data){return data?new jscape.FtpData(data.postLoginCommand,data.passiveTransferModeRequired,data.epsvCommandAllowed):undefined;};jscape.SftpData=Class.extend({initialize:function(a,b,c){this.startSubsystemReplyRequired=!!a;this.publicKeyAlgorithm=b||"";this.pipelinedTransferEnabled=c!==undefined?!!c:true;}});jscape.SftpData.fromJSON=function(data){return data?new jscape.SftpData(data.startSubsystemReplyRequired,data.publicKeyAlgorithm,data.pipelinedTransferEnabled):undefined;};jscape.As2Data=Class.extend({initialize:function(a,b,c,d,e,f,g,h,i,j,k,l){this.sender=a||"";this.recipient=b||"";this.fromAddress=c||"";this.receiptType=d||"";this.receiptHttpsRequired=!!e;this.receiptSignatureRequired=!!f;this.receiptAwaitingTimeout=parseInt(g)||0;this.encryptionKeyProvider=h||null;this.encryptionAlgorithm=i||null;this.signingKeyProvider=j||null;this.signatureAlgorithm=k||null;this.compressionRequired=!!l;}});jscape.As2Data.fromJSON=function(data){if(data){var signatureAlgorithm=jscape.SignatureAlgorithm.valueOf(data.signatureAlgorithm);return new jscape.As2Data(data.sender,data.recipient,data.fromAddress,data.receiptType,data.receiptHttpsRequired,data.receiptSignatureRequired,data.receiptAwaitingTimeout,jscape.KeyProvider.fromJSON(data.encryptionKeyProvider),data.encryptionAlgorithm,jscape.KeyProvider.fromJSON(data.signingKeyProvider),signatureAlgorithm?signatureAlgorithm.hashAlgorithm:null,data.compressionRequired)}
return undefined;};jscape.OftpPartnerData=Class.extend({initialize:function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){this.destinationId=a||"";this.sslCertificateData=b||new jscape.CertificateData();this.sslKeyAlias=c||"";this.authenticationCertificateData=d||new jscape.CertificateData();this.authenticationKeyAliases=e||[];this.requestEncryptionCertificateData=f||new jscape.CertificateData();this.requestDecryptionKeyAliases=g||[];this.requestSigningKeyAlias=h||"";this.requestSignatureVerificationCertificateData=i||new jscape.CertificateData();this.receiptSigningKeyAlias=j||"";this.receiptSignatureVerificationCertificateData=k||new jscape.CertificateData();this.cipherSuite=l;this.sslEnabled=m!=undefined?!!m:false;this.secureAuthenticationEnabled=n!=undefined?!!n:false;this.requestCompressionEnabled=o!=undefined?!!o:false;this.requestEncryptionEnabled=p!=undefined?!!p:false;this.requestSigningEnabled=q!=undefined?!!q:false;this.receiptSignatureRequired=r!=undefined?!!r:false;this.automaticReceiptGenerationAllowed=s!=undefined?!!s:false;this.certificateExchangeAllowed=t!=undefined?!!t:false;this.relayAllowed=u!=undefined?!!u:false;}});jscape.OftpPartnerData.fromJSON=function(data){return data?new jscape.OftpPartnerData(data.destinationId,jscape.CertificateData.fromJSON(data.sslCertificateData),data.sslKeyAlias,jscape.CertificateData.fromJSON(data.authenticationCertificateData),data.authenticationKeyAliases,jscape.CertificateData.fromJSON(data.requestEncryptionCertificateData),data.requestDecryptionKeyAliases,data.requestSigningKeyAlias,jscape.CertificateData.fromJSON(data.requestSignatureVerificationCertificateData),data.receiptSigningKeyAlias,jscape.CertificateData.fromJSON(data.receiptSignatureVerificationCertificateData),data.cipherSuite,data.sslEnabled,data.secureAuthenticationEnabled,data.requestCompressionEnabled,data.requestEncryptionEnabled,data.requestSigningEnabled,data.receiptSignatureRequired,data.automaticReceiptGenerationAllowed,data.certificateExchangeAllowed,data.relayAllowed):undefined;};jscape.AmazonAuthenticationType={CREDENTIALS:"CREDENTIALS",IAM_ROLE:"IAM_ROLE"};jscape.AmazonAuthenticationType.fromString=function(data){var value=jscape.AmazonAuthenticationType[(""+data).toUpperCase()];return!!value&&typeof value!=="function"?value:jscape.AmazonAuthenticationType.CREDENTIALS;};jscape.AmazonS3ServerSideEncryptionType={NONE:"NONE",AMAZON_S3_MANAGED_KEYS:"AMAZON_S3_MANAGED_KEYS",AWS_KMS_MANAGED_KEYS:"AWS_KMS_MANAGED_KEYS"};jscape.AmazonS3ServerSideEncryptionType.fromString=function(data){var value=jscape.AmazonS3ServerSideEncryptionType[(""+data).toUpperCase()];return!!value&&typeof value!=="function"?value:jscape.AmazonS3ServerSideEncryptionType.NONE;};jscape.AmazonS3Data=Class.extend({initialize:function(a,b,c,d,e){this.authenticationType=jscape.AmazonAuthenticationType.fromString(a);this.serverSideEncryptionType=jscape.AmazonS3ServerSideEncryptionType.fromString(b);this.kmsKeyId=c||"";this.region=d||"us-west-2";this.requesterPaymentRequired=!!e;}});jscape.AmazonS3Data.fromJSON=function(data){return data?new jscape.AmazonS3Data(data.authenticationType,data.serverSideEncryptionType,data.kmsKeyId,data.region,data.requesterPaymentRequired):undefined;};jscape.S3CompatibleData=Class.extend({initialize:function(a,b){this.endPoint=a||"";this.region=b||null;}});jscape.S3CompatibleData.fromJSON=function(data){return data?new jscape.S3CompatibleData(data.endPoint,data.region):undefined;};jscape.AmazonAwsData=Class.extend({initialize:function(a,b){this.authenticationType=jscape.AmazonAuthenticationType.fromString(a);this.region=b||"us-west-2";}});jscape.AmazonAwsData.fromJSON=function(data){return data?new jscape.AmazonAwsData(data.authenticationType,data.region):undefined;};jscape.GoogleAuthenticationType={DEFAULT:"DEFAULT",CREDENTIALS_FILE:"CREDENTIALS_FILE"};jscape.GoogleAuthenticationType.fromString=function(data){var value=jscape.GoogleAuthenticationType[(""+data).toUpperCase()];return!!value&&typeof value!=="function"?value:jscape.GoogleAuthenticationType.DEFAULT;};jscape.GoogleCloudData=Class.extend({initialize:function(a,b,c){this.authenticationType=jscape.GoogleAuthenticationType.fromString(a);this.credentialsFile=b||null;this.credentialsData=c||null;}});jscape.GoogleCloudData.fromJSON=function(data){return data?new jscape.GoogleCloudData(data.authenticationType,data.credentialsFile,data.credentialsData):undefined;};jscape.GoogleStorageData=Class.extend({initialize:function(a,b,c){this.authenticationType=jscape.GoogleAuthenticationType.fromString(a);this.credentialsFile=b||null;this.credentialsData=c||null;}});jscape.GoogleStorageData.fromJSON=function(data){return data?new jscape.GoogleStorageData(data.authenticationType,data.credentialsFile,data.credentialsData):undefined;};jscape.GoogleDriveData=Class.extend({initialize:function(a,b){this.credentialsFile=a||"";this.credentialsData=b||"";}});jscape.GoogleDriveData.fromJSON=function(data){return data?new jscape.GoogleDriveData(data.credentialsFile,data.credentialsData):undefined;};jscape.IbmCloudData=Class.extend({initialize:function(a){this.endPoint=a||"";}});jscape.IbmCloudData.fromJSON=function(data){return data?new jscape.IbmCloudData(data.endPoint):undefined;};jscape.MicrosoftAzureAuthenticationType={CREDENTIALS:"CREDENTIALS",AMI_ROLE:"AMI_ROLE"};jscape.MicrosoftAzureAuthenticationType.fromString=function(data){var value=jscape.MicrosoftAzureAuthenticationType[(""+data).toUpperCase()];return!!value&&typeof value!=="function"?value:jscape.MicrosoftAzureAuthenticationType.CREDENTIALS;};jscape.MicrosoftAzureFileStorageData=Class.extend({initialize:function(a,b,c){this.authenticationType=jscape.MicrosoftAzureAuthenticationType.fromString(a);this.endPointSuffix=b||null;this.sslRequired=!!c;}});jscape.MicrosoftAzureFileStorageData.fromJSON=function(data){return data?new jscape.MicrosoftAzureFileStorageData(data.authenticationType,data.endPointSuffix,data.sslRequired):undefined;};jscape.MicrosoftAzureBlobStorageData=Class.extend({initialize:function(a,b,c){this.authenticationType=jscape.MicrosoftAzureAuthenticationType.fromString(a);this.endPointSuffix=b||null;this.sslRequired=!!c;}});jscape.MicrosoftAzureBlobStorageData.fromJSON=function(data){return data?new jscape.MicrosoftAzureBlobStorageData(data.authenticationType,data.endPointSuffix,data.sslRequired):undefined;};jscape.MicrosoftAzureDataLakeData=Class.extend({initialize:function(a,b,c){this.authenticationType=jscape.MicrosoftAzureAuthenticationType.fromString(a);this.tenantId=b||"";this.accountFqdn=c||"";}});jscape.MicrosoftAzureDataLakeData.fromJSON=function(data){return data?new jscape.MicrosoftAzureDataLakeData(data.authenticationType,data.tenantId,data.accountFqdn):undefined;};jscape.MicrosoftAzureDataLake2Data=Class.extend({initialize:function(a,b){this.authenticationType=jscape.MicrosoftAzureAuthenticationType.fromString(a);this.endPointSuffix=b||"";}});jscape.MicrosoftAzureDataLake2Data.fromJSON=function(data){return data?new jscape.MicrosoftAzureDataLake2Data(data.authenticationType,data.endPointSuffix):undefined;};jscape.MicrosoftOneDriveData=Class.extend({initialize:function(a,b,c,d,e){this.directoryId=a||null;this.clientId=b||null;this.clientSecret=c||null;this.username=d||null;this.userRootDriveAccessRequired=!!e;}});jscape.MicrosoftOneDriveData.fromJSON=function(data){return data?new jscape.MicrosoftOneDriveData(data.directoryId,data.clientId,data.clientSecret,data.username,data.userRootDriveAccessRequired):undefined;};jscape.BoxData=Class.extend({initialize:function(a,b){this.credentialsFile=a||"";this.credentialsData=b||"";}});jscape.BoxData.fromJSON=function(data){return data?new jscape.BoxData(data.credentialsFile,data.credentialsData):undefined;};jscape.DropboxData=Class.extend({initialize:function(a){this.accessToken=a||"";}});jscape.DropboxData.fromJSON=function(data){return data?new jscape.DropboxData(data.accessToken):undefined;};jscape.EmailAuthenticationType={BASIC:"BASIC",CRAM_MD5:"CRAM_MD5",APOP:"APOP",XOAUTH2:"XOAUTH2"};jscape.EmailAuthenticationType.fromString=function(data){var value=jscape.EmailAuthenticationType[(""+data).toUpperCase()];return!!value&&typeof value!=="function"?value:jscape.EmailAuthenticationType.BASIC;};jscape.ImapData=Class.extend({initialize:function(a,b){this.authenticationType=jscape.EmailAuthenticationType.fromString(a);this.oauthData=b||null;}});jscape.ImapData.fromJSON=function(data){return data?new jscape.ImapData(data.authenticationType,jscape.OAuthData.fromJSON(data.oauthData)):undefined;};jscape.Pop3Data=Class.extend({initialize:function(a,b){this.authenticationType=jscape.EmailAuthenticationType.fromString(a);this.oauthData=b||null;}});jscape.Pop3Data.fromJSON=function(data){return data?new jscape.Pop3Data(data.authenticationType,jscape.OAuthData.fromJSON(data.oauthData)):undefined;};jscape.SmtpData=Class.extend({initialize:function(a,b){this.authenticationType=jscape.EmailAuthenticationType.fromString(a);this.oauthData=b||null;}});jscape.SmtpData.fromJSON=function(data){return data?new jscape.SmtpData(data.authenticationType,jscape.OAuthData.fromJSON(data.oauthData)):undefined;};jscape.OAuthData=Class.extend({initialize:function(a,b,c,d){this.tokenEndpointUrl=a||"";this.clientId=b||"";this.clientSecret=c||"";this.redirectUrl=d||"";}});jscape.OAuthData.fromJSON=function(data){return data?new jscape.OAuthData(data.tokenEndpointUrl,data.clientId,data.clientSecret,data.redirectUrl):undefined;};jscape.SplunkHttpData=Class.extend({initialize:function(a,b){this.accessToken=a||null;this.sslRequired=!!b;}});jscape.SplunkHttpData.fromJSON=function(data){return data?new jscape.SplunkHttpData(data.accessToken,data.sslRequired):undefined;};jscape.ActiveBatchData=Class.extend({initialize:function(a){this.jobSchedulerHost=a||null;}});jscape.ActiveBatchData.fromJSON=function(data){return data?new jscape.ActiveBatchData(data.jobSchedulerHost):undefined;};jscape.CyberArkData=Class.extend({initialize:function(){}});jscape.CyberArkData.fromJSON=function(data){return data?new jscape.CyberArkData():undefined;};jscape.CertificateData=Class.extend({initialize:function(descriptor,aliases){this.descriptor=descriptor||new jscape.CertificateDescriptor();this.aliases=aliases||[];}});jscape.CertificateData.fromJSON=function(data){return data?new jscape.CertificateData(jscape.CertificateDescriptor.fromJSON(data.descriptor),data.aliases):undefined;};jscape.CertificateDescriptor=Class.extend({initialize:function(a,b,c,d){this.issuer=a||"";this.subject=b||"";this.keyUsages=c||[];this.extendedKeyUsages=d||[];}});jscape.CertificateDescriptor.fromJSON=function(data){return data?new jscape.CertificateDescriptor(data.issuer,data.subject,data.keyUsages,data.extendedKeyUsages):undefined;};jscape.domain.TradingPartnersModule=jscape.domain.DomainModule.extend({initialize:function(tca,tua){this.tca=tca;this.tua=tua;},onCreate:function(_,app,actions,functions){this._super.apply(this,arguments);this.controller=new jscape.domain.TradingPartnersController(this.tca,this.tua,functions);},onStart:function(){this.controller.start(this.domainName);},onStop:function(){this.controller.stop();},onPause:function(){this.controller.pause();},onResume:function(){this.controller.resume();}});jscape.domain.TradingPartnersController=jscape.ui.DatagridController.extend({view:null,initialize:function(tca,tua,functions){this.functions=$.grep(functions||[],function(i){return"GetSecret"===i.name;});this.addController=new jscape.domain.AddTradingPartnerController(tca);this.copyController=new jscape.domain.CopyTradingPartnerController(tca);this.editController=new jscape.domain.EditTradingPartnerController(tca);this.deleteController=new jscape.domain.DeleteTradingPartnerController(tca);this.importController=new jscape.domain.ImportTradingPartnersController(tca);this.exportController=new jscape.domain.ExportTradingPartnersController(tca);this.testController=new jscape.domain.TestTradingPartnerController();this.emailController=new jscape.domain.EmailTradingPartnersController();this.emailSpecController=new jscape.domain.EmailTradingPartnerSpecificationController();this.usageController=new jscape.domain.TradingPartnerUsageController(tua);this._initValidators();},start:function(domainName){this.domainName=domainName;if(this.view==null){this.view=new jscape.domain.TradingPartnersView();}
this.view.show(this);},stop:function(){},pause:function(){},resume:function(){this.view.refresh();},onLoadData:function(params){params=jscape.Page.requestParameters(params);return jscape.API.listTradingPartners(this.domainName,params.startIndex,params.count,params.query).then(jscape.Page.datagridFormatter());},onAddPartner:function(){this.addController.start(this,this.domainName,this.functions).done($.proxy(this._partnerAdded,this));},onCopyPartner:function(partner){this.copyController.start(this.domainName,partner.name).done($.proxy(this._partnerCopied,this)).done($.proxy(this._fireApplySuccess,this));},onEditPartner:function(partner,force){var index=$.inArray(partner,this.view.getPartners());if(index!=-1||force===true){this.editController.start(this,this.domainName,partner.name,this.functions).done($.proxy(this._partnerEdited,this,index));}},onDeletePartner:function(partners){this.deleteController.start(this.domainName,partners).done($.proxy(this._partnerDeleted,this,partners));},onImportPartners:function(data){return this.importController.start(this.domainName,data).always($.proxy(function(){this.view.refresh();},this));},onExportPartners:function(partners){var names=$.map(partners,function(partner){return partner.name;});return this.exportController.start(this.domainName,names);},onTestPartner:function(partner){return this.testController.start(this.domainName,partner);},onSendEmail:function(){return this.emailController.start(this.domainName);},onSendSpecEmail:function(partner){return this.emailSpecController.start(this.domainName,partner);},onReportUsage:function(partner){return this.usageController.start(this.domainName,partner);},_partnerAdded:function(partner){this._reloadAndSelect(partner);},_partnerEdited:function(index,partner){this._recordAdded(partner);},_partnerCopied:function(partner,editAfterDone){if(editAfterDone){this.view.refresh($.proxy(function(){this.view.selectRecord(partner);this.onEditPartner(partner,true);},this));}else{this._partnerAdded(partner);}},_partnerDeleted:function(partners){this._recordDeleted(partners);},_initValidators:function(){var v=new jscape.Validator();v.nonEmptyRule("partner_name_nonempty",window.R.string.TRADING_PARTNERS_ERROR_BAD_NAME);v.nonEmptyRule("partner_host_nonempty",window.R.string.TRADING_PARTNERS_ERROR_BAD_HOST);v.rule("partner_unique",$.proxy(this._partnerNotExists,this),window.R.string.TRADING_PARTNERS_ERROR_ALREADY_EXIST);v.rule("partner_url",$.proxy(this._validUrl,this),window.R.string.TRADING_PARTNERS_ERROR_BAD_URL);v.rule("partner_sender",$.proxy(this._validAs2Name,this),window.R.string.TRADING_PARTNERS_ERROR_BAD_SENDER);v.rule("partner_recipient",$.proxy(this._validAs2Name,this),window.R.string.TRADING_PARTNERS_ERROR_BAD_RECIPIENT);},_partnerNotExists:function(name){name=(name||"").toUpperCase();var values=$.map(this.view.getPartners(),function(partner){return partner.name.toUpperCase();});return $.inArray(name,values)==-1;},_validUrl:function(value){return/http(s)?:\/\/.+/i.test(value);},_validAs2Name:function(value){return/^[\x20\x21\x23-\x5B\x5D-\x7E]{1,128}$/.test(value);}});jscape.domain.TradingPartnersView=jscape.ui.DatagridView.extend({selection:null,initialize:function(){var initializing=true;this.fieldset=$("#trading-partners-fields").layout({fit:true,doSize:false,border:false});this.data=$("table[role=grid][aria-label=tradingpartners]",this.fieldset);this.data.datagrid({fit:true,fitColumns:true,ctrlSelect:true,pagination:true,search:true,remoteSearch:true,remoteSort:true,sortName:"name",idField:"name",columns:[[{field:"name",title:$("thead th:nth-child(1)",this.data).text(),width:"20%",sortable:true},{field:"company",title:$("thead th:nth-child(2)",this.data).text(),width:"15%",sortable:true,resizable:true,sorter:function(a,b){return a==b?0:a==null||a<b?-1:1;}},{field:"protocol",title:$("thead th:nth-child(3)",this.data).text(),width:"15%",sortable:true,formatter:$.proxy(this._formatProtocol,this),finder:{type:"combobox",options:{data:$.map(jscape.TradingPartner.Protocol.values(),$.proxy(function(value){return{text:this._formatProtocol(value),value:value};},this)),width:250,panelWidth:250,panelHeight:"auto",panelMaxHeight:"50%"}}},{field:"server",title:$("thead th:nth-child(4)",this.data).text(),width:"30%",sortable:false,searchable:false,formatter:$.proxy(function(_,row){return this._formatServer(row);},this)},{field:"tags",title:$("thead th:nth-child(5)",this.data).text(),width:"20%",formatter:function(value){return String($.isArray(value)?value.join(", "):value).escapeXml();}}]],onSelect:$.proxy(this._adjustButtonsState,this),onUnselect:$.proxy(this._adjustButtonsState,this),onUnselectAll:$.proxy(this._adjustButtonsState,this),onDblClickRow:$.proxy(this._onClick$EditButton,this),onRowContextMenu:$.proxy(this._onRow$ContextMenu,this),loader:$.proxy(this._onLoad$Data,this),onBeforeLoad:function(){return!initializing;},onLoadSuccess:$.proxy(this._adjustButtonsState,this)});this._initDragAndDrop(this.data.datagrid("getPanel"));this.emailButton=$("a[role=button][name=email]",this.fieldset).linkbutton({disabled:true,onClick:$.proxy(this._onClick$EmailButton,this)});this.emailSpecButton=$("a[role=button][name=emailspec]",this.fieldset).linkbutton({disabled:true,onClick:$.proxy(this._onClick$EmailSpecButton,this)});this.reportUsageButton=$("a[role=button][name=reportusage]",this.fieldset).linkbutton({disabled:true,onClick:$.proxy(this._onClick$ReportUsageButton,this)});this.addButton=$("a[role=button][name=add]",this.fieldset).linkbutton({onClick:$.proxy(this._onClick$AddButton,this)});this.editButton=$("a[role=button][name=edit]",this.fieldset).linkbutton({disabled:true,onClick:$.proxy(this._onClick$EditButton,this)});this.copyButton=$("a[role=button][name=copy]",this.fieldset).linkbutton({disabled:true,onClick:$.proxy(this._onClick$CopyButton,this)});this.deleteButton=$("a[role=button][name=delete]",this.fieldset).linkbutton({disabled:true,onClick:$.proxy(this._onClick$DeleteButton,this)});this.importButton=$("a[role=button][name=import]",this.fieldset).linkbutton({onClick:$.proxy(this._onClick$ImportButton,this)});this.exportButton=$("a[role=button][name=export]",this.fieldset).linkbutton({disabled:true,onClick:$.proxy(this._onClick$ExportButton,this)});this.testButton=$("a[role=button][name=test]",this.fieldset).linkbutton({disabled:true,onClick:$.proxy(this._onClick$TestButton,this)});initializing=false;},show:function(listener){this.listener=listener||jscape.domain.TradingPartnersView.LISTENER;this._adjustButtonsState();},getPartners:function(){return this.getRecords();},_onLoad$Data:function(params,success,error){this.listener.onLoadData(params).then(success,error);},_formatProtocol:function(value){return jscape.TradingPartner.Protocol.format(value);},_formatServer:function(partner){return String(partner.url&&partner.url.trim().length?partner.url:partner.host?partner.host+(partner.port?":"+partner.port:""):"").escapeXml();},_onClick$EmailButton:function(){this.emailButton.linkbutton("disable");this.listener.onSendEmail().always($.proxy(function(){this.emailButton.linkbutton("enable");},this));},_onClick$EmailSpecButton:function(){this.emailSpecButton.linkbutton("disable");this.listener.onSendSpecEmail(this.selection[0]).always($.proxy(function(){this.emailSpecButton.linkbutton("enable");},this));},_onClick$ReportUsageButton:function(){this.reportUsageButton.linkbutton("disable");this.listener.onReportUsage(this.selection[0]).always($.proxy(function(){this.reportUsageButton.linkbutton("enable");},this));},_onClick$AddButton:function(){this.listener.onAddPartner(this);},_onClick$EditButton:function(){this.listener.onEditPartner(this.selection[0]);},_onClick$CopyButton:function(){this.listener.onCopyPartner(this.selection[0]);},_onClick$DeleteButton:function(){this.listener.onDeletePartner(this.selection);},_onClick$ImportButton:function(file){this.importButton.linkbutton("disable");this.listener.onImportPartners(file).always($.proxy(function(){this.importButton.linkbutton("enable");},this));},_onClick$ExportButton:function(){this.exportButton.linkbutton("disable");this.listener.onExportPartners(this.selection).always($.proxy(function(){this.exportButton.linkbutton("enable");},this));},_onClick$TestButton:function(){this.testButton.linkbutton({iconCls:'icon-loading',disabled:true,__testing:true});this.listener.onTestPartner(this.selection[0]).always($.proxy(function(){this.testButton.linkbutton({iconCls:'',disabled:false,__testing:false});this._adjustButtonsState();},this));},_createDropArea:function(e){this._super(e,window.R.string.TRADING_PARTNERS_IMPORT_TITLE);},_onDrop:function(e){this._onClick$ImportButton(e.originalEvent.dataTransfer);},_showContextMenu:function(e){this._super(e,[this.addButton,this.editButton,this.copyButton,this.deleteButton,"-",this.testButton,"-",this.emailButton,this.emailSpecButton,"-",this.importButton,this.exportButton,"-",this.reportUsageButton]);},_adjustButtonsState:function(){var items=this.data.datagrid("getSelections");this.selection=items;var testAllowed=items.length==1&&$.inArray(items[0].protocol,[jscape.TradingPartner.Protocol.AGENT,jscape.TradingPartner.Protocol.LOCAL_DIRECTORY])==-1;this.emailButton.linkbutton(this.data.datagrid("getRows").length!=0?"enable":"disable");this.emailSpecButton.linkbutton($.grep(items,function(row){return jscape.TradingPartner.Protocol.AS2==row.protocol;}).length!=0?"enable":"disable");this.reportUsageButton.linkbutton(items.length==1?"enable":"disable");this.exportButton.linkbutton(items.length!=0?"enable":"disable");this.editButton.linkbutton(items.length==1?"enable":"disable");this.copyButton.linkbutton(items.length==1?"enable":"disable");this.testButton.linkbutton(testAllowed&&!this.testButton.linkbutton("options").__testing?"enable":"disable");this.deleteButton.linkbutton(items.length!=0?"enable":"disable");}});jscape.domain.TradingPartnersView.LISTENER={onRefresh:$.noop,onSendEmail:$.noop,onSendSpecEmail:$.noop,onReportUsage:$.noop,onAddPartner:$.noop,onEditPartner:$.noop,onCopyPartner:$.noop,onDeletePartner:$.noop,onImportPartners:$.noop,onExportPartners:$.noop,onTestPartner:$.noop};jscape.domain.AddTradingPartnerController=Class.extend({deferred:null,initialize:function(allowed){this.allowed=!!allowed;this.controllerMap={};this.controllerMap[jscape.TradingPartner.Protocol.AFTP]=jscape.domain.AddAftpTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.AGENT]=jscape.domain.AddAgentTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.AS2]=jscape.domain.AddAs2TradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.AMAZON_S3]=jscape.domain.AddAmazonS3TradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.S3_COMPATIBLE]=jscape.domain.AddAmazonS3CompatibleTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.AMAZON_AWS]=jscape.domain.AddAmazonAwsTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.BOX]=jscape.domain.AddBoxTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.DROPBOX]=jscape.domain.AddDropboxTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.GOOGLE_CLOUD]=jscape.domain.AddGoogleCloudTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.GOOGLE_CLOUD_STORAGE]=jscape.domain.AddGoogleStorageTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.GOOGLE_DRIVE]=jscape.domain.AddGoogleDriveTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.IBM_CLOUD]=jscape.domain.AddIbmCloudTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.LOCAL_DIRECTORY]=jscape.domain.AddLocalDirectoryTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.MICROSOFT_AZURE_FILE_STORAGE]=jscape.domain.AddMicrosoftAzureFileStorageTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.MICROSOFT_AZURE_BLOB_STORAGE]=jscape.domain.AddMicrosoftAzureBlobStorageTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.MICROSOFT_AZURE_DATA_LAKE]=jscape.domain.AddMicrosoftAzureDataLakeTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.MICROSOFT_AZURE_DATA_LAKE_2]=jscape.domain.AddMicrosoftAzureDataLake2TradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.MICROSOFT_ONEDRIVE]=jscape.domain.AddMicrosoftOneDriveTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.REDWOOD]=jscape.domain.AddRedwoodTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.FTP]=jscape.domain.AddFtpTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.FTPS_IMPLICIT]=jscape.domain.AddFtpsImplicitTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.FTPS_EXPLICIT]=jscape.domain.AddFtpsExplicitTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.IMAP]=jscape.domain.AddImapTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.JDBC]=jscape.domain.AddJdbcTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.OFTP]=jscape.domain.AddOftpTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.POP3]=jscape.domain.AddPop3TradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.REST]=jscape.domain.AddRestTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.SFTP]=jscape.domain.AddSftpTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.SMTP]=jscape.domain.AddSmtpTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.SPLUNK_HTTP]=jscape.domain.AddSplunkHttpTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.SMB]=jscape.domain.AddSmbTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.WEBDAV]=jscape.domain.AddWebDavTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.TFTP]=jscape.domain.AddTftpTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.ACTIVE_BATCH]=jscape.domain.AddActiveBatchTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.TIDAL]=jscape.domain.AddTidalTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.CYBER_ARK]=jscape.domain.AddCyberArkTradingPartnerController;},start:function(listener,domainName,functions){this.listener=listener||jscape.domain.AddTradingPartnerController.LISTENER;this.domainName=domainName;this.functions=functions;this.deferred=$.Deferred();if(!this.allowed){this.deferred.reject();}else{this._setupDialog().show(this);}
return this.deferred.promise();},onAddTradingPartner:function(partner){return jscape.API.addTradingPartner(this.domainName,partner).done($.proxy(function(partner){this.deferred.resolve(partner);this.deferred=null;},this));},onTestServer:function(partner){return this.listener.onTestPartner(partner);},onSubmit:function(dialog){var protocol=jscape.TradingPartner.Protocol.fromString(dialog.getProtocol());dialog.destroy();var controller=new this.controllerMap[protocol](this.functions);controller.start(this,this.domainName).fail($.proxy(function(){this.deferred.reject();this.deferred=null;},this));},onCancel:function(dialog){dialog.destroy();this.deferred.reject();this.deferred=null;},_setupDialog:function(){return new jscape.domain.AddTradingPartnerProtocolDialog();}});jscape.domain.AddTradingPartnerController.LISTENER={onTestServer:$.noop};jscape.domain.AddTradingPartnerProtocolDialog=jscape.ui.DefaultDialog.extend({initialize:function(){this._super($("#d-partner-add-protocol"),{width:"40%",minWidth:530,maxWidth:700,minHeight:250});this.protocol=$("select[name=protocol]",this.fieldset).combobox({required:true,limitToList:true,loadFilter:function(data){var f=$(this).combobox("options").textField;return data.sort(function(a,b){return a[f].localeCompare(b[f]);});},keyHandler:$.extend({},$.fn.combobox.defaults.keyHandler,{enter:$.proxy(function(e){$.fn.combobox.defaults.keyHandler.enter.call(e.data.target,e);if(!this.protocol.combobox("panel").is(":visible")){var okBtn=this.okButton;setTimeout(function(){okBtn.click();okBtn=undefined;},100);}},this)}),width:"50%",panelHeight:"auto",panelMaxHeight:"40%"});this.protocol.combobox("textbox").on("focus",function(){$(this).select();});},getProtocol:function(){return this.protocol.combobox("getValue");}});jscape.domain.EditTradingPartnerController=Class.extend({deferred:null,initialize:function(allowed){this.allowed=!!allowed;this.controllerMap={};this.controllerMap[jscape.TradingPartner.Protocol.AFTP]=jscape.domain.EditAftpTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.AGENT]=jscape.domain.EditAgentTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.AS2]=jscape.domain.EditAs2TradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.AMAZON_S3]=jscape.domain.EditAmazonS3TradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.S3_COMPATIBLE]=jscape.domain.EditAmazonS3CompatibleTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.AMAZON_AWS]=jscape.domain.EditAmazonAwsTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.BOX]=jscape.domain.EditBoxTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.DROPBOX]=jscape.domain.EditDropboxTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.GOOGLE_CLOUD]=jscape.domain.EditGoogleCloudTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.GOOGLE_CLOUD_STORAGE]=jscape.domain.EditGoogleStorageTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.GOOGLE_DRIVE]=jscape.domain.EditGoogleDriveTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.IBM_CLOUD]=jscape.domain.EditIbmCloudTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.LOCAL_DIRECTORY]=jscape.domain.EditLocalDirectoryTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.MICROSOFT_AZURE_FILE_STORAGE]=jscape.domain.EditMicrosoftAzureFileStorageTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.MICROSOFT_AZURE_BLOB_STORAGE]=jscape.domain.EditMicrosoftAzureBlobStorageTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.MICROSOFT_AZURE_DATA_LAKE]=jscape.domain.EditMicrosoftAzureDataLakeTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.MICROSOFT_AZURE_DATA_LAKE_2]=jscape.domain.EditMicrosoftAzureDataLake2TradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.MICROSOFT_ONEDRIVE]=jscape.domain.EditMicrosoftOneDriveTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.REDWOOD]=jscape.domain.EditRedwoodTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.FTP]=jscape.domain.EditFtpTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.FTPS_IMPLICIT]=jscape.domain.EditFtpsImplicitTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.FTPS_EXPLICIT]=jscape.domain.EditFtpsExplicitTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.IMAP]=jscape.domain.EditImapTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.JDBC]=jscape.domain.EditJdbcTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.OFTP]=jscape.domain.EditOftpTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.POP3]=jscape.domain.EditPop3TradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.REST]=jscape.domain.EditRestTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.SFTP]=jscape.domain.EditSftpTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.SMTP]=jscape.domain.EditSmtpTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.SPLUNK_HTTP]=jscape.domain.EditSplunkHttpTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.SMB]=jscape.domain.EditSmbTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.WEBDAV]=jscape.domain.EditWebDavTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.TFTP]=jscape.domain.EditTftpTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.ACTIVE_BATCH]=jscape.domain.EditActiveBatchTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.TIDAL]=jscape.domain.EditTidalTradingPartnerController;this.controllerMap[jscape.TradingPartner.Protocol.CYBER_ARK]=jscape.domain.EditCyberArkTradingPartnerController;},start:function(listener,domainName,partnerName,functions){this.listener=listener||jscape.domain.EditTradingPartnerController.LISTENER;this.domainName=domainName;this.partnerName=partnerName;this.functions=functions;this.deferred=$.Deferred();if(!this.allowed){this.deferred.reject();}else{jscape.API.getTradingPartner(this.domainName,this.partnerName).done($.proxy(this._editPartner,this)).fail($.proxy(function(){this.deferred.reject();this.deferred=null;},this));}
return this.deferred.promise();},onEditTradingPartner:function(partner){return jscape.API.setTradingPartner(this.domainName,partner.name,partner).done($.proxy(function(){this.deferred.resolve(partner);this.deferred=null;},this));},onTestServer:function(partner){return this.listener.onTestPartner(partner);},_editPartner:function(partner){var theClass=this.controllerMap[partner.protocol];return new theClass(this.functions).start(this,this.domainName,partner).fail($.proxy(function(){this.deferred.reject();this.deferred=null;},this));}});jscape.domain.EditTradingPartnerController.LISTENER={onTestServer:$.noop};jscape.domain.DeleteTradingPartnerController=Class.extend({deferred:null,initialize:function(allowed){this.allowed=!!allowed;},start:function(domainName,partners){this.domainName=domainName;this.deferred=$.Deferred();if(!this.allowed){this.deferred.reject();}else{this._confirmDelete(partners).done($.proxy(this._deleteConfirmed,this,partners)).fail($.proxy(function(){this.deferred.reject();this.deferred=null;},this));}
return this.deferred.promise();},_confirmDelete:function(partners){var text=$.map(partners,function(partner){return partner.name;}).join(", ");return jscape.ConfirmDialog.confirm(window.R.string.TRADING_PARTNERS_CONFIRM_DELETE_TITLE,window.R.string.TRADING_PARTNERS_CONFIRM_DELETE_MESSAGE.supplant({0:text}));},_deleteConfirmed:function(partners){$.when.apply(jQuery,$.map(partners,$.proxy(function(partner){return jscape.API.deleteTradingPartner(this.domainName,partner.name);},this))).done($.proxy(this.deferred.resolve,this.deferred,partners)).fail($.proxy(function(){this.deferred.reject();this.deferred=null;},this));}});jscape.domain.TestTradingPartnerController=Class.extend({start:function(domainName,partner){this.deferred=$.Deferred();var promise=this.deferred.promise();jscape.API.testTradingPartner(domainName,partner).then($.proxy(this._testComplete,this),$.proxy(function(){this.deferred.reject();},this));return promise;},_testComplete:function(data){if(data&&data.valid===false){this._testFailed(data.message);}else{this._testPassed(data?data.message:"");}},_testPassed:function(message){$.messager.alert(window.R.string.TRADING_PARTNERS_TEST_TITLE,message||window.R.string.TRADING_PARTNERS_MESSAGE_TEST_PASSED,"info");this.deferred.resolve();},_testFailed:function(message){$.messager.alert(window.R.string.TRADING_PARTNERS_TEST_TITLE,message||window.R.string.TRADING_PARTNERS_MESSAGE_TEST_FAILED,"error");this.deferred.reject();}});jscape.domain.EmailTradingPartnersController=Class.extend({deferred:null,start:function(domainName){this.domainName=domainName;this.deferred=$.Deferred();this._setupDialog().show(this);return this.deferred.promise();},_setupDialog:function(){return new jscape.domain.EmailTradingPartnersDialog();},_sendEmail:function(subject,message){return jscape.API.sendTradingPartnersEmail(this.domainName,subject,message).then(function(data){$(document).triggerHandler("broadcast",[window.R.string.TRADING_PARTNERS_SUCCESS_EMAIL_SENT.supplant({0:data})]);});},onSubmit:function(dialog){return this._sendEmail(dialog.getSubject(),dialog.getMessage()).done($.proxy(function(){this.deferred.resolve();this.deferred=null;},this));},onCancel:function(dialog){dialog.destroy();this.deferred.reject();this.deferred=null;}});jscape.domain.EmailTradingPartnersDialog=jscape.ui.DefaultDialog.extend({initialize:function(){this._super($("#d-partner-email"),{width:"60%",height:490,resizable:false});this.fieldset=$("fieldset",this.dialog).panel({fit:true});this.subject=$("input[name=subject]",this.dialog).textbox({required:true,validType:"non_empty",onChange:$.proxy(this._onForm$Change,this),width:"75%"});this.message=$("textarea[name=message]",this.dialog).textbox({required:true,multiline:true,validType:"non_empty",onChange:$.proxy(this._onForm$Change,this),width:"75%",minHeight:320,height:"auto"});},getSubject:function(){return this.subject.textbox("getValue");},getMessage:function(){return this.message.textbox("getValue");},show:function(listener){this._super(listener);this.subject.textbox("textbox").focus();this._onForm$Change();}});jscape.domain.EmailTradingPartnerSpecificationController=Class.extend({deferred:null,start:function(domainName,partner){this.domainName=domainName;this.partnerName=partner.name;this.deferred=$.Deferred();var promise=this.deferred.promise();jscape.API.getTradingPartnerCredentialsEmail(this.domainName,this.partnerName).then($.proxy(function(data){this._setupDialog(data);},this)).catch($.proxy(function(){this.deferred.reject();this.deferred=null;},this));return promise;},_setupDialog:function(data){var dialog=new jscape.domain.EmailTradingPartnerSpecificationDialog();dialog.show(this);if(data){dialog.setRecipient(data.recipient);dialog.setSender(data.sender);dialog.setSubject(data.subject);dialog.setMessage(data.body);dialog.setAttachments(data.attachmentTypes);}
return dialog;},_sendEmail:function(recipient,subject,message,attachments){return jscape.API.sendTradingPartnerCredentialsEmail(this.domainName,this.partnerName,{recipient:recipient,subject:subject,body:message,attachmentTypes:attachments}).then(function(data){$(document).triggerHandler("broadcast",[window.R.string.TRADING_PARTNERS_SUCCESS_EMAIL_SENT.supplant({0:data||""})]);});},onSubmit:function(dialog){return this._sendEmail(dialog.getRecipient(),dialog.getSubject(),dialog.getMessage(),dialog.getAttachments()).done($.proxy(function(){this.deferred.resolve();this.deferred=null;},this));},onCancel:function(dialog){dialog.destroy();this.deferred.reject();this.deferred=null;}});jscape.domain.EmailTradingPartnerSpecificationDialog=jscape.ui.DefaultDialog.extend({initialize:function(){this._super($("#d-partner-email-spec"),{width:"60%",height:"80%"});this.fieldset=$("fieldset",this.dialog).panel({fit:true});this.recipient=$("input[name=recipient]",this.dialog).textbox({required:true,editable:true,validType:["non_empty","email"],width:"75%"});this.sender=$("input[name=sender]",this.dialog).textbox({readonly:true,validType:["non_empty","email"],width:"75%"});this.subject=$("input[name=subject]",this.dialog).textbox({required:true,validType:"non_empty",width:"75%"});this.message=$("textarea[name=message]",this.dialog).textbox({required:true,multiline:true,validType:"non_empty",width:"75%",height:300});this.files=$("select[name=files]",this.dialog).tagbox({limitToList:true,width:"75%"});},getRecipient:function(){return this.recipient.textbox("getValue");},setRecipient:function(value){this.recipient.textbox("setValue",value);},setSender:function(value){this.sender.textbox("setValue",value);},getSubject:function(){return this.subject.textbox("getValue");},setSubject:function(value){this.subject.textbox("setValue",value);},getMessage:function(){return this.message.textbox("getValue");},setMessage:function(value){this.message.textbox("setValue",value);},getAttachments:function(){return this.files.tagbox("getValues");},setAttachments:function(values){this.files.tagbox("setValues",values);},show:function(listener){this._super(listener);this.subject.textbox("textbox").select().focus();}});jscape.domain.TradingPartnerUsageController=Class.extend({deferred:null,initialize:function(allowed){this.allowed=!!allowed;},start:function(domainName,partner){this.domainName=domainName;this.partnerName=partner.name;this.deferred=$.Deferred();if(!this.allowed){this.deferred.reject();}else{this._setupDialog(this.partnerName).show(this);}
return this.deferred.promise();},onLoadData:function(){return jscape.API.getTradingPartnerTriggers(this.domainName,this.partnerName);},_setupDialog:function(partnerName){var dialog=new jscape.domain.TradingPartnerUsageDialog();dialog.setName(partnerName);return dialog;},onCancel:function(dialog){dialog.destroy();this.deferred.reject();this.deferred=null;}});jscape.domain.TradingPartnerUsageDialog=jscape.ui.DefaultDialog.extend({timer:null,initialize:function(){this._super($("#d-partner-triggers"),{modal:true,buttons:null,width:"50%",maxWidth:650,height:"60%",maxHeight:"80%"});this.title=this.dialog.dialog("header").text()||"";var ws=this.dialog.data("window");if(ws&&ws.mask){$(ws.mask).one("click",$.proxy(this._onCancel,this));}
var initializing=true;this.search=$("input[name=search]",this.dialog).textbox({required:false,icons:[{iconCls:"icon-clear",handler:$.proxy(this._onClick$ClearButton,this)}],inputEvents:$.extend({},$.fn.textbox.defaults.inputEvents,{keyup:$.proxy(this._onKeyUp$SearchInput,this),keydown:$.proxy(this._onKeyDown$SearchInput,this)}),width:"100%"});this.data=$("div[role=listbox][aria-label=triggers]",this.dialog);this.data.datalist({fit:true,remoteSort:false,textFormatter:function(val,row){return String(row||"").escapeXml();},onBeforeLoad:function(){return!initializing;},loadFilter:$.proxy(this._onFilter$Data,this),loader:$.proxy(this._onLoad$Data,this)});initializing=false;},show:function(listener){this._super(listener);this.data.datalist("reload");this.search.textbox("textbox").triggerHandler("keyup",{target:this.search});},_onLoad$Data:function(params,success,error){return this.listener.onLoadData(params).done($.proxy(function(data){if(!data||!data.length){this.search.textbox("disable");}},this)).done(success).fail(error);},_onFilter$Data:function(data){var params=this.data.datalist("options").queryParams||{};var text=(params.query||"").toLocaleLowerCase();return!!text?$.grep(data,function(t){return t.toLocaleLowerCase().indexOf(text)>=0?t:null;}):data;},_onSearch$Data:function(query){this.data.datalist("options").queryParams={query:query};this.data.datalist("loading").datalist("loadData",this.data.datalist("getData")).datalist("loaded");},_onKeyDown$SearchInput:function(e){if(e.keyCode==13){$.fn.textbox.defaults.inputEvents.keydown.call(e.target,e);return false;}if(e.keyCode==27){e.preventDefault();$(e.data.target).textbox("getIcon",0).click();return false;}},_onKeyUp$SearchInput:function(e){var t=$(e.data.target);var icon=t.textbox("getIcon",0);var val=t.textbox("getText");icon.css("visibility",!!val?"visible":"hidden");clearTimeout(this.timer);this.timer=setTimeout($.proxy(this._onSearch$Data,this,val),200);},setName:function(value){this.dialog.dialog("setTitle",this.title.supplant({0:String(value).escapeXml()}));},_onClick$ClearButton:function(e){var t=$(e.data.target);t.textbox("clear").textbox("textbox").focus();t.textbox("getIcon",0).css("visibility","hidden");clearTimeout(this.timer);this._onSearch$Data(null);}});jscape.domain.TradingPartnerUsageDialog.Listener={onLoadData:$.noop};jscape.domain.CopyTradingPartnerController=Class.extend({deferred:null,initialize:function(allowed){this.allowed=!!allowed;},start:function(domainName,partnerName){this.domainName=domainName;this.partnerName=partnerName;this.deferred=$.Deferred();if(!this.allowed){this.deferred.reject();}else{this._setupDialog().show(this);}
return this.deferred.promise();},onSubmit:function(dialog){var newName=dialog.getNewPartnerName();var editAfterDone=dialog.isEditAfterDone();return jscape.API.copyTradingPartner(this.domainName,this.partnerName,newName).done($.proxy(function(partner){this.deferred.resolve(partner,editAfterDone);this.deferred=null;},this));},onCancel:function(dialog){dialog.destroy();this.deferred.reject();this.deferred=null;},_setupDialog:function(){var dialog=new jscape.domain.CopyTradingPartnerDialog();dialog.setPartnerName(this.partnerName);dialog.setEditAfterDone(true);return dialog}});jscape.domain.CopyTradingPartnerDialog=jscape.ui.DefaultDialog.extend({initialize:function(){this._super($("#d-partner-copy"),{width:"40%",minWidth:530,maxWidth:750,minHeight:260});this.title=this.dialog.dialog("header").text();this.name=$("input[name=name]",this.fieldset).textbox({required:true,validType:["partner_name_nonempty","partner_unique"],missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_NAME,width:"75%"});this.editAfterDone=$("input[name=editafterdone]:checkbox",this.fieldset);},getNewPartnerName:function(){return this.name.textbox("getValue");},setPartnerName:function(value){this.dialog.dialog("setTitle",this.title.supplant({0:value}));},isEditAfterDone:function(){return this.editAfterDone.is(":checked");},setEditAfterDone:function(value){this.editAfterDone.prop("checked",!!value);}});jscape.domain.ImportTradingPartnersController=jscape.ui.DefaultImportController.extend({deferred:null,initialize:function(allowed){this.allowed=!!allowed;},start:function(domainName,data){this.domainName=domainName;this.deferred=$.Deferred();if(!this.allowed){this.deferred.reject();}else{this._setupDialog(data).show(this);}
return this.deferred.promise();},onSubmit:function(dialog){var file=this.file?this.file:dialog.getFile();return jscape.API.importTradingPartners(this.domainName,file,dialog.isOverwrite()).done($.proxy(function(){this._showSuccessMessage();this.deferred.resolve();this.deferred=null;},this));},onCancel:function(dialog){dialog.destroy();this.deferred.reject();this.deferred=null;},_setupDialog:function(data){var d=new jscape.domain.ImportTradingPartnersDialog();this._listFileEntries(data,"file").done($.proxy(function(files){if(files&&files.length){this.file=files[0];d.setFilename(this.file.name);d=undefined;}},this));return d;},_showSuccessMessage:function(){$(document).triggerHandler("broadcast",window.R.string.TRADING_PARTNERS_SUCCESS_IMPORT);}});jscape.domain.ImportTradingPartnersDialog=jscape.ui.DefaultDialog.extend({initialize:function(){this._super($("#d-partners-import"),{width:"40%",minWidth:500,maxWidth:750,minHeight:280});this.file=$("input[name=file]",this.fieldset).filebox({required:true,validType:"non_empty",validateOnBlur:true,width:"60%"});this.overwrite=$("input[name=overwrite]:checkbox",this.fieldset);},getFile:function(){var files=!this.file.filebox("options").disabled?this.file.filebox("files"):null;return files&&files.length?files[0]:null;},setFilename:function(value){if(!!value){this.file.filebox("setText",value).filebox("disable");}},isOverwrite:function(){return this.overwrite.is(":checked");}});jscape.domain.ExportTradingPartnersController=Class.extend({deferred:null,initialize:function(allowed){this.allowed=!!allowed;},start:function(domainName,names){this.domainName=domainName;this.partnerNames=names;this.deferred=$.Deferred();if(!this.allowed){this.deferred.reject();}else{this._setupDialog().show(this);}
return this.deferred.promise();},onSubmit:function(dialog){return jscape.API.exportTradingPartners(this.domainName,this.partnerNames,dialog.getFilename(),dialog.isExcludePassword()).done($.proxy(function(){this.deferred.resolve();this.deferred=null;},this));},onCancel:function(dialog){dialog.destroy();this.deferred.reject();this.deferred=null;},_setupDialog:function(){var dialog=new jscape.domain.ExportTradingPartnersDialog();dialog.setFilename("trading-partners.txt");dialog.setExcludePassword(true);return dialog;}});jscape.domain.ExportTradingPartnersDialog=jscape.ui.ExportDialog.extend({initialize:function(){this._super($("#d-partners-export"),{width:"50%",minWidth:600,maxWidth:750,minHeight:280});this.excludePassword=$("input[name=excludepwd]:checkbox",this.dialog);},isExcludePassword:function(){return this.excludePassword.is(":checked");},setExcludePassword:function(value){this.excludePassword.prop("checked",!!value).change();}});jscape.domain.BaseTradingPartnerController=Class.extend({clientKeyProvider:null,functions:null,deferred:null,initialize:function(functions){this.clientKeyController=new jscape.domain.ClientKeyController();this.functionController=new jscape.FunctionController();this.functions=functions;},start:function(listener,domainName,keyProvider){this.listener=listener||jscape.domain.BaseTradingPartnerController.LISTENER;this.domainName=domainName;this.clientKeyProvider=keyProvider||null;this.deferred=$.Deferred();this._setupDialog().show(this);return this.deferred.promise();},hasChanged:function(dialog){return!this.partner||!Object._equals(this.partner,this._createPartner(dialog));},onSubmit:function(dialog){var descriptor=this._createPartner(dialog);return this.deferred.resolve(descriptor);},onCancel:function(dialog){dialog.destroy();this.deferred.reject();this.deferred=null;},onTest:function(dialog){return this.listener.onTestServer(this._createPartner(dialog));},onSelectClientKey:function(keyUseNone,keyUseOneTime){return this.clientKeyController.start(this.domainName,this.clientKeyProvider,keyUseNone,keyUseOneTime).done($.proxy(function(provider){this.clientKeyProvider=provider;},this));},onAddFunction:function(input){return this.functionController.start(input,this.functions||[]);},onAddTag:function(value){return jscape.API.storeAclTag(value);},onLoadTags:function(){return jscape.API.getDomainTags(this.domainName);},onLoadHostKeys:function(){return jscape.API.getHostCertificates(this.domainName).then(function(certificates){return $.map(certificates,function(c){return c.name;});});},onLoadFileContent:function(files){var deferred=$.Deferred();var promise=deferred.promise();if(window.FileReader&&files&&files.length&&$.inArray(files[0].type,["text/plain","application/json"])!=-1){var reader=new FileReader();reader.onload=$.proxy(function(e){deferred.resolve(e.target.result);reader.onload=reader.onerror=null;deferred=reader=null;},this);reader.onerror=$.proxy(function(){deferred.reject();reader.onload=reader.onerror=null;deferred=reader=null;},this);reader.readAsText(files[0]);}else{deferred.reject();}
return promise;},_loadHostKeys:function(){return jscape.API.getHostCertificates(this.domainName).then(function(certificates){return $.map(certificates,function(certificate){return certificate.name;});});},_fireSuccess:function(message){if(message){$(document).triggerHandler("broadcast",[message]);}},_setupDialog:function(){throw"not implemented";},_createPartner:function(dialog){throw"not implemented";}});jscape.domain.BaseTradingPartnerController.LISTENER={onTestServer:$.noop};jscape.domain.AddAftpTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({onSubmit:function(dialog){return this.listener.onAddTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.AddAftpTradingPartnerDialog();dialog.setPort(3000);dialog.setTimeout(30*1000);dialog.setTcpNoDelay(true);dialog.setDownloadRate(45*1000*1000);dialog.setUploadRate(45*1000*1000);this._loadHostKeys(dialog).done(function(keys){dialog.setHostKeys(keys);});return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.aftp(dialog.getName(),dialog.getCompany(),dialog.getEmail(),dialog.getHost(),dialog.getPort(),dialog.getTimeout(),dialog.getTcpNoDelay(),dialog.getUsername(),dialog.getPassword(),this.clientKeyProvider,dialog.getHostKey()!=null?new jscape.ServerKeyProvider(dialog.getHostKey()):null,new jscape.AftpData(dialog.getDownloadRate(),dialog.getUploadRate(),dialog.isCongestionControlEnabled()),dialog.getTags());}});jscape.domain.EditAftpTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({start:function(listener,domainName,partner){this.partner=partner;return this._super(listener,domainName,partner.keyProvider);},onSubmit:function(dialog){return this.listener.onEditTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.EditAftpTradingPartnerDialog();var partner=this.partner;if(partner){dialog.setName(partner.name);dialog.setCompany(partner.company);dialog.setEmail(partner.email);dialog.setHost(partner.host);dialog.setPort(partner.port);dialog.setTimeout(partner.timeout);dialog.setTcpNoDelay(partner.tcpNoDelayEnabled);dialog.setUsername(partner.username);dialog.setPassword(partner.password);var partnerData=partner.aftpData;if(partnerData){dialog.setDownloadRate(partnerData.downloadRate);dialog.setUploadRate(partnerData.uploadRate);dialog.setCongestionControlEnabled(partnerData.congestionControlEnabled);}
dialog.setTags(partner.tags);}
this._loadHostKeys().done(function(keys){dialog.setHostKeys(keys);partner&&dialog.setHostKey(partner.hostKeyProvider?partner.hostKeyProvider.keyAlias:null);});return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.aftp(this.partner.name,dialog.getCompany(),dialog.getEmail(),dialog.getHost(),dialog.getPort(),dialog.getTimeout(),dialog.getTcpNoDelay(),dialog.getUsername(),dialog.getPassword(),this.clientKeyProvider,dialog.getHostKey()!=null?new jscape.ServerKeyProvider(dialog.getHostKey()):null,new jscape.AftpData(dialog.getDownloadRate(),dialog.getUploadRate(),dialog.isCongestionControlEnabled()),dialog.getTags());}});jscape.domain.TradingPartnerDialog=jscape.ui.DefaultDialog.extend({initialize:function(dialog){var initializing=true;this._super(dialog,{width:"75%",height:"90%",doSize:false});this.fieldset.focusin($.proxy(this._onForm$FocusIn,this));this.company=$("input[name=company]",this.fieldset).textbox({width:"40%"});this.email=$("input[name=email]",this.fieldset).textbox({required:false,validType:"multi_value['email',',']",invalidMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_EMAIL,width:"40%"});this.proxyType=$("select[name=proxytype]",this.fieldset).combobox({editable:false,onChange:$.proxy(this.onChange$ProxyType,this),width:"40%",panelMinHeight:50,panelHeight:"auto",panelMaxHeight:"50%"});this.proxyHost=$("input[name=proxyhost]",this.fieldset).textbox({required:true,validType:"non_empty",missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_HOST,width:"60%"});this.proxyPort=$("input[name=proxyport]",this.fieldset).numberspinner({required:true,min:1,max:65535,width:100});this.proxyUsername=$("input[name=proxyuser]",this.fieldset).textbox({width:"50%"});this.proxyPassword=$("input[name=proxypwd]",this.fieldset).passwordbox2({width:"50%"});this.tags=$("select[name=tags]",this.fieldset).tagbox({limitToList:jscape.acl&&!jscape.acl.tic,hasDownArrow:true,loader:$.proxy(this._onLoad$Tags,this),onBeforeLoad:function(){return!initializing;},onAddTag:$.proxy(this._onClick$AddTagButton,this),tagEditor:$("#d-add-tag-inline"),width:"60%",panelHeight:"auto",panelMinHeight:50,panelMaxHeight:150});this.functionsButton=$("a[role=button][name=addfunction]",this.fieldset).linkbutton({disabled:true,onClick:$.proxy(this._onClick$FunctionsButton,this)});this.testButton=$("a[role=button][name=test]",this.fieldset).linkbutton({onClick:$.proxy(this._onClick$TestButton,this)});initializing=false;},getCompany:function(){return this.company.textbox("getValue");},setCompany:function(value){this.company.textbox("setValue",value);},getEmail:function(){return this.email.textbox("getValue");},setEmail:function(value){this.email.textbox("setValue",value);},getProxyType:function(){return this.proxyType.length&&!/none/ig.test(this.proxyType.combobox("getValue"))?this.proxyType.combobox("getValue"):null;},setProxyType:function(value){this.proxyType.length&&this.proxyType.combobox("select",value);},getProxyHost:function(){return this.proxyHost.textbox("getValue");},setProxyHost:function(value){this.proxyHost.textbox("setValue",value);},getProxyPort:function(){return this.proxyPort.numberspinner("getValue");},setProxyPort:function(value){this.proxyPort.numberspinner("setValue",value);},getProxyUsername:function(){return this.proxyUsername.length?this.proxyUsername.textbox("getValue"):null;},setProxyUsername:function(value){this.proxyUsername.length&&this.proxyUsername.textbox("setValue",value);},getProxyPassword:function(){return this.proxyPassword.length?this.proxyPassword.passwordbox2("getValue"):null;},setProxyPassword:function(value){this.proxyPassword.length&&this.proxyPassword.passwordbox2("setValue",value);},getTags:function(){return this.tags.tagbox("getValues");},setTags:function(values){this.tags.tagbox("setValues",values);},show:function(listener){this._super(listener);this.currentInput=null;this.onChange$ProxyType();this.tags.tagbox("reload");return this;},hide:function(){this._super();this.currentInput=null;},onChange$ProxyType:function(){var type=this.getProxyType();this.proxyHost.length&&this.proxyHost.textbox(type!=null?"enable":"disable");this.proxyPort.length&&this.proxyPort.numberspinner(type!=null?"enable":"disable");this.proxyUsername.length&&this.proxyUsername.textbox(type!=null?"enable":"disable");this.proxyPassword.length&&this.proxyPassword.passwordbox2(type!=null&&jscape.ProxyData.Type.SOCKS4!=type?"enable":"disable");},_onClick$FunctionsButton:function(){var input=this.currentInput;if(input&&input.is(":not(:disabled)")){this.listener.onAddFunction(input);}},_onClick$AddTagButton:function(tag){this.listener.onAddTag(tag).done($.proxy(function(){this.tags.tagbox("reload");},this));},_onLoad$Tags:function(params,success,error){this.listener.onLoadTags(params).done(success).fail(error);},_onClick$TestButton:function(){if(this.fieldset.form("validate")){this.testButton.linkbutton({iconCls:'icon-loading',disabled:true,__testing:true});this.listener.onTest(this).always($.proxy(function(){this.testButton.linkbutton({iconCls:'',disabled:false,__testing:false});},this));}},_onForm$FocusIn:function(e){var t=$(e.target);if(t.is("textarea:visible")||t.is("input:visible:not([readonly]):not(:checkbox):not(:radio)")){this.currentInput=t;this.functionsButton.linkbutton("enable");}else if(e.target!==this.functionsButton[0]){this.currentInput=null;this.functionsButton.linkbutton("disable");}}});jscape.domain.TradingPartnerDialog.LISTENER={onSubmit:$.noop,onCancel:$.noop,onTest:$.noop,onAddFunction:$.noop,onAddTag:$.noop};jscape.domain.AftpTradingPartnerDialog=jscape.domain.TradingPartnerDialog.extend({TIMEOUT_FACTOR:1000,DEFAULT_BIT_RATE:45*1000*1000,initialize:function(dialog){this._super(dialog);this.host=$("input[name=host]",this.fieldset).textbox({required:true,validType:"partner_host_nonempty",missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_HOST,width:"60%"});this.port=$("input[name=port]",this.fieldset).numberspinner({required:true,min:1,max:65535,width:100});this.timeout=$("input[name=timeout]",this.fieldset).numberspinner({required:true,min:1,max:60,width:60});this.tcpNoDelay=$("input[name=tcpnodelay]:checkbox",this.fieldset);this.username=$("input[name=username]",this.fieldset).textbox({width:"50%"});this.password=$("input[name=password]",this.fieldset).passwordbox2({width:"50%"});this.downloadRate=$("input[name=downloadrate]",this.fieldset).numberspinner({required:true,min:1,max:9999,increment:10,value:this.DEFAULT_BIT_RATE,unitbox:$("select[name=downloadrateunit]",this.fieldset).combobox({required:true,editable:false,width:100,panelHeight:"auto"}),width:"15%"});this.uploadRate=$("input[name=uploadrate]",this.fieldset).numberspinner({required:true,min:1,max:9999,increment:10,value:this.DEFAULT_BIT_RATE,unitbox:$("select[name=uploadrateunit]",this.fieldset).combobox({required:true,editable:false,width:100,panelHeight:"auto"}),width:"15%"});this.congestionControlEnabled=$("input[name=congestioncontrol]:checkbox",this.fieldset);this.useHostKey=$("input[name=usehostkey]:checkbox",this.fieldset).prop("disabled",true);this.useHostKey.change($.proxy(function(){this.hostKey.combobox(this.useHostKey.is(":checked")?"enable":"disable");},this));this.hostKey=$("select[name=hostkey]",this.fieldset);this.hostKey.combobox({editable:false,disabled:true,onLoadSuccess:$.proxy(function(data){this.useHostKey.prop("disabled",data.length==0);if(data.length!=0){this.hostKey.combobox("select",data[0].value);}},this),width:170,panelHeight:"auto",panelMaxHeight:150});this.clientKeyButton=$("a[role=button][name=selectclientkey]",this.fieldset).linkbutton({onClick:$.proxy(this._onClick$ClientKeyButton,this)});},getHost:function(){return this.host.textbox("getValue");},setHost:function(value){this.host.textbox("setValue",value);},getPort:function(){return this.port.numberspinner("getValue");},setPort:function(value){this.port.numberspinner("setValue",value);},getTimeout:function(){return this.timeout.numberspinner("getValue")*this.TIMEOUT_FACTOR;},setTimeout:function(value){this.timeout.numberspinner("setValue",parseInt(value)/this.TIMEOUT_FACTOR);},getTcpNoDelay:function(){return this.tcpNoDelay.is(":checked");},setTcpNoDelay:function(value){this.tcpNoDelay.prop("checked",!!value);},getUsername:function(){return this.username.textbox("getValue");},setUsername:function(value){this.username.textbox("setValue",value);},getPassword:function(){return this.password.passwordbox2("getValue");},setPassword:function(value){this.password.passwordbox2("setValue",value);},getHostKey:function(){return this.useHostKey.is(":checked")?this.hostKey.combobox("getValue"):null;},setHostKey:function(value){this.useHostKey.prop("checked",value!=null).change();if(value!=null){this.hostKey.combobox("setValue",value);}},setHostKeys:function(values){this.hostKey.combobox("loadData",values);},getDownloadRate:function(){return parseInt(this.downloadRate.numberspinner("getValue"));},setDownloadRate:function(value){this.downloadRate.numberspinner("setValue",parseInt(value));},getUploadRate:function(){return parseInt(this.uploadRate.numberspinner("getValue"));},setUploadRate:function(value){this.uploadRate.numberspinner("setValue",parseInt(value));},isCongestionControlEnabled:function(){return this.congestionControlEnabled.is(":checked");},setCongestionControlEnabled:function(value){this.congestionControlEnabled.prop("checked",!!value);},show:function(listener){return this._super(listener||jscape.domain.AftpTradingPartnerDialog.LISTENER);},_onLoad$HostKeys:function(params,success,error){this.listener.onLoadHostKeys(params).done(success).fail(error);},_onClick$ClientKeyButton:function(){this.listener.onSelectClientKey().done($.proxy(this._onForm$Change,this));}});jscape.domain.AftpTradingPartnerDialog.LISTENER=$.extend({onSelectClientKey:$.noop},jscape.domain.TradingPartnerDialog.LISTENER);jscape.domain.AddAftpTradingPartnerDialog=jscape.domain.AftpTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-add-aftp"));this.name=$("input[name=name]",this.fieldset).textbox({required:true,validType:["partner_name_nonempty","partner_unique"],missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_NAME,width:"60%"});},getName:function(){return this.name.textbox("getValue");}});jscape.domain.EditAftpTradingPartnerDialog=jscape.domain.AftpTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-edit-aftp"));this.title=this.dialog.dialog("header").text()||"";},setName:function(value){this.dialog.dialog("setTitle",this.title.supplant({0:value}));}});jscape.domain.AddAgentTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({onLoadAgents:function(){return jscape.API.getAccountNames(this.domainName);},onSubmit:function(dialog){return this.listener.onAddTradingPartner(this._createPartner(dialog));},_setupDialog:function(){return new jscape.domain.AddAgentTradingPartnerDialog();},_createPartner:function(dialog){return jscape.TradingPartner.agent(dialog.getName(),dialog.getCompany(),dialog.getEmail(),new jscape.AgentData(dialog.getAgentName()),dialog.getTags());}});jscape.domain.EditAgentTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({start:function(listener,domainName,partner){this.partner=partner;return this._super(listener,domainName);},onLoadAgents:function(){return jscape.API.getAccountNames(this.domainName);},onSubmit:function(dialog){return this.listener.onEditTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.EditAgentTradingPartnerDialog();var partner=this.partner;if(partner){dialog.setName(partner.name);dialog.setCompany(partner.company);dialog.setEmail(partner.email);if(partner.agentData){dialog.setAgentName(partner.agentData.agentName);}
dialog.setTags(partner.tags);}
return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.agent(this.partner.name,dialog.getCompany(),dialog.getEmail(),new jscape.AgentData(dialog.getAgentName()),dialog.getTags());}});jscape.domain.AgentTradingPartnerDialog=jscape.domain.TradingPartnerDialog.extend({TIMEOUT_FACTOR:1000,initialize:function(dialog){this._super(dialog);var initializing=true;this.agent=$("select[name=agent]",this.fieldset).combobox({required:true,editable:true,limitToList:true,loader:$.proxy(this._onLoad$Data,this),onBeforeLoad:function(){return!initializing;},width:"50%",panelMinHeight:50,panelHeight:"auto",panelMaxHeight:"50%"});initializing=false;},show:function(){this._super.apply(this,arguments);this.agent.combobox("reload");return this;},getAgentName:function(){return this.agent.combobox("getValue");},setAgentName:function(value){this.agent.combobox("setValue",value);},_onLoad$Data:function(params,success,error){this.listener.onLoadAgents().then(success,error);}});jscape.domain.AddAgentTradingPartnerDialog=jscape.domain.AgentTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-add-agent"));this.name=$("input[name=name]",this.fieldset).textbox({required:true,validType:["partner_name_nonempty","partner_unique"],missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_NAME,width:"60%"});},getName:function(){return this.name.textbox("getValue");}});jscape.domain.EditAgentTradingPartnerDialog=jscape.domain.AgentTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-edit-agent"));this.title=this.dialog.dialog("header").text()||"";},setName:function(value){this.dialog.dialog("setTitle",this.title.supplant({0:value}));}});jscape.domain.AddAmazonS3TradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({kmsKeys:{params:null,items:null},start:function(listener,domainName){return this._super(listener,domainName);},onRefreshKmsKeys:function(dialog){var partner=this._createPartner(dialog);var params={u:partner.username,p:partner.password,r:partner.amazonS3Data.region};if(this.kmsKeys&&Object._equals(params,this.kmsKeys.params)&&this.kmsKeys.items&&this.kmsKeys.items.length){return $.Deferred().resolve(this.kmsKeys.items);}
if(!partner.name){partner.name="amazons3";}
return jscape.API.getTradingPartnerAmazonKmsKeys(this.domainName,partner.name,partner).done($.proxy(function(keys){this.kmsKeys={params:params,items:keys};},this));},onSubmit:function(dialog){return this.listener.onAddTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.AddAmazonS3TradingPartnerDialog();dialog.setTimeout(30*1000);dialog.setRegion("us-west-2");return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.amazonS3(dialog.getName(),dialog.getCompany(),dialog.getEmail(),dialog.getTimeout(),dialog.getProxyType()!=null?new jscape.ProxyData(dialog.getProxyType(),dialog.getProxyHost(),dialog.getProxyPort(),dialog.getProxyUsername(),dialog.getProxyPassword()):null,dialog.getUsername(),dialog.getPassword(),new jscape.AmazonS3Data(dialog.getAuthenticationType(),dialog.getEncryptionType(),dialog.getKmsKey(),dialog.getRegion(),dialog.isPaymentRequired()),dialog.getTags());}});jscape.domain.EditAmazonS3TradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({kmsKeys:{params:null,items:null},start:function(listener,domainName,partner){this.partner=partner;return this._super(listener,domainName);},onRefreshKmsKeys:function(dialog){var partner=this._createPartner(dialog);var params={u:partner.username,p:partner.password,r:partner.amazonS3Data.region};if(this.kmsKeys&&Object._equals(params,this.kmsKeys.params)&&this.kmsKeys.items&&this.kmsKeys.items.length){return $.Deferred().resolve(this.kmsKeys.items);}
return jscape.API.getTradingPartnerAmazonKmsKeys(this.domainName,this.partner.name,partner).done($.proxy(function(keys){this.kmsKeys={params:params,items:keys};},this));},onSubmit:function(dialog){return this.listener.onEditTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.EditAmazonS3TradingPartnerDialog();var partner=this.partner;if(partner){dialog.setName(partner.name);dialog.setCompany(partner.company);dialog.setEmail(partner.email);dialog.setTimeout(partner.timeout);var proxy=partner.proxyData;if(proxy){dialog.setProxyType(proxy.type);dialog.setProxyHost(proxy.host);dialog.setProxyPort(proxy.port);dialog.setProxyUsername(proxy.username);dialog.setProxyPassword(proxy.password);}
dialog.setUsername(partner.username);dialog.setPassword(partner.password);if(partner.amazonS3Data){var data=partner.amazonS3Data;dialog.setAuthenticationType(data.authenticationType);dialog.setEncryptionType(jscape.AmazonS3ServerSideEncryptionType.NONE!=data.serverSideEncryptionType?data.serverSideEncryptionType:null);dialog.setKmsKey(data.kmsKeyId);dialog.setRegion(data.region);dialog.setPaymentRequired(data.requesterPaymentRequired);}
dialog.setTags(partner.tags);}
return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.amazonS3(this.partner.name,dialog.getCompany(),dialog.getEmail(),dialog.getTimeout(),dialog.getProxyType()!=null?new jscape.ProxyData(dialog.getProxyType(),dialog.getProxyHost(),dialog.getProxyPort(),dialog.getProxyUsername(),dialog.getProxyPassword()):null,dialog.getUsername(),dialog.getPassword(),new jscape.AmazonS3Data(dialog.getAuthenticationType(),dialog.getEncryptionType(),dialog.getKmsKey(),dialog.getRegion(),dialog.isPaymentRequired()),dialog.getTags());}});jscape.domain.AmazonS3TradingPartnerDialog=jscape.domain.TradingPartnerDialog.extend({TIMEOUT_FACTOR:1000,initialize:function(dialog){this._super(dialog);var initializing=true;this.timeout=$("input[name=timeout]",this.fieldset).numberspinner({required:true,min:1,max:60,width:60});this.authentication=$("input[name=authentication]:radio",this.fieldset);this.useCredentials=this.authentication.filter("[value=CREDENTIALS]");this.username=$("input[name=username]",this.fieldset).textbox({required:true,validType:"non_empty",width:"50%"});this.password=$("input[name=password]",this.fieldset).passwordbox2({width:"50%"});this.authentication.change($.proxy(function(){var enabled=this.isUseCredentials();this.username.textbox(enabled?"enable":"disable").textbox("isValid");this.password.passwordbox2(enabled?"enable":"disable");},this)).first().prop("checked",true).end().change();this.useEncryption=$("input[name=encrypt]:checkbox",this.fieldset).change($.proxy(function(){this.encryption.change();},this));this.encryption=$("input[name=encryption]:radio",this.fieldset);this.ecnryptionAwsKms=this.encryption.filter("[value=AWS_KMS_MANAGED_KEYS]");this.encryptionAwsKmsKey=$("select[name=kmskey]",this.fieldset).combobox({required:true,editable:false,width:220,inputEvents:$.extend({},$.fn.combobox.defaults.inputEvents,{focus:function(e){$(e.data.target).combobox("reload");}}),onBeforeLoad:function(){return!initializing;},loader:$.proxy(this._onLoad$KmsKeys,this)});this.encryption.change($.proxy(function(){if(this.useEncryption.is(":checked")){this.encryption.each(function(_,input){$(input).prop("disabled",false);});this.encryptionAwsKmsKey.combobox(this.ecnryptionAwsKms.is(":checked")?"enable":"disable");}else{this.encryption.each(function(_,input){$(input).prop("disabled",true);});this.encryptionAwsKmsKey.combobox("disable");}},this)).first().prop("checked",true).end().change();this.region=$("select[name=region]",this.fieldset).combobox({required:true,editable:false,width:"40%"});this.paymentRequired=$("input[name=requesterpays]:checkbox",this.fieldset);initializing=false;},getTimeout:function(){return this.timeout.numberspinner("getValue")*this.TIMEOUT_FACTOR;},setTimeout:function(value){this.timeout.numberspinner("setValue",parseInt(value)/this.TIMEOUT_FACTOR).numberspinner("validate");},isUseCredentials:function(){return this.useCredentials.is(":checked");},getUsername:function(){return this.isUseCredentials()?this.username.textbox("getValue"):null;},setUsername:function(value){this.username.textbox("setValue",value);if(!!value){this.username.textbox("setValue",value);this.useCredentials.prop("checked",true).change();}},getPassword:function(){return this.isUseCredentials()?this.password.passwordbox2("getValue"):null;},setPassword:function(value){this.password.passwordbox2("setValue",value);},getAuthenticationType:function(){return this.authentication.filter(":checked").val();},setAuthenticationType:function(value){this.authentication.filter("[value="+value+"]").prop("checked",true).change();},getEncryptionType:function(){return this.useEncryption.is(":checked")?this.encryption.filter(":checked").val():null;},setEncryptionType:function(value){if(!!value){this.encryption.filter("[value="+value+"]").prop("checked",true);this.useEncryption.prop("checked",true).change();}else{this.useEncryption.prop("checked",false).change();}},getKmsKey:function(){return this.ecnryptionAwsKms.is(":checked:not(:disabled)")?this.encryptionAwsKmsKey.combobox("getValue"):null;},setKmsKey:function(value){this.encryptionAwsKmsKey.combobox("setValue",value);},getRegion:function(){return this.region.combobox("getValue");},setRegion:function(value){this.region.combobox("select",value);},isPaymentRequired:function(){return this.paymentRequired.is(":checked");},setPaymentRequired:function(value){this.paymentRequired.prop("checked",!!value);},_onLoad$KmsKeys:function(params,success,error){this.listener.onRefreshKmsKeys(this).done(success).fail(error);}});jscape.domain.AddAmazonS3TradingPartnerDialog=jscape.domain.AmazonS3TradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-add-amazons3"));this.name=$("input[name=name]",this.fieldset).textbox({required:true,validType:["partner_name_nonempty","partner_unique"],missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_NAME,width:"60%"});},getName:function(){return this.name.textbox("getValue");}});jscape.domain.EditAmazonS3TradingPartnerDialog=jscape.domain.AmazonS3TradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-edit-amazons3"));this.title=this.dialog.dialog("header").text()||"";},setName:function(value){this.dialog.dialog("setTitle",this.title.supplant({0:value}));}});jscape.domain.AddAmazonS3CompatibleTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({start:function(listener,domainName){return this._super(listener,domainName);},onSubmit:function(dialog){return this.listener.onAddTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.AddAmazonS3CompatibleTradingPartnerDialog();dialog.setTimeout(30*1000);return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.amazonS3Compatible(dialog.getName(),dialog.getCompany(),dialog.getEmail(),dialog.getTimeout(),dialog.getUsername(),dialog.getPassword(),new jscape.S3CompatibleData(dialog.getEndPoint(),dialog.getRegion()),dialog.getTags());}});jscape.domain.EditAmazonS3CompatibleTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({start:function(listener,domainName,partner){this.partner=partner;return this._super(listener,domainName);},onSubmit:function(dialog){return this.listener.onEditTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.EditAmazonS3CompatibleTradingPartnerDialog();var partner=this.partner;if(partner){dialog.setName(partner.name);dialog.setCompany(partner.company);dialog.setEmail(partner.email);dialog.setTimeout(partner.timeout);dialog.setUsername(partner.username);dialog.setPassword(partner.password);var data=partner.s3CompatibleData;if(data){dialog.setEndPoint(data.endPoint);dialog.setRegion(data.region);}
dialog.setTags(partner.tags);}
return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.amazonS3Compatible(this.partner.name,dialog.getCompany(),dialog.getEmail(),dialog.getTimeout(),dialog.getUsername(),dialog.getPassword(),new jscape.S3CompatibleData(dialog.getEndPoint(),dialog.getRegion()),dialog.getTags());}});jscape.domain.AmazonS3CompatibleTradingPartnerDialog=jscape.domain.TradingPartnerDialog.extend({TIMEOUT_FACTOR:1000,initialize:function(dialog){this._super(dialog);this.endPoint=$("input[name=endpoint]",this.fieldset).textbox({required:true,validType:"url",width:"60%"});this.timeout=$("input[name=timeout]",this.fieldset).numberspinner({required:true,min:1,max:60,width:60});this.username=$("input[name=username]",this.fieldset).textbox({required:true,validType:"non_empty",width:"50%"});this.password=$("input[name=password]",this.fieldset).passwordbox2({width:"50%"});this.region=$("input[name=region]",this.fieldset).textbox({required:false,validType:"non_empty",width:"40%"});},getEndPoint:function(){return this.endPoint.textbox("getValue");},setEndPoint:function(value){this.endPoint.textbox("setValue",value);},getTimeout:function(){return this.timeout.numberspinner("getValue")*this.TIMEOUT_FACTOR;},setTimeout:function(value){this.timeout.numberspinner("setValue",parseInt(value)/this.TIMEOUT_FACTOR).numberspinner("validate");},getUsername:function(){return this.username.textbox("getValue");},setUsername:function(value){this.username.textbox("setValue",value);},getPassword:function(){return this.password.passwordbox2("getValue");},setPassword:function(value){this.password.passwordbox2("setValue",value);},getRegion:function(){return this.region.textbox("getValue");},setRegion:function(value){this.region.textbox("setValue",value);}});jscape.domain.AddAmazonS3CompatibleTradingPartnerDialog=jscape.domain.AmazonS3CompatibleTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-add-amazons3-compatible"));this.name=$("input[name=name]",this.fieldset).textbox({required:true,validType:["partner_name_nonempty","partner_unique"],missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_NAME,width:"60%"});},getName:function(){return this.name.textbox("getValue");}});jscape.domain.EditAmazonS3CompatibleTradingPartnerDialog=jscape.domain.AmazonS3CompatibleTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-edit-amazons3-compatible"));this.title=this.dialog.dialog("header").text()||"";},setName:function(value){this.dialog.dialog("setTitle",this.title.supplant({0:value}));}});jscape.domain.AddAmazonAwsTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({onSubmit:function(dialog){return this.listener.onAddTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.AddAmazonAwsTradingPartnerDialog();dialog.setTimeout(30*1000);dialog.setRegion("us-west-2");return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.amazonAws(dialog.getName(),dialog.getCompany(),dialog.getEmail(),dialog.getTimeout(),dialog.getUsername(),dialog.getPassword(),new jscape.AmazonAwsData(dialog.getAuthenticationType(),dialog.getRegion()),dialog.getTags());}});jscape.domain.EditAmazonAwsTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({start:function(listener,domainName,partner){this.partner=partner;return this._super(listener,domainName);},onSubmit:function(dialog){return this.listener.onEditTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.EditAmazonAwsTradingPartnerDialog();var partner=this.partner;if(partner){dialog.setName(partner.name);dialog.setCompany(partner.company);dialog.setEmail(partner.email);dialog.setTimeout(partner.timeout);dialog.setUsername(partner.username);dialog.setPassword(partner.password);if(partner.amazonAwsData){var data=partner.amazonAwsData;dialog.setAuthenticationType(data.authenticationType);dialog.setRegion(data.region);}
dialog.setTags(partner.tags);}
return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.amazonAws(this.partner.name,dialog.getCompany(),dialog.getEmail(),dialog.getTimeout(),dialog.getUsername(),dialog.getPassword(),new jscape.AmazonAwsData(dialog.getAuthenticationType(),dialog.getRegion()),dialog.getTags());}});jscape.domain.AmazonAwsTradingPartnerDialog=jscape.domain.TradingPartnerDialog.extend({TIMEOUT_FACTOR:1000,initialize:function(dialog){this._super(dialog);this.timeout=$("input[name=timeout]",this.fieldset).numberspinner({required:true,min:1,max:60,width:60});this.authentication=$("input[name=authentication]:radio",this.fieldset);this.useCredentials=this.authentication.filter("[value=CREDENTIALS]");this.username=$("input[name=username]",this.fieldset).textbox({required:true,validType:"non_empty",width:"50%"});this.password=$("input[name=password]",this.fieldset).passwordbox2({width:"50%"});this.authentication.change($.proxy(function(){var enabled=this.isUseCredentials();this.username.textbox(enabled?"enable":"disable").textbox("isValid");this.password.passwordbox2(enabled?"enable":"disable");},this)).first().prop("checked",true).end().change();this.region=$("select[name=region]",this.fieldset).combobox({required:true,editable:false,width:"40%"});},getTimeout:function(){return this.timeout.numberspinner("getValue")*this.TIMEOUT_FACTOR;},setTimeout:function(value){this.timeout.numberspinner("setValue",parseInt(value)/this.TIMEOUT_FACTOR).numberspinner("validate");},isUseCredentials:function(){return this.useCredentials.is(":checked");},getUsername:function(){return this.isUseCredentials()?this.username.textbox("getValue"):null;},setUsername:function(value){this.username.textbox("setValue",value);if(!!value){this.username.textbox("setValue",value);this.useCredentials.prop("checked",true).change();}},getPassword:function(){return this.isUseCredentials()?this.password.passwordbox2("getValue"):null;},setPassword:function(value){this.password.passwordbox2("setValue",value);},getAuthenticationType:function(){return this.authentication.filter(":checked").val();},setAuthenticationType:function(value){this.authentication.filter("[value="+value+"]").prop("checked",true).change();},getRegion:function(){return this.region.combobox("getValue");},setRegion:function(value){this.region.combobox("select",value);}});jscape.domain.AddAmazonAwsTradingPartnerDialog=jscape.domain.AmazonAwsTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-add-amazonaws"));this.name=$("input[name=name]",this.fieldset).textbox({required:true,validType:["partner_name_nonempty","partner_unique"],missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_NAME,width:"60%"});},getName:function(){return this.name.textbox("getValue");}});jscape.domain.EditAmazonAwsTradingPartnerDialog=jscape.domain.AmazonAwsTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-edit-amazonaws"));this.title=this.dialog.dialog("header").text()||"";},setName:function(value){this.dialog.dialog("setTitle",this.title.supplant({0:value}));}});jscape.domain.AddAs2TradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({serverKeys:null,onSigningKeyChanged:function(keyAlias,dialog){for(var i=0;i<this.serverKeys.length;i++){var key=this.serverKeys[i];if(keyAlias==key.name){var keyAlgorithm=key.keyAlgorithm;var algorithms=jscape.SignatureAlgorithm.filter(function(entry){return entry.asymmetricalAlgorithm==keyAlgorithm;});dialog.setSignatureAlgorithms($.map(algorithms,function(entry){return entry.hashAlgorithm;}));break;}}},onSubmit:function(dialog){return this.listener.onAddTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.AddAs2TradingPartnerDialog();dialog.setTimeout(30*1000);dialog.setReceiptAwaitingTimeout(5*60*1000);dialog.setSignatureAlgorithms($.map(jscape.SignatureAlgorithm.values(),function(entry){return entry.hashAlgorithm;}));dialog.setReceiptHttpsRequired(true);dialog.setReceiptSignatureRequired(true);this._loadHostKeys(dialog);return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.as2(dialog.getName(),dialog.getCompany(),dialog.getEmail(),dialog.getUrl(),dialog.getTimeout(),dialog.getProxyType()!=null?new jscape.ProxyData(dialog.getProxyType(),dialog.getProxyHost(),dialog.getProxyPort(),dialog.getProxyUsername(),dialog.getProxyPassword()):null,dialog.getUsername(),dialog.getPassword(),this.clientKeyProvider,this._serverKeyProviderFor(dialog.getHostKey()),new jscape.As2Data(dialog.getSender(),dialog.getRecipient(),dialog.getFromAddress(),dialog.getReceiptType(),dialog.isReceiptHttpsRequired(),dialog.isReceiptSignatureRequired(),dialog.getReceiptAwaitingTimeout(),this._serverKeyProviderFor(dialog.getEncryptionKey()),dialog.getEncryptionAlgorithm(),this._serverKeyProviderFor(dialog.getSigningKey()),dialog.getSignatureAlgorithm(),dialog.isUseCompression()),dialog.getTags());},_loadHostKeys:function(dialog){$.when(jscape.API.getHostCertificates(this.domainName),jscape.API.getServerKeys(this.domainName)).done($.proxy(function(hostCertificates,serverKeys){this.serverKeys=serverKeys;hostCertificates=$.map(hostCertificates,function(certificate){return certificate.name;});dialog.setHostKeys(hostCertificates);dialog.setEncryptionKeys(hostCertificates);dialog.setSigningKeys(serverKeys);},this));},_serverKeyProviderFor:function(keyAlias){return keyAlias!=null?new jscape.ServerKeyProvider(keyAlias):null;}});jscape.domain.EditAs2TradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({serverKeys:null,start:function(listener,domainName,partner){this.serverKeys=[];this.partner=partner;return this._super(listener,domainName,partner.keyProvider);},onSigningKeyChanged:function(keyAlias,dialog){for(var i=0;i<this.serverKeys.length;i++){var key=this.serverKeys[i];if(keyAlias==key.name){var keyAlgorithm=key.keyAlgorithm;var algorithms=jscape.SignatureAlgorithm.filter(function(entry){return entry.asymmetricalAlgorithm==keyAlgorithm;});dialog.setSignatureAlgorithms($.map(algorithms,function(entry){return entry.hashAlgorithm;}));break;}}},onSubmit:function(dialog){return this.listener.onEditTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.EditAs2TradingPartnerDialog();dialog.setSignatureAlgorithms($.map(jscape.SignatureAlgorithm.values(),function(entry){return entry.hashAlgorithm;}));var partner=this.partner;if(partner){dialog.setName(partner.name);dialog.setCompany(partner.company);dialog.setEmail(partner.email);dialog.setUrl(partner.url);dialog.setTimeout(partner.timeout);var proxy=partner.proxyData;if(proxy){dialog.setProxyType(proxy.type);dialog.setProxyHost(proxy.host);dialog.setProxyPort(proxy.port);dialog.setProxyUsername(proxy.username);dialog.setProxyPassword(proxy.password);}
dialog.setUsername(partner.username);dialog.setPassword(partner.password);if(partner.as2Data){dialog.setSender(partner.as2Data.sender);dialog.setRecipient(partner.as2Data.recipient);dialog.setFromAddress(partner.as2Data.fromAddress);dialog.setReceiptType(partner.as2Data.receiptType);dialog.setReceiptHttpsRequired(partner.as2Data.receiptHttpsRequired);dialog.setReceiptSignatureRequired(partner.as2Data.receiptSignatureRequired);dialog.setReceiptAwaitingTimeout(partner.as2Data.receiptAwaitingTimeout);dialog.setUseCompression(partner.as2Data.compressionRequired);}
dialog.setTags(partner.tags);}
this._loadHostKeys(dialog);return dialog;},_loadHostKeys:function(dialog){var partner=this.partner;var data=partner.as2Data;return $.when(jscape.API.getHostCertificates(this.domainName),jscape.API.getServerKeys(this.domainName)).done($.proxy(function(hostCertificates,serverKeys){this.serverKeys=serverKeys;hostCertificates=$.map(hostCertificates,function(certificate){return certificate.name;});dialog.setHostKeys(hostCertificates);dialog.setHostKey(this._serverKeyProviderAlias(partner.hostKeyProvider));dialog.setEncryptionKeys(hostCertificates);if(data){dialog.setEncryptionKey(this._serverKeyProviderAlias(data.encryptionKeyProvider));dialog.setEncryptionAlgorithm(data.encryptionAlgorithm);}
dialog.setSigningKeys(serverKeys);if(data){dialog.setSigningKey(this._serverKeyProviderAlias(data.signingKeyProvider));dialog.setSignatureAlgorithm(data.signatureAlgorithm);}},this));},_createPartner:function(dialog){return jscape.TradingPartner.as2(this.partner.name,dialog.getCompany(),dialog.getEmail(),dialog.getUrl(),dialog.getTimeout(),dialog.getProxyType()!=null?new jscape.ProxyData(dialog.getProxyType(),dialog.getProxyHost(),dialog.getProxyPort(),dialog.getProxyUsername(),dialog.getProxyPassword()):null,dialog.getUsername(),dialog.getPassword(),this.clientKeyProvider,this._serverKeyProviderFor(dialog.getHostKey()),new jscape.As2Data(dialog.getSender(),dialog.getRecipient(),dialog.getFromAddress(),dialog.getReceiptType(),dialog.isReceiptHttpsRequired(),dialog.isReceiptSignatureRequired(),dialog.getReceiptAwaitingTimeout(),this._serverKeyProviderFor(dialog.getEncryptionKey()),dialog.getEncryptionAlgorithm(),this._serverKeyProviderFor(dialog.getSigningKey()),dialog.getSignatureAlgorithm(),dialog.isUseCompression()),dialog.getTags());},_serverKeyProviderFor:function(keyAlias){return keyAlias!=null?new jscape.ServerKeyProvider(keyAlias):null;},_serverKeyProviderAlias:function(keyProvider){return keyProvider&&keyProvider.keyAlias?keyProvider.keyAlias:null;}});jscape.domain.As2TradingPartnerDialog=jscape.domain.TradingPartnerDialog.extend({TIMEOUT_FACTOR:1000,RECEIPT_TIMEOUT_FACTOR:60*1000,initialize:function(dialog){this._super(dialog);this.url=$("input[name=url]",this.fieldset).textbox({required:true,validType:"partner_url",missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_URL,width:"60%"});this.timeout=$("input[name=timeout]",this.fieldset).numberspinner({required:true,min:1,max:60,width:60});this.username=$("input[name=username]",this.fieldset).textbox({width:"50%"});this.password=$("input[name=password]",this.fieldset).passwordbox2({width:"50%"});this.useHostKey=$("input[name=usehostkey]:checkbox",this.fieldset).prop("disabled",true);this.useHostKey.change($.proxy(function(){this.hostKey.combobox(this.useHostKey.is(":checked")?"enable":"disable");},this));this.hostKey=$("select[name=hostkey]",this.fieldset);this.hostKey.combobox({editable:false,disabled:true,width:170,panelHeight:"auto",panelMaxHeight:150,onLoadSuccess:$.proxy(function(data){this.useHostKey.prop("disabled",data.length==0);if(data.length!=0){this.hostKey.combobox("setValue",data[0].value);}},this)});this.clientKeyButton=$("a[role=button][name=selectclientkey]",this.fieldset).linkbutton({onClick:$.proxy(this._onClick$ClientKeyButton,this)});this.sender=$("input[name=sender]",this.fieldset).textbox({required:true,validType:"partner_sender",missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_SENDER,width:"50%"});this.recipient=$("input[name=recipient]",this.fieldset).textbox({required:true,validType:"partner_recipient",missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_RECIPIENT,width:"50%"});this.fromAddress=$("input[name=from]",this.fieldset).textbox({required:false,validType:"email",width:"50%"});this.receiptType=$("select[name=receipt]",this.fieldset);this.receiptType.combobox({required:true,editable:false,onChange:$.proxy(function(){var enabled="ASYNCHRONOUS"==this.receiptType.combobox("getValue");this.receiptHttpsRequired.prop("disabled",!enabled);},this),width:170,panelHeight:"auto",panelMaxHeight:150});this.receiptHttpsRequired=$("input[name=usereceiptssl]:checkbox",this.fieldset).prop("disabled",true);this.receiptSignatureRequired=$("input[name=usereceiptsignature]:checkbox",this.fieldset);this.receipTimeout=$("input[name=receiptimeout]",this.fieldset).numberspinner({required:true,min:1,max:1000,width:90});this.useEncryptKey=$("input[name=useencryptkey]:checkbox",this.fieldset);this.useEncryptKey.change($.proxy(function(){var enabled=this.useEncryptKey.is(":checked");this.encryptKey.combobox(enabled?"enable":"disable");this.encryptAlgorithm.combobox(enabled?"enable":"disable");},this));this.encryptKey=$("select[name=encryptkey]",this.fieldset);this.encryptKey.combobox({editable:false,disabled:true,onLoadSuccess:$.proxy(function(data){if(data.length!=0){this.encryptKey.combobox("select",data[0].value);}else{this.useEncryptKey.prop("disabled",true).prop("checked",false);}
this.useEncryptKey.change();},this),width:170,panelHeight:"auto",panelMaxHeight:150});this.encryptAlgorithm=$("select[name=encryptalgorithm]",this.fieldset).combobox({editable:false,width:170,panelHeight:"auto",panelMaxHeight:150});this.useSignKey=$("input[name=usesigningkey]:checkbox",this.fieldset);this.useSignKey.change($.proxy(function(){var enabled=this.useSignKey.is(":checked");this.signKey.combobox(enabled?"enable":"disable");this.signatureAlgorithm.combobox(enabled?"enable":"disable");},this));this.signKey=$("select[name=signingkey]",this.fieldset);this.signKey.combobox({editable:false,disabled:true,textField:"name",valueField:"name",onChange:$.proxy(this._onChange$SigningKey,this),width:170,panelHeight:"auto",panelMaxHeight:150});this.signatureAlgorithm=$("select[name=signalgorithm]",this.fieldset).combobox({editable:false,disabled:true,width:170,panelHeight:"auto",panelMaxHeight:150});this.useCompression=$("input[name=usecompression]:checkbox",this.fieldset);},getUrl:function(){return this.url.textbox("getValue");},setUrl:function(value){this.url.textbox("setValue",value);},getTimeout:function(){return this.timeout.numberspinner("getValue")*this.TIMEOUT_FACTOR;},setTimeout:function(value){this.timeout.numberspinner("setValue",parseInt(value)/this.TIMEOUT_FACTOR);},getUsername:function(){return this.username.textbox("getValue");},setUsername:function(value){this.username.textbox("setValue",value);},getPassword:function(){return this.password.passwordbox2("getValue");},setPassword:function(value){this.password.passwordbox2("setValue",value);},getHostKey:function(){return this.useHostKey.is(":checked")?this.hostKey.combobox("getValue"):null;},setHostKey:function(value){this.useHostKey.prop("checked",value!=null).change();if(value!=null){this.hostKey.combobox("setValue",value);}},setHostKeys:function(values){this.hostKey.combobox("loadData",values);},getSender:function(){return this.sender.textbox("getValue");},setSender:function(value){this.sender.textbox("setValue",value);},getRecipient:function(){return this.recipient.textbox("getValue");},setRecipient:function(value){this.recipient.textbox("setValue",value);},getFromAddress:function(){return this.fromAddress.textbox("getValue");},setFromAddress:function(value){this.fromAddress.textbox("setValue",value);},getReceiptType:function(){return this.receiptType.combobox("getValue");},setReceiptType:function(value){this.receiptType.combobox("setValue",value);},isReceiptHttpsRequired:function(){return this.receiptHttpsRequired.is(":checked:not(:disabled)");},setReceiptHttpsRequired:function(value){this.receiptHttpsRequired.prop("checked",!!value);},isReceiptSignatureRequired:function(){return this.receiptSignatureRequired.is(":checked");},setReceiptSignatureRequired:function(value){this.receiptSignatureRequired.prop("checked",!!value);},getReceiptAwaitingTimeout:function(){return this.receipTimeout.numberspinner("getValue")*this.RECEIPT_TIMEOUT_FACTOR;},setReceiptAwaitingTimeout:function(value){this.receipTimeout.numberspinner("setValue",parseInt(value)/this.RECEIPT_TIMEOUT_FACTOR);},getEncryptionKey:function(){return this.useEncryptKey.is(":checked")?this.encryptKey.combobox("getValue"):null;},setEncryptionKey:function(value){this.useEncryptKey.prop("checked",value!=null).change();if(value!=null){this.encryptKey.combobox("select",value);}},setEncryptionKeys:function(values){this.encryptKey.combobox("loadData",values);},getEncryptionAlgorithm:function(){return this.encryptAlgorithm.combobox("getValue");},setEncryptionAlgorithm:function(value){this.encryptAlgorithm.combobox("setValue",value);},getSigningKey:function(){return this.useSignKey.is(":checked")?this.signKey.combobox("getValue"):null;},setSigningKey:function(value){this.useSignKey.prop("checked",value!=null).change();if(value!=null){this.signKey.combobox("setValue",value);}},setSigningKeys:function(values){this.signKey.combobox("loadData",values);if(values.length==0){this.useSignKey.prop("disabled",true).prop("checked",false).change();}},getSignatureAlgorithm:function(){return this.signatureAlgorithm.combobox("getValue");},setSignatureAlgorithm:function(value){this.signatureAlgorithm.combobox("reset").combobox("select",value);},setSignatureAlgorithms:function(values){this.signatureAlgorithm.combobox("reset").combobox("loadData",values);},isUseCompression:function(){return this.useCompression.is(":checked");},setUseCompression:function(value){this.useCompression.prop("checked",!!value);},show:function(listener){return this._super(listener||jscape.domain.As2TradingPartnerDialog.LISTENER);},_onChange$SigningKey:function(){this.listener.onSigningKeyChanged(this.signKey.combobox("getValue"),this);},_onClick$ClientKeyButton:function(){this.listener.onSelectClientKey().done($.proxy(this._onForm$Change,this));}});jscape.domain.As2TradingPartnerDialog.LISTENER=$.extend({onSelectClientKey:$.noop,onSigningKeyChanged:$.noop},jscape.domain.TradingPartnerDialog.LISTENER);jscape.domain.AddAs2TradingPartnerDialog=jscape.domain.As2TradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-add-as2"));this.name=$("input[name=name]",this.fieldset).textbox({required:true,validType:["partner_name_nonempty","partner_unique"],missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_NAME,width:"60%"});},getName:function(){return this.name.textbox("getValue");}});jscape.domain.EditAs2TradingPartnerDialog=jscape.domain.As2TradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-edit-as2"));this.title=this.dialog.dialog("header").text()||"";},setName:function(value){this.dialog.dialog("setTitle",this.title.supplant({0:value}));}});jscape.domain.AddFtpTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({onSubmit:function(dialog){return this.listener.onAddTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.AddFtpTradingPartnerDialog();dialog.setPort(21);dialog.setTimeout(30*1000);dialog.setTcpNoDelay(true);return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.ftp(dialog.getName(),dialog.getCompany(),dialog.getEmail(),dialog.getHost(),dialog.getPort(),dialog.getTimeout(),dialog.getProxyType()!=null?new jscape.ProxyData(dialog.getProxyType(),dialog.getProxyHost(),dialog.getProxyPort(),dialog.getProxyUsername(),dialog.getProxyPassword()):null,dialog.getTcpNoDelay(),dialog.getUsername(),dialog.getPassword(),new jscape.FtpData(dialog.getPostLoginCommand(),dialog.isPassiveModeRequired(),dialog.isEpsvCommandAllowed()),dialog.getTags());}});jscape.domain.EditFtpTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({start:function(listener,domainName,partner){this.partner=partner;return this._super(listener,domainName,partner.keyProvider);},onSubmit:function(dialog){return this.listener.onEditTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.EditFtpTradingPartnerDialog();var partner=this.partner;if(partner){dialog.setName(partner.name);dialog.setCompany(partner.company);dialog.setEmail(partner.email);dialog.setHost(partner.host);dialog.setPort(partner.port);dialog.setTimeout(partner.timeout);var proxy=partner.proxyData;if(proxy){dialog.setProxyType(proxy.type);dialog.setProxyHost(proxy.host);dialog.setProxyPort(proxy.port);dialog.setProxyUsername(proxy.username);dialog.setProxyPassword(proxy.password);}
dialog.setTcpNoDelay(partner.tcpNoDelayEnabled);dialog.setUsername(partner.username);dialog.setPassword(partner.password);if(partner.ftpData){dialog.setPostLoginCommand(partner.ftpData.postLoginCommand);dialog.setPassiveModeRequired(partner.ftpData.passiveTransferModeRequired);dialog.setEpsvCommandAllowed(partner.ftpData.epsvCommandAllowed);}
dialog.setTags(partner.tags);}
return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.ftp(this.partner.name,dialog.getCompany(),dialog.getEmail(),dialog.getHost(),dialog.getPort(),dialog.getTimeout(),dialog.getProxyType()!=null?new jscape.ProxyData(dialog.getProxyType(),dialog.getProxyHost(),dialog.getProxyPort(),dialog.getProxyUsername(),dialog.getProxyPassword()):null,dialog.getTcpNoDelay(),dialog.getUsername(),dialog.getPassword(),new jscape.FtpData(dialog.getPostLoginCommand(),dialog.isPassiveModeRequired(),dialog.isEpsvCommandAllowed()),dialog.getTags());}});jscape.domain.FtpTradingPartnerDialog=jscape.domain.TradingPartnerDialog.extend({TIMEOUT_FACTOR:1000,initialize:function(dialog){this._super(dialog);this.host=$("input[name=host]",this.fieldset).textbox({required:true,validType:"partner_host_nonempty",missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_HOST,width:"60%"});this.port=$("input[name=port]",this.fieldset).numberspinner({required:true,min:1,max:65535,width:100});this.timeout=$("input[name=timeout]",this.fieldset).numberspinner({required:true,min:1,max:60,width:60});this.tcpNoDelay=$("input[name=tcpnodelay]:checkbox",this.fieldset);this.username=$("input[name=username]",this.fieldset).textbox({width:"50%"});this.password=$("input[name=password]",this.fieldset).passwordbox2({width:"50%"});this.postLoginCommand=$("input[name=postlogincmd]",this.fieldset).textbox({width:"60%"});this.passiveMode=$("input[name=passivemode]:checkbox",this.fieldset);this.epsvEnabled=$("input[name=useepsv]:checkbox",this.fieldset);},getHost:function(){return this.host.textbox("getValue");},setHost:function(value){this.host.textbox("setValue",value);},getPort:function(){return this.port.numberspinner("getValue");},setPort:function(value){this.port.numberspinner("setValue",value);},getTimeout:function(){return this.timeout.numberspinner("getValue")*this.TIMEOUT_FACTOR;},setTimeout:function(value){this.timeout.numberspinner("setValue",parseInt(value)/this.TIMEOUT_FACTOR);},getTcpNoDelay:function(){return this.tcpNoDelay.is(":checked");},setTcpNoDelay:function(value){this.tcpNoDelay.prop("checked",!!value);},getUsername:function(){return this.username.textbox("getValue");},setUsername:function(value){this.username.textbox("setValue",value);},getPassword:function(){return this.password.passwordbox2("getValue");},setPassword:function(value){this.password.passwordbox2("setValue",value);},getPostLoginCommand:function(){return this.postLoginCommand.textbox("getValue");},setPostLoginCommand:function(value){this.postLoginCommand.textbox("setValue",value);},isPassiveModeRequired:function(){return this.passiveMode.is(":checked");},setPassiveModeRequired:function(value){this.passiveMode.prop("checked",!!value);},isEpsvCommandAllowed:function(){return this.epsvEnabled.is(":checked");},setEpsvCommandAllowed:function(value){this.epsvEnabled.prop("checked",!!value);}});jscape.domain.AddFtpTradingPartnerDialog=jscape.domain.FtpTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-add-ftp"));this.name=$("input[name=name]",this.fieldset).textbox({required:true,validType:["partner_name_nonempty","partner_unique"],missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_NAME,width:"60%"});},getName:function(){return this.name.textbox("getValue");}});jscape.domain.EditFtpTradingPartnerDialog=jscape.domain.FtpTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-edit-ftp"));this.title=this.dialog.dialog("header").text()||"";},setName:function(value){this.dialog.dialog("setTitle",this.title.supplant({0:value}));}});jscape.domain.AddFtpsImplicitTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({onSubmit:function(dialog){return this.listener.onAddTradingPartner(this._createPartner(dialog));},onSelectClientKey:function(){return this._super(false,true);},_setupDialog:function(){var dialog=new jscape.domain.AddFtpsTradingPartnerDialog();dialog.setPort(990);dialog.setTimeout(30*1000);dialog.setTcpNoDelay(true);this._loadHostKeys().done(function(keys){dialog.setHostKeys(keys);});return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.ftpsImplicit(dialog.getName(),dialog.getCompany(),dialog.getEmail(),dialog.getHost(),dialog.getPort(),dialog.getTimeout(),dialog.getProxyType()!=null?new jscape.ProxyData(dialog.getProxyType(),dialog.getProxyHost(),dialog.getProxyPort(),dialog.getProxyUsername(),dialog.getProxyPassword()):null,dialog.getTcpNoDelay(),dialog.getUsername(),dialog.getPassword(),this.clientKeyProvider,dialog.getHostKey()!=null?new jscape.ServerKeyProvider(dialog.getHostKey()):null,new jscape.FtpData(dialog.getPostLoginCommand(),dialog.isPassiveModeRequired(),dialog.isEpsvCommandAllowed()),dialog.getTags());}});jscape.domain.EditFtpsImplicitTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({start:function(listener,domainName,partner){this.partner=partner;return this._super(listener,domainName,partner.keyProvider);},onSubmit:function(dialog){return this.listener.onEditTradingPartner(this._createPartner(dialog));},onSelectClientKey:function(){return this._super(false,true);},_setupDialog:function(){var dialog=new jscape.domain.EditFtpsTradingPartnerDialog();var partner=this.partner;if(partner){dialog.setName(partner.name);dialog.setCompany(partner.company);dialog.setEmail(partner.email);dialog.setHost(partner.host);dialog.setPort(partner.port);dialog.setTimeout(partner.timeout);var proxy=partner.proxyData;if(proxy){dialog.setProxyType(proxy.type);dialog.setProxyHost(proxy.host);dialog.setProxyPort(proxy.port);dialog.setProxyUsername(proxy.username);dialog.setProxyPassword(proxy.password);}
dialog.setTcpNoDelay(partner.tcpNoDelayEnabled);dialog.setUsername(partner.username);dialog.setPassword(partner.password);if(partner.ftpData){dialog.setPostLoginCommand(partner.ftpData.postLoginCommand);dialog.setPassiveModeRequired(partner.ftpData.passiveTransferModeRequired);dialog.setEpsvCommandAllowed(partner.ftpData.epsvCommandAllowed);}
dialog.setTags(partner.tags);}
this._loadHostKeys().done(function(keys){dialog.setHostKeys(keys);partner&&dialog.setHostKey(partner.hostKeyProvider?partner.hostKeyProvider.keyAlias:null);});return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.ftpsImplicit(this.partner.name,dialog.getCompany(),dialog.getEmail(),dialog.getHost(),dialog.getPort(),dialog.getTimeout(),dialog.getProxyType()!=null?new jscape.ProxyData(dialog.getProxyType(),dialog.getProxyHost(),dialog.getProxyPort(),dialog.getProxyUsername(),dialog.getProxyPassword()):null,dialog.getTcpNoDelay(),dialog.getUsername(),dialog.getPassword(),this.clientKeyProvider,dialog.getHostKey()!=null?new jscape.ServerKeyProvider(dialog.getHostKey()):null,new jscape.FtpData(dialog.getPostLoginCommand(),dialog.isPassiveModeRequired(),dialog.isEpsvCommandAllowed()),dialog.getTags());}});jscape.domain.AddFtpsExplicitTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({onSubmit:function(dialog){return this.listener.onAddTradingPartner(this._createPartner(dialog));},onSelectClientKey:function(){return this._super(false,true);},_setupDialog:function(){var dialog=new jscape.domain.AddFtpsTradingPartnerDialog();dialog.setPort(21);dialog.setTimeout(30*1000);dialog.setTcpNoDelay(true);this._loadHostKeys().done(function(keys){dialog.setHostKeys(keys);});return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.ftpsExplicit(dialog.getName(),dialog.getCompany(),dialog.getEmail(),dialog.getHost(),dialog.getPort(),dialog.getTimeout(),dialog.getProxyType()!=null?new jscape.ProxyData(dialog.getProxyType(),dialog.getProxyHost(),dialog.getProxyPort(),dialog.getProxyUsername(),dialog.getProxyPassword()):null,dialog.getTcpNoDelay(),dialog.getUsername(),dialog.getPassword(),this.clientKeyProvider,dialog.getHostKey()!=null?new jscape.ServerKeyProvider(dialog.getHostKey()):null,new jscape.FtpData(dialog.getPostLoginCommand(),dialog.isPassiveModeRequired(),dialog.isEpsvCommandAllowed()),dialog.getTags());}});jscape.domain.EditFtpsExplicitTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({start:function(listener,domainName,partner){this.partner=partner;return this._super(listener,domainName,partner.keyProvider);},onSubmit:function(dialog){return this.listener.onEditTradingPartner(this._createPartner(dialog));},onSelectClientKey:function(){return this._super(false,true);},_setupDialog:function(){var dialog=new jscape.domain.EditFtpsTradingPartnerDialog();var partner=this.partner;if(partner){dialog.setName(partner.name);dialog.setCompany(partner.company);dialog.setEmail(partner.email);dialog.setHost(partner.host);dialog.setPort(partner.port);dialog.setTimeout(partner.timeout);var proxy=partner.proxyData;if(proxy){dialog.setProxyType(proxy.type);dialog.setProxyHost(proxy.host);dialog.setProxyPort(proxy.port);dialog.setProxyUsername(proxy.username);dialog.setProxyPassword(proxy.password);}
dialog.setTcpNoDelay(partner.tcpNoDelayEnabled);dialog.setUsername(partner.username);dialog.setPassword(partner.password);if(partner.ftpData){dialog.setPostLoginCommand(partner.ftpData.postLoginCommand);dialog.setPassiveModeRequired(partner.ftpData.passiveTransferModeRequired);dialog.setEpsvCommandAllowed(partner.ftpData.epsvCommandAllowed);}
dialog.setTags(partner.tags);}
this._loadHostKeys().done(function(keys){dialog.setHostKeys(keys);partner&&dialog.setHostKey(partner.hostKeyProvider?partner.hostKeyProvider.keyAlias:null);});return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.ftpsExplicit(this.partner.name,dialog.getCompany(),dialog.getEmail(),dialog.getHost(),dialog.getPort(),dialog.getTimeout(),dialog.getProxyType()!=null?new jscape.ProxyData(dialog.getProxyType(),dialog.getProxyHost(),dialog.getProxyPort(),dialog.getProxyUsername(),dialog.getProxyPassword()):null,dialog.getTcpNoDelay(),dialog.getUsername(),dialog.getPassword(),this.clientKeyProvider,dialog.getHostKey()!=null?new jscape.ServerKeyProvider(dialog.getHostKey()):null,new jscape.FtpData(dialog.getPostLoginCommand(),dialog.isPassiveModeRequired(),dialog.isEpsvCommandAllowed()),dialog.getTags());}});jscape.domain.FtpsTradingPartnerDialog=jscape.domain.FtpTradingPartnerDialog.extend({TIMEOUT_FACTOR:1000,initialize:function(dialog){this._super(dialog);this.useHostKey=$("input[name=usehostkey]:checkbox",this.fieldset).prop("disabled",true);this.useHostKey.change($.proxy(function(){this.hostKey.combobox(this.useHostKey.is(":checked")?"enable":"disable");},this));this.hostKey=$("select[name=hostkey]",this.fieldset);this.hostKey.combobox({editable:false,disabled:true,onLoadSuccess:$.proxy(function(data){this.useHostKey.prop("disabled",data.length==0);if(data.length!=0){this.hostKey.combobox("select",data[0].value);}},this),width:170,panelHeight:"auto",panelMaxHeight:150});this.clientKeyButton=$("a[role=button][name=selectclientkey]",this.fieldset).linkbutton({onClick:$.proxy(this._onClick$ClientKeyButton,this)});},getHostKey:function(){return this.useHostKey.is(":checked")?this.hostKey.combobox("getValue"):null;},setHostKey:function(value){this.useHostKey.prop("checked",value!=null).change();if(value!=null){this.hostKey.combobox("setValue",value);}},setHostKeys:function(values){this.hostKey.combobox("loadData",values);},show:function(listener){return this._super(listener||jscape.domain.FtpsTradingPartnerDialog.LISTENER);},_onClick$ClientKeyButton:function(){this.listener.onSelectClientKey().done($.proxy(this._onForm$Change,this));}});jscape.domain.FtpsTradingPartnerDialog.LISTENER=$.extend({onSelectClientKey:$.noop},jscape.domain.TradingPartnerDialog.LISTENER);jscape.domain.AddFtpsTradingPartnerDialog=jscape.domain.FtpsTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-add-ftps"));this.name=$("input[name=name]",this.fieldset).textbox({required:true,validType:["partner_name_nonempty","partner_unique"],missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_NAME,width:"60%"});},getName:function(){return this.name.textbox("getValue");}});jscape.domain.EditFtpsTradingPartnerDialog=jscape.domain.FtpsTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-edit-ftps"));this.title=this.dialog.dialog("header").text()||"";},setName:function(value){this.dialog.dialog("setTitle",this.title.supplant({0:value}));}});jscape.domain.OftpTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({DEFAULT_PORT:3305,DEFAULT_TIMEOUT:30*1000,sslCertificateData:null,authenticationCertificateData:null,requestEncryptionCertificateData:null,requestSignatureVerificationCertificateData:null,receiptSignatureVerificationCertificateData:null,initialize:function(){this._super();this.specController=new jscape.domain.OftpTradingPartnerSpecController();},start:function(listener,domainName,oftpData){if(oftpData){oftpData=jscape.OftpPartnerData.fromJSON(oftpData);this.sslCertificateData=oftpData.sslCertificateData;this.authenticationCertificateData=oftpData.authenticationCertificateData;this.requestEncryptionCertificateData=oftpData.requestEncryptionCertificateData;this.requestSignatureVerificationCertificateData=oftpData.requestSignatureVerificationCertificateData;this.receiptSignatureVerificationCertificateData=oftpData.receiptSignatureVerificationCertificateData;}
return this._super(listener,domainName);},onSslCertificateSpec:function(){return this.specController.start(this.sslCertificateData.descriptor).done($.proxy(function(descriptor){this.sslCertificateData.descriptor=descriptor;},this));},onAuthenticationCertificateSpec:function(){return this.specController.start(this.authenticationCertificateData.descriptor).done($.proxy(function(descriptor){this.authenticationCertificateData.descriptor=descriptor;},this));},onFileEncryptionCertSpec:function(){return this.specController.start(this.requestEncryptionCertificateData.descriptor).done($.proxy(function(descriptor){this.requestEncryptionCertificateData.descriptor=descriptor;},this));},onFileSignatureCertSpec:function(){return this.specController.start(this.requestSignatureVerificationCertificateData.descriptor).done($.proxy(function(descriptor){this.requestSignatureVerificationCertificateData.descriptor=descriptor;},this));},onReceiptSignatureCertSpec:function(){return this.specController.start(this.receiptSignatureVerificationCertificateData.descriptor).done($.proxy(function(descriptor){this.receiptSignatureVerificationCertificateData.descriptor=descriptor;},this));},_createPartner:function(dialog){return jscape.TradingPartner.oftp(dialog.getName(),dialog.getCompany(),dialog.getEmail(),dialog.getHost(),dialog.getPort(),dialog.getTimeout(),dialog.getProxyType()!=null?new jscape.ProxyData(dialog.getProxyType(),dialog.getProxyHost(),dialog.getProxyPort(),dialog.getProxyUsername(),dialog.getProxyPassword()):null,dialog.getUsername(),dialog.getPassword(),new jscape.OftpPartnerData(dialog.getDestinationId(),new jscape.CertificateData(this.sslCertificateData.descriptor,dialog.getSslCertificate()),dialog.getSslKey(),new jscape.CertificateData(this.authenticationCertificateData.descriptor,dialog.getSecureAuthenticationCertificate()),dialog.getSecureAuthenticationKey(),new jscape.CertificateData(this.requestEncryptionCertificateData.descriptor,dialog.getRequestEncryptionCertificate()),dialog.getRequestDecryptionKey(),dialog.getRequestSigningKey(),new jscape.CertificateData(this.requestSignatureVerificationCertificateData.descriptor,dialog.getRequestSignatureVerificationCertificate()),dialog.getReceiptSigningKey(),new jscape.CertificateData(this.receiptSignatureVerificationCertificateData.descriptor,dialog.getReceiptSignatureVerificationCertificate()),dialog.getCipher(),dialog.isSslEnabled(),dialog.isUseSecureAuthentication(),dialog.isCompressionEnabled(),dialog.isUseEncryption(),dialog.isUseSigning(),dialog.isReceiptSignatureRequired(),dialog.isReceiptAutoGenerationAllowed(),dialog.isCertificateExchangeAllowed(),dialog.isRelayAllowed()),dialog.getTags());},_loadKeys:function(){return $.when(jscape.API.getHostCertificates(this.domainName),jscape.API.getClientCertificates(this.domainName),jscape.API.getServerKeys(this.domainName)).then(function(hostCertificates,clientCertificates,serverKeys){var hostCertificateNames=$.map(hostCertificates,function(cetrificate){return cetrificate.name;});var clientCertificateNames=$.map(clientCertificates,function(certificate){return certificate.name;});var serverKeyAliases=$.map(serverKeys,function(key){return key.name;});return $.Deferred().resolve(hostCertificateNames,clientCertificateNames,serverKeyAliases);});}});jscape.domain.AddOftpTradingPartnerController=jscape.domain.OftpTradingPartnerController.extend({partnerData:null,start:function(listener,domainName){return this._super(listener,domainName,new jscape.OftpPartnerData());},onSubmit:function(dialog){return this.listener.onAddTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.AddOftpTradingPartnerDialog();dialog.setPort(this.DEFAULT_PORT);dialog.setTimeout(this.DEFAULT_TIMEOUT);dialog.setReceiptAutoGenerationAllowed(true);this._loadKeys().done(function(hostCertificates,clientCertificates,serverKeys){dialog.setSslCertificates(hostCertificates);dialog.setSslKeys(serverKeys);dialog.setSecureAuthenticationCertificates(clientCertificates);dialog.setSecureAuthenticationKeys(serverKeys);dialog.setRequestEncryptionCertificates(clientCertificates);dialog.setRequestDecryptionKeys(serverKeys);dialog.setRequestSigningKeys(serverKeys);dialog.setRequestSignatureVerificationCertificates(clientCertificates);dialog.setReceiptSigningKeys(serverKeys);dialog.setReceiptSignatureVerificationCertificates(clientCertificates);});return dialog;}});jscape.domain.EditOftpTradingPartnerController=jscape.domain.OftpTradingPartnerController.extend({start:function(listener,domainName,partner){this.partner=partner;return this._super(listener,domainName,partner.oftpData);},onSubmit:function(dialog){return this.listener.onEditTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.EditOftpTradingPartnerDialog();var partner=this.partner;var oftpData=partner&&partner.oftpData?partner.oftpData:new jscape.OftpPartnerData();if(partner){dialog.setName(partner.name);dialog.setCompany(partner.company);dialog.setEmail(partner.email);dialog.setHost(partner.host);dialog.setPort(partner.port);dialog.setTimeout(partner.timeout);var proxy=partner.proxyData;if(proxy){dialog.setProxyType(proxy.type);dialog.setProxyHost(proxy.host);dialog.setProxyPort(proxy.port);dialog.setProxyUsername(proxy.username);dialog.setProxyPassword(proxy.password);}
dialog.setUsername(partner.username);dialog.setPassword(partner.password);dialog.setDestinationId(oftpData.destinationId);dialog.setCipher(oftpData.cipherSuite);dialog.setSslEnabled(oftpData.sslEnabled);dialog.setUseSecureAuthentication(oftpData.secureAuthenticationEnabled);dialog.setUseEncryption(oftpData.requestEncryptionEnabled);dialog.setUseSigning(oftpData.requestSigningEnabled);dialog.setCompressionEnabled(oftpData.requestCompressionEnabled);dialog.setReceiptSignatureRequired(oftpData.receiptSignatureRequired);dialog.setReceiptAutoGenerationAllowed(oftpData.automaticReceiptGenerationAllowed);dialog.setCertificateExchangeAllowed(oftpData.certificateExchangeAllowed);dialog.setRelayAllowed(oftpData.relayAllowed);dialog.setTags(partner.tags);}
this._loadKeys().done(function(hostCertificates,clientCertificates,serverKeys){dialog.setSslCertificates(hostCertificates);dialog.setSslCertificate(oftpData.sslCertificateData.aliases);dialog.setSslKeys(serverKeys);dialog.setSslKey(oftpData.sslKeyAlias);dialog.setSecureAuthenticationCertificates(clientCertificates);dialog.setSecureAuthenticationCertificate(oftpData.authenticationCertificateData.aliases);dialog.setSecureAuthenticationKeys(serverKeys);dialog.setSecureAuthenticationKey(oftpData.authenticationKeyAliases);dialog.setRequestEncryptionCertificates(clientCertificates);dialog.setRequestEncryptionCertificate(oftpData.requestEncryptionCertificateData.aliases);dialog.setRequestDecryptionKeys(serverKeys);dialog.setRequestDecryptionKey(oftpData.requestDecryptionKeyAliases);dialog.setRequestSigningKeys(serverKeys);dialog.setRequestSigningKey(oftpData.requestSigningKeyAlias);dialog.setRequestSignatureVerificationCertificates(clientCertificates);dialog.setRequestSignatureVerificationCertificate(oftpData.requestSignatureVerificationCertificateData.aliases);dialog.setReceiptSigningKeys(serverKeys);dialog.setReceiptSigningKey(oftpData.receiptSigningKeyAlias);dialog.setReceiptSignatureVerificationCertificates(clientCertificates);dialog.setReceiptSignatureVerificationCertificate(oftpData.receiptSignatureVerificationCertificateData.aliases);partner=null;oftpData=null;});return dialog;},_createPartner:function(dialog){var partner=this._super(dialog);partner.name=this.partner.name;return partner;}});jscape.domain.OftpTradingPartnerSpecController=Class.extend({deferred:null,start:function(data){this.deferred=$.Deferred();this._setupDialog(data).show(this);return this.deferred.promise();},onSubmit:function(dialog){var data=this._createData(dialog);return this.deferred.resolve(data);},onCancel:function(dialog){dialog.destroy();this.deferred.reject();this.deferred=null;},_createData:function(dialog){return new jscape.CertificateDescriptor(dialog.getIssuer(),dialog.getSubject(),dialog.getKeyUsage(),dialog.getExtendedKeyUsage());},_setupDialog:function(data){var dialog=new jscape.domain.OftpTradingPartnerSpecDialog();dialog.setIssuer(data.issuer);dialog.setSubject(data.subject);dialog.setKeyUsage(data.keyUsages);dialog.setExtendedKeyUsage(data.extendedKeyUsages);return dialog;}});jscape.domain.OftpTradingPartnerSpecDialog=jscape.ui.DefaultDialog.extend({initialize:function(){this._super($("#d-partner-oftp-spec"),{width:610,resizable:false});this.fieldset=$("fieldset[name=oftptradingpartnerspecfields]",this.dialog);this.issuer=$("input[name=issuer]",this.fieldset).textbox({width:"60%"});this.subject=$("input[name=subject]",this.fieldset).textbox({width:"60%"});this.keyUsage=$("select[name=keyusage]",this.fieldset).tagbox({limitToList:true,hasDownArrow:true,width:"60%",panelHeight:"auto",panelMaxHeight:150});this.extendedkeyUsage=$("select[name=extendedkeyusage]",this.fieldset).tagbox({limitToList:true,hasDownArrow:true,width:"60%",panelHeight:"auto",panelMaxHeight:150});},getIssuer:function(){return this.issuer.textbox("getValue");},setIssuer:function(value){this.issuer.textbox("setValue",value);},getSubject:function(){return this.subject.textbox("getValue");},setSubject:function(value){this.subject.textbox("setValue",value);},getKeyUsage:function(){return this.keyUsage.tagbox("getValues");},setKeyUsage:function(values){this.keyUsage.tagbox("setValues",values);},getExtendedKeyUsage:function(){return this.extendedkeyUsage.tagbox("getValues");},setExtendedKeyUsage:function(values){this.extendedkeyUsage.tagbox("setValues",values);}});jscape.domain.OftpTradingPartnerDialog=jscape.domain.TradingPartnerDialog.extend({TIMEOUT_FACTOR:1000,initialize:function(dialog){this._super(dialog);this.host=$("input[name=host]",this.fieldset).textbox({required:true,validType:"partner_host_nonempty",missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_HOST,width:"60%"});this.port=$("input[name=port]",this.fieldset).numberspinner({required:true,min:1,max:65535,width:100});this.timeout=$("input[name=timeout]",this.fieldset).numberspinner({required:true,min:1,max:1000,increment:10,width:60});this.username=$("input[name=username]",this.fieldset).textbox({width:"60%"});this.password=$("input[name=password]",this.fieldset).passwordbox2({width:"60%"});this.ssl=$("input[name=usessl]:checkbox",this.fieldset).switchbutton({checked:false,onChange:$.proxy(function(checked){this.sslCertEnabled.prop("disabled",!checked).change();this.sslKeyEnabled.prop("disabled",!checked).change();},this)});this.sslCertEnabled=$("input[name=sslcertenabled]:checkbox",this.fieldset).change($.proxy(function(){var enabled=this.sslCertEnabled.is(":checked:not(:disabled)");this.sslCert.combobox(enabled?"enable":"disable");this.sslCertSpecButton.linkbutton(enabled?"enable":"disable");},this));this.sslCert=$("select[name=sslcert]",this.fieldset).combobox({multiple:true,required:true,disabled:true,panelHeight:"auto",panelMaxHeight:150,width:"50%"});this.sslCertSpecButton=$("a[role=button][name=sslcertspecbutton]",this.fieldset).linkbutton({disabled:true,onClick:$.proxy(this._onClick$SslCertSpecButton,this)});this.sslKeyEnabled=$("input[name=sslkeyenabled]:checkbox",this.fieldset).change($.proxy(function(){this.sslKey.combobox(this.sslKeyEnabled.is(":checked:not(:disabled)")?"enable":"disable");},this));this.sslKey=$("select[name=sslkey]",this.fieldset).combobox({multiple:false,required:true,disabled:true,width:"50%",panelHeight:"auto",panelMaxHeight:150});this.destinationId=$("input[name=destinationid]",this.fieldset).textbox({required:true,missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_RECIPIENT,width:"50%"});this.secureAuth=$("input[name=secureauth]:checkbox",this.fieldset).switchbutton({checked:false,onChange:$.proxy(function(checked){this.authCert.tagbox(checked?"enable":"disable");this.authCertSpecButton.linkbutton(checked?"enable":"disable");this.authKey.tagbox(checked?"enable":"disable");},this)});this.authCert=$("select[name=authcert]",this.fieldset).tagbox({limitToList:true,disabled:true,hasDownArrow:true,width:"50%",panelHeight:"auto",panelMaxHeight:150});this.authCertSpecButton=$("a[role=button][name=authcertspecbutton]",this.fieldset).linkbutton({disabled:true,onClick:$.proxy(this._onClick$AuthCertSpecButton,this)});this.authKey=$("select[name=authkey]",this.fieldset).tagbox({limitToList:true,disabled:true,hasDownArrow:true,panelHeight:"auto",panelMaxHeight:150,width:"50%"});this.fileSignatureVerification=$("input[name=filesignatureverification]:checkbox",this.fieldset).change($.proxy(function(){var enabled=this.fileSignatureVerification.is(":checked");this.fileSignatureVerificationCert.tagbox(enabled?"enable":"disable");this.fileSignatureVerificationCertSpecButton.linkbutton(enabled?"enable":"disable");},this));this.fileSignatureVerificationCert=$("select[name=filesignatureverificationcert]",this.fieldset).tagbox({limitToList:true,required:true,disabled:true,hasDownArrow:true,panelHeight:"auto",panelMaxHeight:150,width:"30%"});this.fileSignatureVerificationCertSpecButton=$("a[role=button][name=filesignatureverificationcertspecbutton]",this.fieldset).linkbutton({disabled:true,onClick:$.proxy(this._onClick$FileSignatureVerificationCertSpecButton,this)});this.fileSigning=$("input[name=filesigning]:checkbox",this.fieldset).change($.proxy(function(){var enabled=this.fileSigning.is(":checked:not(:disabled)");this.fileSignKey.combobox(enabled?"enable":"disable");},this));this.fileSignKey=$("select[name=filesignkey]",this.fieldset).combobox({multiple:false,required:true,disabled:true,panelHeight:"auto",panelMaxHeight:150,width:"30%"});this.receiptSignatureRequired=$("input[name=receiptsignaturerequire]:checkbox",this.fieldset).change($.proxy(function(){var enabled=this.receiptSignatureRequired.is(":checked:not(:disabled)");this.receiptSignatureVerificationCert.tagbox(enabled?"enable":"disable");this.receiptSignatureVerificationCertSpecButton.linkbutton(enabled?"enable":"disable");},this));this.receiptSignatureVerificationCert=$("select[name=receiptsignatureverificationcert]",this.fieldset).tagbox({limitToList:true,required:true,disabled:true,hasDownArrow:true,panelHeight:"auto",panelMaxHeight:150,width:"30%"});this.receiptSignatureVerificationCertSpecButton=$("a[role=button][name=receiptsignatureverificationcertspecbutton]",this.fieldset).linkbutton({disabled:true,onClick:$.proxy(this._onClick$ReceiptSignatureVerificationCertSpecButton,this)});this.receiptSignKeyEnabled=$("input[name=receiptsignkeyenabled]:checkbox",this.fieldset).change($.proxy(function(){this.receiptSignKey.combobox(this.receiptSignKeyEnabled.is(":checked")?"enable":"disable");},this));this.receiptSignKey=$("select[name=receiptsignkey]",this.fieldset).combobox({multiple:false,required:true,disabled:true,width:"30%",panelHeight:"auto",panelMaxHeight:150});this.cipher=$("select[name=cipher]",this.fieldset).combobox({required:true,editable:false,width:"25%",panelHeight:"auto",panelMaxHeight:150});this.fileEncryption=$("input[name=fileencryption]:checkbox",this.fieldset).change($.proxy(function(){var enabled=this.isUseEncryption();this.fileEncryptCert.tagbox(enabled?"enable":"disable");this.fileEncryptCertSpecButton.linkbutton(enabled?"enable":"disable");},this));this.fileEncryptCert=$("select[name=fileencryptcert]",this.fieldset).tagbox({limitToList:true,required:true,disabled:true,hasDownArrow:true,panelHeight:"auto",panelMaxHeight:150,width:"50%"});this.fileEncryptCertSpecButton=$("a[role=button][name=fileencryptcertspecbutton]",this.fieldset).linkbutton({disabled:true,onClick:$.proxy(this._onClick$FileEncryptCertSpecButton,this)});this.fileDecryption=$("input[name=filedecryption]:checkbox",this.fieldset).change($.proxy(function(){this.fileDecryptKey.tagbox(this.fileDecryption.is(":checked")?"enable":"disable");},this));this.fileDecryptKey=$("select[name=filedecryptkey]",this.fieldset).tagbox({limitToList:true,required:true,disabled:true,hasDownArrow:true,width:"50%",panelHeight:"auto",panelMaxHeight:150});this.compressionEnabled=$("input[name=compressionenabled]:checkbox",this.fieldset);this.receiptAutoGenerationAllowed=$("input[name=receiptautogenerationallowed]:checkbox",this.fieldset);this.certificateExchangeAllowed=$("input[name=certexchangeallowed]:checkbox",this.fieldset);this.relayAllowed=$("input[name=relayallowed]:checkbox",this.fieldset);},getHost:function(){return this.host.textbox("getValue");},setHost:function(value){this.host.textbox("setValue",value);},getPort:function(){return this.port.numberspinner("getValue");},setPort:function(value){this.port.numberspinner("setValue",value);},getTimeout:function(){return this.timeout.numberspinner("getValue")*this.TIMEOUT_FACTOR;},setTimeout:function(value){this.timeout.numberspinner("setValue",parseInt(value)/this.TIMEOUT_FACTOR);},getUsername:function(){return this.username.textbox("getValue");},setUsername:function(value){this.username.textbox("setValue",value);},getPassword:function(){return this.password.passwordbox2("getValue");},setPassword:function(value){this.password.passwordbox2("setValue",value);},isSslEnabled:function(){return this.ssl.switchbutton("options").checked;},setSslEnabled:function(value){this.ssl.switchbutton(!!value?"check":"uncheck");},getSslCertificate:function(){return this.sslCertEnabled.is(":checked:not(:disabled)")?this.sslCert.combobox("getValues"):null;},setSslCertificate:function(value){if(value&&value.length){this.sslCert.combobox("setValues",value);this.sslCertEnabled.prop("checked",true).change();}else{this.sslCertEnabled.prop("checked",false).change();}},setSslCertificates:function(values){this.sslCert.combobox("loadData",values);},getSslKey:function(){return this.sslKeyEnabled.is(":checked:not(:disabled)")?this.sslKey.combobox("getValue"):null;},setSslKey:function(value){if(value){this.sslKey.combobox("setValue",value);}
this.sslKeyEnabled.prop("checked",!!value).change();},setSslKeys:function(values){this.sslKey.combobox("loadData",values);},getDestinationId:function(){return this.destinationId.textbox("getValue");},setDestinationId:function(value){this.destinationId.textbox("setValue",value);},isUseSecureAuthentication:function(){return this.secureAuth.switchbutton("options").checked;},setUseSecureAuthentication:function(value){this.secureAuth.switchbutton(!!value?"check":"uncheck");},getSecureAuthenticationCertificate:function(){return this.authCert.tagbox("getValues");},setSecureAuthenticationCertificate:function(value){this.authCert.tagbox("setValues",value);},setSecureAuthenticationCertificates:function(values){this.authCert.tagbox("loadData",values);},getSecureAuthenticationKey:function(){return this.authKey.tagbox("getValues");},setSecureAuthenticationKey:function(value){this.authKey.tagbox("setValues",value);},setSecureAuthenticationKeys:function(values){this.authKey.tagbox("loadData",values);},isUseEncryption:function(){return this.fileEncryption.is(":checked");},setUseEncryption:function(value){this.fileEncryption.prop("checked",!!value).change();},getRequestEncryptionCertificate:function(){return this.fileEncryptCert.tagbox("getValues");},setRequestEncryptionCertificate:function(value){this.fileEncryptCert.tagbox("setValues",value);},setRequestEncryptionCertificates:function(values){this.fileEncryptCert.tagbox("loadData",values);},getRequestDecryptionKey:function(){return this.fileDecryption.is(":checked")?this.fileDecryptKey.tagbox("getValues"):null;},setRequestDecryptionKey:function(value){if(value&&value.length){this.fileDecryptKey.tagbox("setValues",value);this.fileDecryption.prop("checked",true).change();}else{this.fileDecryption.prop("checked",false).change();}},setRequestDecryptionKeys:function(values){this.fileDecryptKey.tagbox("loadData",values);},getRequestSigningKey:function(){return this.fileSignKey.combobox("getValue");},isUseSigning:function(){return this.fileSigning.is(":checked");},setUseSigning:function(value){this.fileSigning.prop("checked",!!value).change();},setRequestSigningKey:function(value){this.fileSignKey.combobox("setValue",value);},setRequestSigningKeys:function(values){this.fileSignKey.combobox("loadData",values);},getRequestSignatureVerificationCertificate:function(){return this.fileSignatureVerification.is(":checked")?this.fileSignatureVerificationCert.tagbox("getValues"):null;},setRequestSignatureVerificationCertificate:function(value){if(value&&value.length){this.fileSignatureVerificationCert.tagbox("setValues",value);this.fileSignatureVerification.prop("checked",true).change();}else{this.fileSignatureVerification.prop("checked",false).change();}},setRequestSignatureVerificationCertificates:function(values){this.fileSignatureVerificationCert.tagbox("loadData",values);},getReceiptSigningKey:function(){return this.receiptSignKeyEnabled.is(":checked")?this.receiptSignKey.combobox("getValue"):null;},setReceiptSigningKey:function(value){if(value){this.receiptSignKey.combobox("setValue",value);this.receiptSignKeyEnabled.prop("checked",true).change();}else{this.receiptSignKeyEnabled.prop("checked",false).change();}},setReceiptSigningKeys:function(values){this.receiptSignKey.combobox("loadData",values);},getReceiptSignatureVerificationCertificate:function(){return this.receiptSignatureVerificationCert.tagbox("getValues");},setReceiptSignatureVerificationCertificate:function(value){this.receiptSignatureVerificationCert.tagbox("setValues",value);},setReceiptSignatureVerificationCertificates:function(values){this.receiptSignatureVerificationCert.tagbox("loadData",values);},getCipher:function(){return this.cipher.is(":disabled")?null:this.cipher.combobox("getValue");},setCipher:function(value){this.cipher.combobox("select",value);},isReceiptSignatureRequired:function(){return this.receiptSignatureRequired.is(":checked");},setReceiptSignatureRequired:function(value){this.receiptSignatureRequired.prop("checked",!!value).change();},isCompressionEnabled:function(){return this.compressionEnabled.is(":checked");},setCompressionEnabled:function(value){this.compressionEnabled.prop("checked",!!value);},isReceiptAutoGenerationAllowed:function(){return this.receiptAutoGenerationAllowed.is(":checked");},setReceiptAutoGenerationAllowed:function(value){this.receiptAutoGenerationAllowed.prop("checked",!!value).change();},isCertificateExchangeAllowed:function(){return this.certificateExchangeAllowed.is(":checked");},setCertificateExchangeAllowed:function(value){this.certificateExchangeAllowed.prop("checked",!!value);},isRelayAllowed:function(){return this.relayAllowed.is(":checked");},setRelayAllowed:function(value){this.relayAllowed.prop("checked",!!value);},show:function(listener){this._super(listener||jscape.domain.OftpTradingPartnerDialog.LISTENER);this.ssl.switchbutton("options").onChange(this.ssl.switchbutton("options").checked);this.secureAuth.switchbutton("options").onChange(this.secureAuth.switchbutton("options").checked);this.fileSignatureVerification.change();this.fileSigning.change();this.receiptSignatureRequired.change();this.receiptSignKeyEnabled.change();return this;},_onClick$SslCertSpecButton:function(){this.listener.onSslCertificateSpec().done($.proxy(this._onForm$Change,this));},_onClick$AuthCertSpecButton:function(){this.listener.onAuthenticationCertificateSpec().done($.proxy(this._onForm$Change,this));},_onClick$FileEncryptCertSpecButton:function(){this.listener.onFileEncryptionCertSpec().done($.proxy(this._onForm$Change,this));},_onClick$FileSignatureVerificationCertSpecButton:function(){this.listener.onFileSignatureCertSpec().done($.proxy(this._onForm$Change,this));},_onClick$ReceiptSignatureVerificationCertSpecButton:function(){this.listener.onReceiptSignatureCertSpec().done($.proxy(this._onForm$Change,this));}});jscape.domain.OftpTradingPartnerDialog.LISTENER=$.extend({onSslCertificateSpec:$.noop,onAuthenticationCertificateSpec:$.noop,onFileEncryptionCertSpec:$.noop,onFileSignatureCertSpec:$.noop,onReceiptSignatureCertSpec:$.noop},jscape.domain.TradingPartnerDialog.LISTENER);jscape.domain.AddOftpTradingPartnerDialog=jscape.domain.OftpTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-add-oftp"));this.name=$("input[name=name]",this.fieldset).textbox({required:true,validType:["partner_name_nonempty","partner_unique"],missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_NAME,width:"60%"});},getName:function(){return this.name.textbox("getValue");}});jscape.domain.EditOftpTradingPartnerDialog=jscape.domain.OftpTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-edit-oftp"));this.title=this.dialog.dialog("header").text()||"";},getName:function(){return this.name;},setName:function(value){this.name=value;this.dialog.dialog("setTitle",this.title.supplant({0:value}));}});jscape.domain.AddSftpTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({onSubmit:function(dialog){return this.listener.onAddTradingPartner(this._createPartner(dialog));},onSelectClientKey:function(){return this._super(true,false);},onLoadHostKeys:function(){return $.when(jscape.API.getHostCertificates(this.domainName),jscape.API.getHostPublicKeys(this.domainName)).then(function(certificates,publicKeys){return[].concat($.map(certificates,function(c){return c.name;}),$.map(publicKeys,function(pk){return pk.name;}))});},_setupDialog:function(){var dialog=new jscape.domain.AddSftpTradingPartnerDialog();dialog.setPort(22);dialog.setTimeout(30*1000);dialog.setTcpNoDelay(true);dialog.setPipelinedTransferEnabled(true);return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.sftp(dialog.getName(),dialog.getCompany(),dialog.getEmail(),dialog.getHost(),dialog.getPort(),dialog.getTimeout(),dialog.getProxyType()!=null?new jscape.ProxyData(dialog.getProxyType(),dialog.getProxyHost(),dialog.getProxyPort(),dialog.getProxyUsername(),dialog.getProxyPassword()):null,dialog.getTcpNoDelay(),dialog.getUsername(),dialog.getPassword(),this.clientKeyProvider,dialog.getHostKey()!=null?new jscape.ServerKeyProvider(dialog.getHostKey()):null,new jscape.SftpData(dialog.isStartSubsystemReplyRequired(),dialog.getPublicKeyAlgorithm()),dialog.getTags());}});jscape.domain.EditSftpTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({start:function(listener,domainName,partner){this.partner=partner;return this._super(listener,domainName,partner.keyProvider);},onSubmit:function(dialog){return this.listener.onEditTradingPartner(this._createPartner(dialog));},onSelectClientKey:function(){return this._super(true,false);},onLoadHostKeys:function(){return $.when(jscape.API.getHostCertificates(this.domainName),jscape.API.getHostPublicKeys(this.domainName)).then(function(certificates,publicKeys){return[].concat($.map(certificates,function(c){return c.name;}),$.map(publicKeys,function(pk){return pk.name;}))});},_setupDialog:function(){var dialog=new jscape.domain.EditSftpTradingPartnerDialog();var partner=this.partner;if(partner){dialog.setName(partner.name);dialog.setCompany(partner.company);dialog.setEmail(partner.email);dialog.setHost(partner.host);dialog.setPort(partner.port);dialog.setTimeout(partner.timeout);var proxy=partner.proxyData;if(proxy){dialog.setProxyType(proxy.type);dialog.setProxyHost(proxy.host);dialog.setProxyPort(proxy.port);dialog.setProxyUsername(proxy.username);dialog.setProxyPassword(proxy.password);}
dialog.setTcpNoDelay(partner.tcpNoDelayEnabled);dialog.setUsername(partner.username);dialog.setPassword(partner.password);dialog.setHostKey(partner.hostKeyProvider?partner.hostKeyProvider.keyAlias:null);var data=partner.sftpData;if(data){dialog.setPublicKeyAlgorithm(data.publicKeyAlgorithm);dialog.setStartSubsystemReplyRequired(data.startSubsystemReplyRequired);dialog.setPipelinedTransferEnabled(data.pipelinedTransferEnabled);}
dialog.setTags(partner.tags);}
return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.sftp(this.partner.name,dialog.getCompany(),dialog.getEmail(),dialog.getHost(),dialog.getPort(),dialog.getTimeout(),dialog.getProxyType()!=null?new jscape.ProxyData(dialog.getProxyType(),dialog.getProxyHost(),dialog.getProxyPort(),dialog.getProxyUsername(),dialog.getProxyPassword()):null,dialog.getTcpNoDelay(),dialog.getUsername(),dialog.getPassword(),this.clientKeyProvider,dialog.getHostKey()!=null?new jscape.ServerKeyProvider(dialog.getHostKey()):null,new jscape.SftpData(dialog.isStartSubsystemReplyRequired(),dialog.getPublicKeyAlgorithm(),dialog.isPipelinedTransferEnabled()),dialog.getTags());}});jscape.domain.SftpTradingPartnerDialog=jscape.domain.TradingPartnerDialog.extend({TIMEOUT_FACTOR:1000,initialize:function(dialog){this._super(dialog);var initializing=true;this.host=$("input[name=host]",this.fieldset).textbox({required:true,validType:"partner_host_nonempty",missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_HOST,width:"60%"});this.port=$("input[name=port]",this.fieldset).numberspinner({required:true,min:1,max:65535,width:100});this.timeout=$("input[name=timeout]",this.fieldset).numberspinner({required:true,min:1,max:60,width:60});this.tcpNoDelay=$("input[name=tcpnodelay]:checkbox",this.fieldset);this.publicKeyAlgorithm=$("select[name=publickeyalgorithm]",this.fieldset).combobox({editable:false,autoSelectFirst:true,width:200,panelHeight:"auto",panelMaxHeight:"40%"});this.username=$("input[name=username]",this.fieldset).textbox({required:true,width:"50%"});this.password=$("input[name=password]",this.fieldset).passwordbox2({width:"50%"});this.useHostKey=$("input[name=usehostkey]:checkbox",this.fieldset).prop("disabled",true);this.useHostKey.change($.proxy(function(){this.hostKey.combobox(this.useHostKey.is(":checked")?"enable":"disable");},this));this.hostKey=$("select[name=hostkey]",this.fieldset);this.hostKey.combobox({editable:false,disabled:true,width:170,panelHeight:"auto",panelMaxHeight:150,loader:$.proxy(this._onLoad$HostKeys,this),onBeforeLoad:function(){return!initializing;},onLoadSuccess:$.proxy(function(data){this.useHostKey.prop("disabled",data.length==0).change();},this)});this.clientKeyButton=$("a[role=button][name=selectclientkey]",this.fieldset).linkbutton({onClick:$.proxy(this._onClick$ClientKeyButton,this)});this.startSubsystemReply=$("input[name=startsubsystemreply]:checkbox",this.fieldset);this.pipeliningEnabled=$("input[name=transferpipelining]:checkbox",this.fieldset);initializing=false;},getHost:function(){return this.host.textbox("getValue");},setHost:function(value){this.host.textbox("setValue",value);},getPort:function(){return this.port.numberspinner("getValue");},setPort:function(value){this.port.numberspinner("setValue",value);},getTimeout:function(){return this.timeout.numberspinner("getValue")*this.TIMEOUT_FACTOR;},setTimeout:function(value){this.timeout.numberspinner("setValue",parseInt(value)/this.TIMEOUT_FACTOR);},getTcpNoDelay:function(){return this.tcpNoDelay.is(":checked");},setTcpNoDelay:function(value){this.tcpNoDelay.prop("checked",!!value).change();},getUsername:function(){return this.username.textbox("getValue");},setUsername:function(value){this.username.textbox("setValue",value);},getPassword:function(){return this.password.passwordbox2("getValue");},setPassword:function(value){this.password.passwordbox2("setValue",value);},getPublicKeyAlgorithm:function(){return this.publicKeyAlgorithm.combobox("getValue");},setPublicKeyAlgorithm:function(value){return this.publicKeyAlgorithm.combobox("setValue",value);},getHostKey:function(){return this.useHostKey.is(":checked")?this.hostKey.combobox("getValue"):null;},setHostKey:function(value){this.useHostKey.prop("checked",value!=null).change();if(value!=null){this.hostKey.combobox("setValue",value);}},isStartSubsystemReplyRequired:function(){return this.startSubsystemReply.is(":checked");},setStartSubsystemReplyRequired:function(value){this.startSubsystemReply.prop("checked",!!value);},isPipelinedTransferEnabled:function(){return this.pipeliningEnabled.is(":checked");},setPipelinedTransferEnabled:function(value){this.pipeliningEnabled.prop("checked",!!value);},show:function(listener){this._super(listener||jscape.domain.SftpTradingPartnerDialog.LISTENER);this.hostKey.combobox("reload");return this;},_onLoad$HostKeys:function(params,success,error){this.listener.onLoadHostKeys(params).done(success).fail(error);},_onClick$ClientKeyButton:function(){this.listener.onSelectClientKey().done($.proxy(this._onForm$Change,this));}});jscape.domain.SftpTradingPartnerDialog.LISTENER=$.extend({onSelectClientKey:$.noop,onLoadHostKeys:$.noop},jscape.domain.TradingPartnerDialog.LISTENER);jscape.domain.AddSftpTradingPartnerDialog=jscape.domain.SftpTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-add-sftp"));this.name=$("input[name=name]",this.fieldset).textbox({required:true,validType:["partner_name_nonempty","partner_unique"],missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_NAME,width:"60%"});},getName:function(){return this.name.textbox("getValue");}});jscape.domain.EditSftpTradingPartnerDialog=jscape.domain.SftpTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-edit-sftp"));this.title=this.dialog.dialog("header").text()||"";},setName:function(value){this.dialog.dialog("setTitle",this.title.supplant({0:value}));}});jscape.domain.AddWebDavTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({onSubmit:function(dialog){return this.listener.onAddTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.AddWebDavTradingPartnerDialog();dialog.setTimeout(30*1000);this._loadHostKeys().done(function(keys){dialog.setHostKeys(keys);});return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.webdav(dialog.getName(),dialog.getCompany(),dialog.getEmail(),dialog.getUrl(),dialog.getTimeout(),dialog.getProxyType()!=null?new jscape.ProxyData(dialog.getProxyType(),dialog.getProxyHost(),dialog.getProxyPort()):null,dialog.getUsername(),dialog.getPassword(),dialog.getDomain(),this.clientKeyProvider,dialog.getHostKey()!=null?new jscape.ServerKeyProvider(dialog.getHostKey()):null,dialog.getTags());}});jscape.domain.EditWebDavTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({start:function(listener,domainName,partner){this.partner=partner;return this._super(listener,domainName,partner.keyProvider);},onSubmit:function(dialog){return this.listener.onEditTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.EditWebDavTradingPartnerDialog();var partner=this.partner;if(partner){dialog.setName(partner.name);dialog.setCompany(partner.company);dialog.setEmail(partner.email);dialog.setUrl(partner.url);dialog.setTimeout(partner.timeout);var proxy=partner.proxyData;if(proxy){dialog.setProxyType(proxy.type);dialog.setProxyHost(proxy.host);dialog.setProxyPort(proxy.port);}
dialog.setUsername(partner.username);dialog.setPassword(partner.password);dialog.setDomain(partner.domain);dialog.setTags(partner.tags);}
this._loadHostKeys().done(function(keys){dialog.setHostKeys(keys);partner&&dialog.setHostKey(partner.hostKeyProvider?partner.hostKeyProvider.keyAlias:null);});return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.webdav(this.partner.name,dialog.getCompany(),dialog.getEmail(),dialog.getUrl(),dialog.getTimeout(),dialog.getProxyType()!=null?new jscape.ProxyData(dialog.getProxyType(),dialog.getProxyHost(),dialog.getProxyPort()):null,dialog.getUsername(),dialog.getPassword(),dialog.getDomain(),this.clientKeyProvider,dialog.getHostKey()!=null?new jscape.ServerKeyProvider(dialog.getHostKey()):null,dialog.getTags());}});jscape.domain.WebDavTradingPartnerDialog=jscape.domain.TradingPartnerDialog.extend({TIMEOUT_FACTOR:1000,initialize:function(dialog){this._super(dialog);this.url=$("input[name=url]",this.fieldset).textbox({required:true,validType:"partner_url",missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_URL,width:"60%"});this.timeout=$("input[name=timeout]",this.fieldset).numberspinner({required:true,min:1,max:60,width:60});this.username=$("input[name=username]",this.fieldset).textbox({width:"50%"});this.password=$("input[name=password]",this.fieldset).passwordbox2({width:"50%"});this.domain=$("input[name=domain]",this.fieldset).textbox({width:"50%"});this.useHostKey=$("input[name=usehostkey]:checkbox",this.fieldset).prop("disabled",true);this.useHostKey.change($.proxy(function(){this.hostKey.combobox(this.useHostKey.is(":checked")?"enable":"disable");},this));this.hostKey=$("select[name=hostkey]",this.fieldset);this.hostKey.combobox({editable:false,disabled:true,onLoadSuccess:$.proxy(function(data){this.useHostKey.prop("disabled",data.length==0);if(data.length!=0){this.hostKey.combobox("select",data[0].value);}},this),width:170,panelHeight:"auto",panelMaxHeight:150});this.clientKeyButton=$("a[role=button][name=selectclientkey]",this.fieldset).linkbutton({onClick:$.proxy(this._onClick$ClientKeyButton,this)});},getUrl:function(){return this.url.textbox("getValue");},setUrl:function(value){this.url.textbox("setValue",value);},getTimeout:function(){return this.timeout.numberspinner("getValue")*this.TIMEOUT_FACTOR;},setTimeout:function(value){this.timeout.numberspinner("setValue",parseInt(value)/this.TIMEOUT_FACTOR);},getUsername:function(){return this.username.textbox("getValue");},setUsername:function(value){this.username.textbox("setValue",value);},getPassword:function(){return this.password.passwordbox2("getValue");},setPassword:function(value){this.password.passwordbox2("setValue",value);},getDomain:function(){return this.domain.textbox("getValue");},setDomain:function(value){this.domain.textbox("setValue",value);},getHostKey:function(){return this.useHostKey.is(":checked")?this.hostKey.combobox("getValue"):null;},setHostKey:function(value){this.useHostKey.prop("checked",value!=null).change();if(value!=null){this.hostKey.combobox("setValue",value);}},setHostKeys:function(values){this.hostKey.combobox("loadData",values);},show:function(listener){return this._super(listener||jscape.domain.WebDavTradingPartnerDialog.LISTENER);},_onClick$ClientKeyButton:function(){this.listener.onSelectClientKey().done($.proxy(this._onForm$Change,this));}});jscape.domain.WebDavTradingPartnerDialog.LISTENER=$.extend({onSelectClientKey:$.noop},jscape.domain.TradingPartnerDialog.LISTENER);jscape.domain.AddWebDavTradingPartnerDialog=jscape.domain.WebDavTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-add-webdav"));this.name=$("input[name=name]",this.fieldset).textbox({required:true,validType:["partner_name_nonempty","partner_unique"],missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_NAME,width:"60%"});},getName:function(){return this.name.textbox("getValue");}});jscape.domain.EditWebDavTradingPartnerDialog=jscape.domain.WebDavTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-edit-webdav"));this.title=this.dialog.dialog("header").text()||"";},setName:function(value){this.dialog.dialog("setTitle",this.title.supplant({0:value}));}});jscape.domain.AddRestTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({onSubmit:function(dialog){return this.listener.onAddTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.AddRestTradingPartnerDialog();dialog.setPort(80);dialog.setTimeout(30*1000);this._loadHostKeys().done(function(keys){dialog.setHostKeys(keys);});return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.rest(dialog.getName(),dialog.getCompany(),dialog.getEmail(),dialog.getHost(),dialog.getPort(),dialog.getTimeout(),dialog.getProxyType()!=null?new jscape.ProxyData(dialog.getProxyType(),dialog.getProxyHost(),dialog.getProxyPort()):null,dialog.getUsername(),dialog.getPassword(),dialog.getDomain(),this.clientKeyProvider,dialog.getHostKey()!=null?new jscape.ServerKeyProvider(dialog.getHostKey()):null,dialog.isUseSsl(),dialog.getTags());}});jscape.domain.EditRestTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({start:function(listener,domainName,partner){this.partner=partner;return this._super(listener,domainName,partner.keyProvider);},onSubmit:function(dialog){return this.listener.onEditTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.EditRestTradingPartnerDialog();var partner=this.partner;if(partner){dialog.setName(partner.name);dialog.setCompany(partner.company);dialog.setEmail(partner.email);dialog.setHost(partner.host);dialog.setPort(partner.port);dialog.setTimeout(partner.timeout);var proxy=partner.proxyData;if(proxy){dialog.setProxyType(proxy.type);dialog.setProxyHost(proxy.host);dialog.setProxyPort(proxy.port);}
dialog.setUsername(partner.username);dialog.setPassword(partner.password);dialog.setDomain(partner.domain);dialog.setUseSsl(partner.encryptionRequired);dialog.setTags(partner.tags);}
this._loadHostKeys().done(function(keys){dialog.setHostKeys(keys);partner&&dialog.setHostKey(partner.hostKeyProvider?partner.hostKeyProvider.keyAlias:null);});return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.rest(this.partner.name,dialog.getCompany(),dialog.getEmail(),dialog.getHost(),dialog.getPort(),dialog.getTimeout(),dialog.getProxyType()!=null?new jscape.ProxyData(dialog.getProxyType(),dialog.getProxyHost(),dialog.getProxyPort()):null,dialog.getUsername(),dialog.getPassword(),dialog.getDomain(),this.clientKeyProvider,dialog.getHostKey()!=null?new jscape.ServerKeyProvider(dialog.getHostKey()):null,dialog.isUseSsl(),dialog.getTags());}});jscape.domain.RestTradingPartnerDialog=jscape.domain.TradingPartnerDialog.extend({TIMEOUT_FACTOR:1000,initialize:function(dialog){this._super(dialog);this.host=$("input[name=host]",this.fieldset).textbox({required:true,validType:"partner_host_nonempty",missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_HOST,width:"60%"});this.port=$("input[name=port]",this.fieldset).numberspinner({required:true,min:1,max:65535,width:100});this.timeout=$("input[name=timeout]",this.fieldset).numberspinner({required:true,min:1,max:60,width:60});this.useSsl=$("input[name=ssl]:checkbox",this.fieldset);this.username=$("input[name=username]",this.fieldset).textbox({width:"50%"});this.password=$("input[name=password]",this.fieldset).passwordbox2({width:"50%"});this.domain=$("input[name=domain]",this.fieldset).textbox({required:true,width:"50%"});this.useHostKey=$("input[name=usehostkey]:checkbox",this.fieldset).prop("disabled",true);this.useHostKey.change($.proxy(function(){this.hostKey.combobox(this.useHostKey.is(":checked")?"enable":"disable");},this));this.hostKey=$("select[name=hostkey]",this.fieldset);this.hostKey.combobox({editable:false,disabled:true,onLoadSuccess:$.proxy(function(data){this.useHostKey.prop("disabled",data.length==0);if(data.length!=0){this.hostKey.combobox("select",data[0].value);}},this),width:170,panelHeight:"auto",panelMaxHeight:150});this.clientKeyButton=$("a[role=button][name=selectclientkey]",this.fieldset).linkbutton({onClick:$.proxy(this._onClick$ClientKeyButton,this)});},getHost:function(){return this.host.textbox("getValue");},setHost:function(value){this.host.textbox("setValue",value);},getPort:function(){return parseInt(this.port.numberspinner("getValue"));},setPort:function(value){this.port.numberspinner("setValue",parseInt(value)).numberspinner("validate");},getTimeout:function(){return this.timeout.numberspinner("getValue")*this.TIMEOUT_FACTOR;},setTimeout:function(value){this.timeout.numberspinner("setValue",parseInt(value)/this.TIMEOUT_FACTOR);},isUseSsl:function(){return this.useSsl.is(":checked");},setUseSsl:function(value){this.useSsl.prop("checked",!!value);},getUsername:function(){return this.username.textbox("getValue");},setUsername:function(value){this.username.textbox("setValue",value);},getPassword:function(){return this.password.passwordbox2("getValue");},setPassword:function(value){this.password.passwordbox2("setValue",value);},getDomain:function(){return this.domain.textbox("getValue");},setDomain:function(value){this.domain.textbox("setValue",value);},getHostKey:function(){return this.useHostKey.is(":checked")?this.hostKey.combobox("getValue"):null;},setHostKey:function(value){this.useHostKey.prop("checked",value!=null).change();if(value!=null){this.hostKey.combobox("setValue",value);}},setHostKeys:function(values){this.hostKey.combobox("loadData",values);},show:function(listener){return this._super(listener||jscape.domain.RestTradingPartnerDialog.LISTENER);},_onClick$ClientKeyButton:function(){this.listener.onSelectClientKey().done($.proxy(this._onForm$Change,this));}});jscape.domain.RestTradingPartnerDialog.LISTENER=$.extend({onSelectClientKey:$.noop},jscape.domain.TradingPartnerDialog.LISTENER);jscape.domain.AddRestTradingPartnerDialog=jscape.domain.RestTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-add-rest"));this.name=$("input[name=name]",this.fieldset).textbox({required:true,validType:["partner_name_nonempty","partner_unique"],missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_NAME,width:"60%"});},getName:function(){return this.name.textbox("getValue");}});jscape.domain.EditRestTradingPartnerDialog=jscape.domain.RestTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-edit-rest"));this.title=this.dialog.dialog("header").text()||"";},setName:function(value){this.dialog.dialog("setTitle",this.title.supplant({0:value}));}});jscape.domain.AddTftpTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({onSubmit:function(dialog){return this.listener.onAddTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.AddTftpTradingPartnerDialog();dialog.setPort(69);dialog.setRetransmitInterval(3*1000);dialog.setMaxRetransmitAttempts(6);return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.tftp(dialog.getName(),dialog.getCompany(),dialog.getEmail(),dialog.getHost(),dialog.getPort(),dialog.getRetransmitInterval(),dialog.getTags());}});jscape.domain.EditTftpTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({start:function(listener,domainName,partner){this.partner=partner;return this._super(listener,domainName);},onSubmit:function(dialog){return this.listener.onEditTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.EditTftpTradingPartnerDialog();var partner=this.partner;if(partner){dialog.setName(partner.name);dialog.setCompany(partner.company);dialog.setEmail(partner.email);dialog.setHost(partner.host);dialog.setPort(partner.port);dialog.setRetransmitInterval(partner.timeout);dialog.setMaxRetransmitAttempts(6);dialog.setTags(partner.tags);}
return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.tftp(this.partner.name,dialog.getCompany(),dialog.getEmail(),dialog.getHost(),dialog.getPort(),dialog.getRetransmitInterval(),dialog.getTags());}});jscape.domain.TftpTradingPartnerDialog=jscape.domain.TradingPartnerDialog.extend({TIME_FACTOR:1000,initialize:function(dialog){this._super(dialog);this.host=$("input[name=host]",this.fieldset).textbox({required:true,validType:"partner_host_nonempty",missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_HOST,width:"60%"});this.port=$("input[name=port]",this.fieldset).numberspinner({required:true,min:1,max:65535,width:100});this.retransmitInterval=$("input[name=retransmitinterval]",this.fieldset).numberspinner({required:true,min:1,max:255,width:60});this.retransmitAttempts=$("input[name=retransmitattempts]",this.fieldset).numberspinner({required:true,readonly:true,min:1,max:100,width:60});},getHost:function(){return this.host.textbox("getValue");},setHost:function(value){this.host.textbox("setValue",value);},getPort:function(){return parseInt(this.port.numberspinner("getValue"));},setPort:function(value){this.port.numberspinner("setValue",parseInt(value)).numberspinner("validate");},getRetransmitInterval:function(){return parseInt(this.retransmitInterval.numberspinner("getValue"))*this.TIME_FACTOR;},setRetransmitInterval:function(value){this.retransmitInterval.numberspinner("setValue",parseInt(value)/this.TIME_FACTOR).numberspinner("validate");},getMaxRetransmitAttempts:function(){return parseInt(this.retransmitAttempts.numberspinner("getValue"));},setMaxRetransmitAttempts:function(value){this.retransmitAttempts.numberspinner("setValue",parseInt(value)).numberspinner("validate");}});jscape.domain.AddTftpTradingPartnerDialog=jscape.domain.TftpTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-add-tftp"));this.name=$("input[name=name]",this.fieldset).textbox({required:true,validType:["partner_name_nonempty","partner_unique"],missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_NAME,width:"60%"});},getName:function(){return this.name.textbox("getValue");}});jscape.domain.EditTftpTradingPartnerDialog=jscape.domain.TftpTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-edit-tftp"));this.title=this.dialog.dialog("header").text()||"";},setName:function(value){this.dialog.dialog("setTitle",this.title.supplant({0:value}));}});jscape.domain.AddImapTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({onSubmit:function(dialog){return this.listener.onAddTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.AddImapTradingPartnerDialog();dialog.setPort(143);dialog.setTimeout(30*1000);this._loadHostKeys().done(function(keys){dialog.setHostKeys(keys);});return dialog;},_createPartner:function(dialog){var hostKeyProvider=dialog.getHostKey()!=null?new jscape.ServerKeyProvider(dialog.getHostKey()):null;return jscape.TradingPartner.imap(dialog.getName(),dialog.getCompany(),dialog.getEmail(),dialog.getHost(),dialog.getPort(),dialog.getTimeout(),dialog.getProxyType()!=null?new jscape.ProxyData(dialog.getProxyType(),dialog.getProxyHost(),dialog.getProxyPort(),dialog.getProxyUsername(),dialog.getProxyPassword()):null,dialog.getConnectionType(),dialog.getUsername(),dialog.getPassword(),new jscape.ImapData(dialog.getAuthenticationType(),new jscape.OAuthData(dialog.getTokenEndPointUrl(),dialog.getClientId(),dialog.getClientSecret(),dialog.getRedirectUrl())),this.clientKeyProvider,hostKeyProvider,dialog.getTags());}});jscape.domain.EditImapTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({start:function(listener,domainName,partner){this.partner=partner;return this._super(listener,domainName,partner.keyProvider);},onSubmit:function(dialog){return this.listener.onEditTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.EditImapTradingPartnerDialog();var partner=this.partner;if(partner){dialog.setName(partner.name);dialog.setCompany(partner.company);dialog.setEmail(partner.email);dialog.setHost(partner.host);dialog.setPort(partner.port);dialog.setTimeout(partner.timeout);var proxy=partner.proxyData;if(proxy){dialog.setProxyType(proxy.type);dialog.setProxyHost(proxy.host);dialog.setProxyPort(proxy.port);dialog.setProxyUsername(proxy.username);dialog.setProxyPassword(proxy.password);}
dialog.setConnectionType(partner.connectionType);dialog.setUsername(partner.username);dialog.setPassword(partner.password);if(partner.imapData){dialog.setAuthenticationType(partner.imapData.authenticationType);var oauthData=partner.imapData.oauthData;if(oauthData){dialog.setTokenEndPointUrl(oauthData.tokenEndpointUrl);dialog.setClientId(oauthData.clientId);dialog.setClientSecret(oauthData.clientSecret);dialog.setRedirectUrl(oauthData.redirectUrl);}}
dialog.setTags(partner.tags);}
this._loadHostKeys().done(function(keys){dialog.setHostKeys(keys);partner&&dialog.setHostKey(partner.hostKeyProvider?partner.hostKeyProvider.keyAlias:null);});return dialog;},_createPartner:function(dialog){var hostKeyProvider=dialog.getHostKey()!=null?new jscape.ServerKeyProvider(dialog.getHostKey()):null;return jscape.TradingPartner.imap(this.partner.name,dialog.getCompany(),dialog.getEmail(),dialog.getHost(),dialog.getPort(),dialog.getTimeout(),dialog.getProxyType()!=null?new jscape.ProxyData(dialog.getProxyType(),dialog.getProxyHost(),dialog.getProxyPort(),dialog.getProxyUsername(),dialog.getProxyPassword()):null,dialog.getConnectionType(),dialog.getUsername(),dialog.getPassword(),new jscape.ImapData(dialog.getAuthenticationType(),new jscape.OAuthData(dialog.getTokenEndPointUrl(),dialog.getClientId(),dialog.getClientSecret(),dialog.getRedirectUrl())),this.clientKeyProvider,hostKeyProvider,dialog.getTags());}});jscape.domain.AddPop3TradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({onSubmit:function(dialog){return this.listener.onAddTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.AddPop3TradingPartnerDialog();dialog.setPort(110);dialog.setTimeout(30*1000);this._loadHostKeys().done(function(keys){dialog.setHostKeys(keys);});return dialog;},_createPartner:function(dialog){var hostKeyProvider=dialog.getHostKey()!=null?new jscape.ServerKeyProvider(dialog.getHostKey()):null;return jscape.TradingPartner.pop3(dialog.getName(),dialog.getCompany(),dialog.getEmail(),dialog.getHost(),dialog.getPort(),dialog.getTimeout(),dialog.getProxyType()!=null?new jscape.ProxyData(dialog.getProxyType(),dialog.getProxyHost(),dialog.getProxyPort(),dialog.getProxyUsername(),dialog.getProxyPassword()):null,dialog.getConnectionType(),dialog.getUsername(),dialog.getPassword(),new jscape.Pop3Data(dialog.getAuthenticationType(),new jscape.OAuthData(dialog.getTokenEndPointUrl(),dialog.getClientId(),dialog.getClientSecret(),dialog.getRedirectUrl())),this.clientKeyProvider,hostKeyProvider,dialog.getTags());}});jscape.domain.EditPop3TradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({start:function(listener,domainName,partner){this.partner=partner;return this._super(listener,domainName,partner.keyProvider);},onSubmit:function(dialog){return this.listener.onEditTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.EditPop3TradingPartnerDialog();var partner=this.partner;if(partner){dialog.setName(partner.name);dialog.setCompany(partner.company);dialog.setEmail(partner.email);dialog.setHost(partner.host);dialog.setPort(partner.port);dialog.setTimeout(partner.timeout);var proxy=partner.proxyData;if(proxy){dialog.setProxyType(proxy.type);dialog.setProxyHost(proxy.host);dialog.setProxyPort(proxy.port);dialog.setProxyUsername(proxy.username);dialog.setProxyPassword(proxy.password);}
dialog.setConnectionType(partner.connectionType);dialog.setUsername(partner.username);dialog.setPassword(partner.password);if(partner.pop3Data){dialog.setAuthenticationType(partner.pop3Data.authenticationType);var oauthData=partner.pop3Data.oauthData;if(oauthData){dialog.setTokenEndPointUrl(oauthData.tokenEndpointUrl);dialog.setClientId(oauthData.clientId);dialog.setClientSecret(oauthData.clientSecret);dialog.setRedirectUrl(oauthData.redirectUrl);}}
dialog.setTags(partner.tags);}
this._loadHostKeys().done(function(keys){dialog.setHostKeys(keys);partner&&dialog.setHostKey(partner.hostKeyProvider?partner.hostKeyProvider.keyAlias:null);});return dialog;},_createPartner:function(dialog){var hostKeyProvider=dialog.getHostKey()!=null?new jscape.ServerKeyProvider(dialog.getHostKey()):null;return jscape.TradingPartner.pop3(this.partner.name,dialog.getCompany(),dialog.getEmail(),dialog.getHost(),dialog.getPort(),dialog.getTimeout(),dialog.getProxyType()!=null?new jscape.ProxyData(dialog.getProxyType(),dialog.getProxyHost(),dialog.getProxyPort(),dialog.getProxyUsername(),dialog.getProxyPassword()):null,dialog.getConnectionType(),dialog.getUsername(),dialog.getPassword(),new jscape.Pop3Data(dialog.getAuthenticationType(),new jscape.OAuthData(dialog.getTokenEndPointUrl(),dialog.getClientId(),dialog.getClientSecret(),dialog.getRedirectUrl())),this.clientKeyProvider,hostKeyProvider,dialog.getTags());}});jscape.domain.AddSmtpTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({onSubmit:function(dialog){return this.listener.onAddTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.AddSmtpTradingPartnerDialog();dialog.setPort(25);dialog.setTimeout(30*1000);this._loadHostKeys().done(function(keys){dialog.setHostKeys(keys);});return dialog;},_createPartner:function(dialog){var hostKeyProvider=dialog.getHostKey()!=null?new jscape.ServerKeyProvider(dialog.getHostKey()):null;return jscape.TradingPartner.smtp(dialog.getName(),dialog.getCompany(),dialog.getEmail(),dialog.getHost(),dialog.getPort(),dialog.getTimeout(),dialog.getProxyType()!=null?new jscape.ProxyData(dialog.getProxyType(),dialog.getProxyHost(),dialog.getProxyPort(),dialog.getProxyUsername(),dialog.getProxyPassword()):null,dialog.getConnectionType(),dialog.getUsername(),dialog.getPassword(),new jscape.SmtpData(dialog.getAuthenticationType(),new jscape.OAuthData(dialog.getTokenEndPointUrl(),dialog.getClientId(),dialog.getClientSecret(),dialog.getRedirectUrl())),this.clientKeyProvider,hostKeyProvider,dialog.getTags());}});jscape.domain.EditSmtpTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({start:function(listener,domainName,partner){this.partner=partner;return this._super(listener,domainName,partner.keyProvider);},onSubmit:function(dialog){return this.listener.onEditTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.EditSmtpTradingPartnerDialog();var partner=this.partner;if(partner){dialog.setName(partner.name);dialog.setCompany(partner.company);dialog.setEmail(partner.email);dialog.setHost(partner.host);dialog.setPort(partner.port);dialog.setTimeout(partner.timeout);var proxy=partner.proxyData;if(proxy){dialog.setProxyType(proxy.type);dialog.setProxyHost(proxy.host);dialog.setProxyPort(proxy.port);dialog.setProxyUsername(proxy.username);dialog.setProxyPassword(proxy.password);}
dialog.setConnectionType(partner.connectionType);dialog.setUsername(partner.username);dialog.setPassword(partner.password);if(partner.smtpData){dialog.setAuthenticationType(partner.smtpData.authenticationType);var oauthData=partner.smtpData.oauthData;if(oauthData){dialog.setTokenEndPointUrl(oauthData.tokenEndpointUrl);dialog.setClientId(oauthData.clientId);dialog.setClientSecret(oauthData.clientSecret);dialog.setRedirectUrl(oauthData.redirectUrl);}}
dialog.setTags(partner.tags);}
this._loadHostKeys().done(function(keys){dialog.setHostKeys(keys);partner&&dialog.setHostKey(partner.hostKeyProvider?partner.hostKeyProvider.keyAlias:null);});return dialog;},_createPartner:function(dialog){var hostKeyProvider=dialog.getHostKey()!=null?new jscape.ServerKeyProvider(dialog.getHostKey()):null;return jscape.TradingPartner.smtp(this.partner.name,dialog.getCompany(),dialog.getEmail(),dialog.getHost(),dialog.getPort(),dialog.getTimeout(),dialog.getProxyType()!=null?new jscape.ProxyData(dialog.getProxyType(),dialog.getProxyHost(),dialog.getProxyPort(),dialog.getProxyUsername(),dialog.getProxyPassword()):null,dialog.getConnectionType(),dialog.getUsername(),dialog.getPassword(),new jscape.SmtpData(dialog.getAuthenticationType(),new jscape.OAuthData(dialog.getTokenEndPointUrl(),dialog.getClientId(),dialog.getClientSecret(),dialog.getRedirectUrl())),this.clientKeyProvider,hostKeyProvider,dialog.getTags());}});jscape.domain.MailAccessTradingPartnerDialog=jscape.domain.TradingPartnerDialog.extend({TIMEOUT_FACTOR:1000,initialize:function(dialog){this._super(dialog);this.host=$("input[name=host]",this.fieldset).textbox({required:true,validType:"partner_host_nonempty",missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_HOST,width:"60%"});this.port=$("input[name=port]",this.fieldset).numberspinner({required:true,min:1,max:65535,width:100});this.timeout=$("input[name=timeout]",this.fieldset).numberspinner({required:true,min:1,max:60,width:60});this.connectionType=$("select[name=connectiontype]",this.fieldset).combobox({required:true,editable:false,width:"30%",panelHeight:"auto",panelMaxHeight:150});this.username=$("input[name=username]",this.fieldset).textbox({width:"50%"});this.password=$("input[name=password]",this.fieldset).passwordbox2({width:"50%"});this.authType=$("select[name=authtype]",this.fieldset).combobox({required:false,editable:false,onChange:$.proxy(this._onChange$AuthType,this),width:"30%",panelHeight:"auto",panelMaxHeight:150});this.tokenEndPointUrl=$("input[name=tokenendpointurl]",this.fieldset).textbox({disabled:true,width:"50%"});this.clientId=$("input[name=clientid]",this.fieldset).textbox({disabled:true,width:"50%"});this.clientSecret=$("input[name=clientsecret]",this.fieldset).textbox({disabled:true,width:"50%"});this.redirectUrl=$("input[name=redirecturl]",this.fieldset).textbox({disabled:true,width:"50%"});this.useHostKey=$("input[name=usehostkey]:checkbox",this.fieldset).prop("disabled",true);this.useHostKey.change($.proxy(function(){this.hostKey.combobox(this.useHostKey.is(":checked")?"enable":"disable");},this));this.hostKey=$("select[name=hostkey]",this.fieldset);this.hostKey.combobox({editable:false,disabled:true,onLoadSuccess:$.proxy(function(data){this.useHostKey.prop("disabled",data.length==0);if(data.length!=0){this.hostKey.combobox("setValue",data[0].value);}},this),width:170,panelHeight:"auto",panelMaxHeight:150});this.clientKeyButton=$("a[role=button][name=selectclientkey]",this.fieldset).linkbutton({onClick:$.proxy(this._onClick$ClientKeyButton,this)});},getHost:function(){return this.host.textbox("getValue");},setHost:function(value){this.host.textbox("setValue",value);},getPort:function(){return parseInt(this.port.numberspinner("getValue"));},setPort:function(value){this.port.numberspinner("setValue",parseInt(value)).numberspinner("validate");},getTimeout:function(){return this.timeout.numberspinner("getValue")*this.TIMEOUT_FACTOR;},setTimeout:function(value){this.timeout.numberspinner("setValue",parseInt(value)/this.TIMEOUT_FACTOR);},getConnectionType:function(){return this.connectionType.combobox("getValue");},setConnectionType:function(value){this.connectionType.combobox("select",value).combobox("validate");},getUsername:function(){return this.username.textbox("getValue");},setUsername:function(value){this.username.textbox("setValue",value);},getPassword:function(){return this.password.passwordbox2("getValue");},setPassword:function(value){this.password.passwordbox2("setValue",value);},getAuthenticationType:function(){return this.authType.combobox("getValue")||null;},setAuthenticationType:function(value){this.authType.combobox("select",value).combobox("validate");},getTokenEndPointUrl:function(){return this.tokenEndPointUrl.textbox("getValue");},setTokenEndPointUrl:function(value){this.tokenEndPointUrl.textbox("setValue",value);},getClientId:function(){return this.clientId.textbox("getValue");},setClientId:function(value){this.clientId.textbox("setValue",value);},getClientSecret:function(){return this.clientSecret.textbox("getValue");},setClientSecret:function(value){this.clientSecret.textbox("setValue",value);},getRedirectUrl:function(){return this.redirectUrl.textbox("getValue");},setRedirectUrl:function(value){this.redirectUrl.textbox("setValue",value);},getHostKey:function(){return this.useHostKey.is(":checked")?this.hostKey.combobox("getValue"):null;},setHostKey:function(value){this.useHostKey.prop("checked",value!=null).change();if(value!=null){this.hostKey.combobox("setValue",value);}},setHostKeys:function(values){this.hostKey.combobox("loadData",values);},show:function(listener){return this._super(listener||jscape.domain.MailAccessTradingPartnerDialog.LISTENER);},_onClick$ClientKeyButton:function(){this.listener.onSelectClientKey().done($.proxy(this._onForm$Change,this));},_onChange$AuthType:function(){var enabled=jscape.EmailAuthenticationType.XOAUTH2==this.getAuthenticationType();this.tokenEndPointUrl.textbox(enabled?"enable":"disable");this.clientId.textbox(enabled?"enable":"disable");this.clientSecret.textbox(enabled?"enable":"disable");this.redirectUrl.textbox(enabled?"enable":"disable");}});jscape.domain.MailAccessTradingPartnerDialog.LISTENER=$.extend({onSelectClientKey:$.noop},jscape.domain.TradingPartnerDialog.LISTENER);jscape.domain.AddImapTradingPartnerDialog=jscape.domain.MailAccessTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-add-imap"));this.name=$("input[name=name]",this.fieldset).textbox({required:true,validType:["partner_name_nonempty","partner_unique"],missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_NAME,width:"60%"});},getName:function(){return this.name.textbox("getValue");}});jscape.domain.EditImapTradingPartnerDialog=jscape.domain.MailAccessTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-edit-imap"));this.title=this.dialog.dialog("header").text()||"";},setName:function(value){this.dialog.dialog("setTitle",this.title.supplant({0:value}));}});jscape.domain.AddPop3TradingPartnerDialog=jscape.domain.MailAccessTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-add-pop3"));this.name=$("input[name=name]",this.fieldset).textbox({required:true,validType:["partner_name_nonempty","partner_unique"],missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_NAME,width:"60%"});},getName:function(){return this.name.textbox("getValue");}});jscape.domain.EditPop3TradingPartnerDialog=jscape.domain.MailAccessTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-edit-pop3"));this.title=this.dialog.dialog("header").text()||"";},setName:function(value){this.dialog.dialog("setTitle",this.title.supplant({0:value}));}});jscape.domain.AddSmtpTradingPartnerDialog=jscape.domain.MailAccessTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-add-smtp"));this.name=$("input[name=name]",this.fieldset).textbox({required:true,validType:["partner_name_nonempty","partner_unique"],missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_NAME,width:"60%"});},getName:function(){return this.name.textbox("getValue");}});jscape.domain.EditSmtpTradingPartnerDialog=jscape.domain.MailAccessTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-edit-smtp"));this.title=this.dialog.dialog("header").text()||"";},setName:function(value){this.dialog.dialog("setTitle",this.title.supplant({0:value}));}});jscape.domain.AddSplunkHttpTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({DEFAULTS:{port:8088,timeout:30*1000,sslRequired:true},onSubmit:function(dialog){return this.listener.onAddTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var d=new jscape.domain.AddSplunkHttpTradingPartnerDialog();d.setPort(this.DEFAULTS.port);d.setTimeout(this.DEFAULTS.timeout);d.setSslRequired(this.DEFAULTS.sslRequired);return d;},_createPartner:function(dialog){return jscape.TradingPartner.splunkHttp(dialog.getName(),dialog.getCompany(),dialog.getEmail(),dialog.getHost(),dialog.getPort(),dialog.getTimeout(),dialog.getToken(),dialog.isSslRequired(),dialog.getTags());}});jscape.domain.EditSplunkHttpTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({start:function(listener,domainName,partner){this.partner=partner;return this._super.apply(this,arguments);},onSubmit:function(dialog){return this.listener.onEditTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.EditSplunkHttpTradingPartnerDialog();var partner=this.partner;if(partner){dialog.setName(partner.name);dialog.setCompany(partner.company);dialog.setEmail(partner.email);dialog.setHost(partner.host);dialog.setPort(partner.port);dialog.setTimeout(partner.timeout);var data=partner.splunkHttpData;if(data){dialog.setToken(data.accessToken);dialog.setSslRequired(data.sslRequired);}
dialog.setTags(partner.tags);}
return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.splunkHttp(this.partner.name,dialog.getCompany(),dialog.getEmail(),dialog.getHost(),dialog.getPort(),dialog.getTimeout(),dialog.getToken(),dialog.isSslRequired(),dialog.getTags());}});jscape.domain.SplunkHttpTradingPartnerDialog=jscape.domain.TradingPartnerDialog.extend({TIMEOUT_FACTOR:1000,initialize:function(dialog){this._super(dialog);this.host=$("input[name=host]",this.fieldset).textbox({required:true,validType:"non_empty",width:"60%"});this.port=$("input[name=port]",this.fieldset).numberspinner({required:true,min:1,max:65535,width:100});this.timeout=$("input[name=timeout]",this.fieldset).numberspinner({required:true,min:1,max:60,width:100});this.sslRequired=$("input[name=ssl]:checkbox",this.fieldset);this.token=$("input[name=token]",this.fieldset).passwordbox2({required:true,validType:"length[1,1024]",width:"40%"});},getHost:function(){return this.host.textbox("getValue");},setHost:function(value){this.host.textbox("setValue",value||"");},getPort:function(){return parseInt(this.port.numberspinner("getValue"));},setPort:function(value){this.port.numberspinner("setValue",value).numberspinner("validate");},getTimeout:function(){return parseInt(this.timeout.numberspinner("getValue"))*this.TIMEOUT_FACTOR;},setTimeout:function(value){this.timeout.numberspinner("setValue",value/this.TIMEOUT_FACTOR).numberspinner("validate");},isSslRequired:function(){return this.sslRequired.is(":checked");},setSslRequired:function(value){this.sslRequired.prop("checked",!!value).change();},getToken:function(){return this.token.passwordbox2("getValue");},setToken:function(value){this.token.passwordbox2("setValue",value);}});jscape.domain.AddSplunkHttpTradingPartnerDialog=jscape.domain.SplunkHttpTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-add-splunkhttp"));this.name=$("input[name=name]",this.fieldset).textbox({required:true,validType:["partner_name_nonempty","partner_unique"],missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_NAME,width:"60%"});},getName:function(){return this.name.textbox("getValue");}});jscape.domain.EditSplunkHttpTradingPartnerDialog=jscape.domain.SplunkHttpTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-edit-splunkhttp"));this.title=this.dialog.dialog("header").text()||"";this.token.passwordbox2({required:false});},setName:function(value){this.dialog.dialog("setTitle",this.title.supplant({0:value}));}});jscape.domain.AddSmbTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({onSubmit:function(dialog){return this.listener.onAddTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.AddSmbTradingPartnerDialog();dialog.setPort(445);dialog.setTimeout(30*1000);return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.smb(dialog.getName(),dialog.getCompany(),dialog.getEmail(),dialog.getHost(),dialog.getPort(),dialog.getTimeout(),dialog.getUsername(),dialog.getPassword(),dialog.getDomain(),dialog.getTags());}});jscape.domain.EditSmbTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({start:function(listener,domainName,partner){this.partner=partner;return this._super(listener,domainName,partner.keyProvider);},onSubmit:function(dialog){return this.listener.onEditTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.EditSmbTradingPartnerDialog();var partner=this.partner;if(partner){dialog.setName(partner.name);dialog.setCompany(partner.company);dialog.setEmail(partner.email);dialog.setHost(partner.host);dialog.setPort(partner.port);dialog.setTimeout(partner.timeout);dialog.setUsername(partner.username);dialog.setPassword(partner.password);dialog.setDomain(partner.domain);dialog.setTags(partner.tags);}
return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.smb(this.partner.name,dialog.getCompany(),dialog.getEmail(),dialog.getHost(),dialog.getPort(),dialog.getTimeout(),dialog.getUsername(),dialog.getPassword(),dialog.getDomain(),dialog.getTags());}});jscape.domain.SmbTradingPartnerDialog=jscape.domain.TradingPartnerDialog.extend({TIMEOUT_FACTOR:1000,initialize:function(dialog){this._super(dialog);this.host=$("input[name=host]",this.fieldset).textbox({required:true,validType:"partner_host_nonempty",missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_HOST,width:"60%"});this.port=$("input[name=port]",this.fieldset).numberspinner({required:true,min:1,max:65535,width:100});this.timeout=$("input[name=timeout]",this.fieldset).numberspinner({required:true,min:1,max:60,width:60});this.username=$("input[name=username]",this.fieldset).textbox({required:true,width:"50%"});this.password=$("input[name=password]",this.fieldset).passwordbox2({width:"50%"});this.domain=$("input[name=domain]",this.fieldset).textbox({width:"50%"});},getHost:function(){return this.host.textbox("getValue");},setHost:function(value){this.host.textbox("setValue",value);},getPort:function(){return this.port.numberspinner("getValue");},setPort:function(value){this.port.numberspinner("setValue",value);},getTimeout:function(){return this.timeout.numberspinner("getValue")*this.TIMEOUT_FACTOR;},setTimeout:function(value){this.timeout.numberspinner("setValue",parseInt(value)/this.TIMEOUT_FACTOR).numberspinner("validate");},getUsername:function(){return this.username.textbox("getValue");},setUsername:function(value){this.username.textbox("setValue",value);},getPassword:function(){return this.password.passwordbox2("getValue");},setPassword:function(value){this.password.passwordbox2("setValue",value);},getDomain:function(){return this.domain.textbox("getValue");},setDomain:function(value){this.domain.textbox("setValue",value);}});jscape.domain.AddSmbTradingPartnerDialog=jscape.domain.SmbTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-add-smb"));this.name=$("input[name=name]",this.fieldset).textbox({required:true,validType:["partner_name_nonempty","partner_unique"],missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_NAME,width:"60%"});},getName:function(){return this.name.textbox("getValue");}});jscape.domain.EditSmbTradingPartnerDialog=jscape.domain.SmbTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-edit-smb"));this.title=this.dialog.dialog("header").text()||"";},setName:function(value){this.dialog.dialog("setTitle",this.title.supplant({0:value}));}});jscape.domain.AddGoogleCloudTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({onSubmit:function(dialog){return this.listener.onAddTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.AddGoogleCloudTradingPartnerDialog();dialog.setTimeout(30*1000);return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.googleCloud(dialog.getName(),dialog.getCompany(),dialog.getEmail(),dialog.getTimeout(),dialog.getAuthenticationType(),dialog.getCredentialsFile(),dialog.getCredentialsData(),dialog.getTags());},onSelectKeyFile:function(){return new SelectPathController($.proxy(jscape.API.listPartnerPath,jscape.API),$.proxy(jscape.API.createPartnerPath,jscape.API)).selectFile().then(function(entry){return entry.path;});}});jscape.domain.EditGoogleCloudTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({start:function(listener,domainName,partner){this.partner=partner;return this._super.apply(this,arguments);},onSubmit:function(dialog){return this.listener.onEditTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.EditGoogleCloudTradingPartnerDialog();var partner=this.partner;if(partner){dialog.setName(partner.name);dialog.setCompany(partner.company);dialog.setEmail(partner.email);dialog.setTimeout(partner.timeout);if(partner.googleCloudData){var data=partner.googleCloudData;dialog.setAuthenticationType(data.authenticationType);if(!!data.credentialsFile){dialog.setCredentialsFile(data.credentialsFile);}else{dialog.setCredentialsData("");}}
dialog.setTags(partner.tags);}
return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.googleCloud(this.partner.name,dialog.getCompany(),dialog.getEmail(),dialog.getTimeout(),dialog.getAuthenticationType(),dialog.getCredentialsFile(),dialog.getCredentialsData(),dialog.getTags());},onSelectKeyFile:function(){return new SelectPathController($.proxy(jscape.API.listPartnerPath,jscape.API),$.proxy(jscape.API.createPartnerPath,jscape.API)).selectFile().then(function(entry){return entry.path;});}});jscape.domain.GoogleCloudTradingPartnerDialog=jscape.domain.TradingPartnerDialog.extend({TIMEOUT_FACTOR:1000,initialize:function(dialog){this._super(dialog);this.timeout=$("input[name=timeout]",this.fieldset).numberspinner({required:true,min:1,max:60,width:60});this.authentication=$("input[name=authentication]:radio",this.fieldset);this.keyType=$("input[name=useprivatekey]:radio",this.fieldset).change($.proxy(this._onChange$KeyType,this));this.keyFile=$("input[name=privatekeyfile]",this.fieldset).textbox({required:true,validType:"non_empty",buttonText:"...",buttonAlign:"right",buttonIcon:null,onClickButton:$.proxy(this._onClick$BrowseKeyFileButton,this),width:"45%"});this.keyData=$("textarea[name=privatekeydata]",this.fieldset).filebox({required:true,readonly:false,multiline:true,validType:["non_empty","json"],buttonText:"...",buttonAlign:"right",accept:"text/plain, application/json",multiple:false,onChange:$.proxy(this._onChange$KeyData,this),width:"45%",height:80});this.keyData.filebox("textbox").prop("readonly",false);var btn=this.keyData.filebox("button");btn.find(".filebox-label").css("height",btn.height());this.keyType.filter("[value=file]").prop("checked",true).change();this.authentication.change($.proxy(this._onChange$AuthType,this)).first().prop("checked",true).end().change();},getTimeout:function(){return this.timeout.numberspinner("getValue")*this.TIMEOUT_FACTOR;},setTimeout:function(value){this.timeout.numberspinner("setValue",parseInt(value)/this.TIMEOUT_FACTOR).numberspinner("validate");},getAuthenticationType:function(){return this.authentication.filter(":checked").val();},setAuthenticationType:function(value){this.authentication.filter("[value="+value+"]").prop("checked",true).change();},getCredentialsData:function(){return!this.keyData.textbox("options").disabled?this.keyData.filebox("getText"):null;},setCredentialsData:function(value){this.keyData.textbox("setText",value);this.keyType.filter("[value=data]").prop("checked",true).change();},getCredentialsFile:function(){return!this.keyFile.textbox("options").disabled?this.keyFile.textbox("getValue"):null;},setCredentialsFile:function(value){this.keyFile.textbox("setValue",value);this.keyType.filter("[value=file]").prop("checked",true).change();},_onClick$BrowseKeyFileButton:function(){this.keyFile.textbox("button").linkbutton("disable");this.listener.onSelectKeyFile().done($.proxy(function(value){this.keyFile.textbox("setValue",value).textbox("textbox").focus();},this)).always($.proxy(function(){this.keyFile.textbox("button").linkbutton("enable");},this));},_onChange$KeyData:function(){this.keyData.filebox("button").linkbutton("disable");this.listener.onLoadFileContent(this.keyData.filebox("files")).done($.proxy(function(data){this.keyData.filebox("clear").filebox("setText",data);},this)).fail($.proxy(function(){this.keyData.filebox("clear").filebox("setText","");},this)).always($.proxy(function(){this.keyData.filebox("button").linkbutton("enable");},this));},_onChange$KeyType:function(){var type=this.keyType.filter(":checked").val();this.keyFile.textbox(type=="file"?"enable":"disable");this.keyData.textbox(type=="data"?"enable":"disable");},_onChange$AuthType:function(){if("CREDENTIALS_FILE"!=this.authentication.filter(":checked").val()){this.keyType.prop("disabled",true);this.keyFile.textbox("disable");this.keyData.textbox("disable");}else{this.keyType.prop("disabled",false).change();}}});jscape.domain.AddGoogleCloudTradingPartnerDialog=jscape.domain.GoogleCloudTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-add-googlecloud"));this.name=$("input[name=name]",this.fieldset).textbox({required:true,validType:["partner_name_nonempty","partner_unique"],missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_NAME,width:"60%"});},getName:function(){return this.name.textbox("getValue");}});jscape.domain.EditGoogleCloudTradingPartnerDialog=jscape.domain.GoogleCloudTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-edit-googlecloud"));this.keyData.filebox("textbox").validatebox("options").required=false;this.title=this.dialog.dialog("header").text()||"";},setName:function(value){this.dialog.dialog("setTitle",this.title.supplant({0:value}));}});jscape.domain.AddGoogleStorageTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({onSubmit:function(dialog){return this.listener.onAddTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.AddGoogleStorageTradingPartnerDialog();dialog.setTimeout(30*1000);return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.googleStorage(dialog.getName(),dialog.getCompany(),dialog.getEmail(),dialog.getTimeout(),dialog.getAuthenticationType(),dialog.getCredentialsFile(),dialog.getCredentialsData(),dialog.getTags());},onSelectKeyFile:function(){return new SelectPathController($.proxy(jscape.API.listPartnerPath,jscape.API),$.proxy(jscape.API.createPartnerPath,jscape.API)).selectFile().then(function(entry){return entry.path;});}});jscape.domain.EditGoogleStorageTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({start:function(listener,domainName,partner){this.partner=partner;return this._super.apply(this,arguments);},onSubmit:function(dialog){return this.listener.onEditTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.EditGoogleStorageTradingPartnerDialog();var partner=this.partner;if(partner){dialog.setName(partner.name);dialog.setCompany(partner.company);dialog.setEmail(partner.email);dialog.setTimeout(partner.timeout);if(partner.googleStorageData){var data=partner.googleStorageData;dialog.setAuthenticationType(data.authenticationType);if(!!data.credentialsFile){dialog.setCredentialsFile(data.credentialsFile);}else{dialog.setCredentialsData("");}}
dialog.setTags(partner.tags);}
return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.googleStorage(this.partner.name,dialog.getCompany(),dialog.getEmail(),dialog.getTimeout(),dialog.getAuthenticationType(),dialog.getCredentialsFile(),dialog.getCredentialsData(),dialog.getTags());},onSelectKeyFile:function(){return new SelectPathController($.proxy(jscape.API.listPartnerPath,jscape.API),$.proxy(jscape.API.createPartnerPath,jscape.API)).selectFile().then(function(entry){return entry.path;});}});jscape.domain.AddGoogleStorageTradingPartnerDialog=jscape.domain.GoogleCloudTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-add-googlestorage"));this.name=$("input[name=name]",this.fieldset).textbox({required:true,validType:["partner_name_nonempty","partner_unique"],missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_NAME,width:"60%"});},getName:function(){return this.name.textbox("getValue");}});jscape.domain.EditGoogleStorageTradingPartnerDialog=jscape.domain.GoogleCloudTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-edit-googlestorage"));this.keyData.filebox("textbox").validatebox("options").required=false;this.title=this.dialog.dialog("header").text()||"";},setName:function(value){this.dialog.dialog("setTitle",this.title.supplant({0:value}));}});jscape.domain.AddGoogleDriveTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({onSubmit:function(dialog){return this.listener.onAddTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.AddGoogleDriveTradingPartnerDialog();dialog.setTimeout(30*1000);return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.googleDrive(dialog.getName(),dialog.getCompany(),dialog.getEmail(),dialog.getTimeout(),dialog.getProxyType()!=null?new jscape.ProxyData(dialog.getProxyType(),dialog.getProxyHost(),dialog.getProxyPort()):null,dialog.getCredentialsFile(),dialog.getCredentialsData(),dialog.getTags());},onSelectKeyFile:function(){return new SelectPathController($.proxy(jscape.API.listPartnerPath,jscape.API),$.proxy(jscape.API.createPartnerPath,jscape.API)).selectFile().then(function(entry){return entry.path;});}});jscape.domain.EditGoogleDriveTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({start:function(listener,domainName,partner){this.partner=partner;return this._super.apply(this,arguments);},onSubmit:function(dialog){return this.listener.onEditTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.EditGoogleDriveTradingPartnerDialog();var partner=this.partner;if(partner){dialog.setName(partner.name);dialog.setCompany(partner.company);dialog.setEmail(partner.email);dialog.setTimeout(partner.timeout);var proxy=partner.proxyData;if(proxy){dialog.setProxyType(proxy.type);dialog.setProxyHost(proxy.host);dialog.setProxyPort(proxy.port);}
var data=partner.googleDriveData;if(data){if(!!data.credentialsFile){dialog.setCredentialsFile(data.credentialsFile);}else{dialog.setCredentialsData("");}}
dialog.setTags(partner.tags);}
return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.googleDrive(this.partner.name,dialog.getCompany(),dialog.getEmail(),dialog.getTimeout(),dialog.getProxyType()!=null?new jscape.ProxyData(dialog.getProxyType(),dialog.getProxyHost(),dialog.getProxyPort()):null,dialog.getCredentialsFile(),dialog.getCredentialsData(),dialog.getTags());},onSelectKeyFile:function(){return new SelectPathController($.proxy(jscape.API.listPartnerPath,jscape.API),$.proxy(jscape.API.createPartnerPath,jscape.API)).selectFile().then(function(entry){return entry.path;});}});jscape.domain.GoogleDriveTradingPartnerDialog=jscape.domain.TradingPartnerDialog.extend({TIMEOUT_FACTOR:1000,initialize:function(dialog){this._super(dialog);this.timeout=$("input[name=timeout]",this.fieldset).numberspinner({required:true,min:1,max:60,width:60});this.keyType=$("input[name=useprivatekey]:radio",this.fieldset).change($.proxy(this._onChange$KeyType,this));this.keyFile=$("input[name=privatekeyfile]",this.fieldset).textbox({required:true,validType:"non_empty",buttonText:"...",buttonAlign:"right",buttonIcon:null,onClickButton:$.proxy(this._onClick$BrowseKeyFileButton,this),width:"45%"});this.keyData=$("textarea[name=privatekeydata]",this.fieldset).filebox({required:true,readonly:false,multiline:true,validType:["non_empty","json"],buttonText:"...",buttonAlign:"right",accept:"text/plain, application/json",multiple:false,onChange:$.proxy(this._onChange$KeyData,this),width:"45%",height:80});this.keyData.filebox("textbox").prop("readonly",false);var btn=this.keyData.filebox("button");btn.find(".filebox-label").css("height",btn.height());this.keyType.filter("[value=file]").prop("checked",true).change();},getTimeout:function(){return this.timeout.numberspinner("getValue")*this.TIMEOUT_FACTOR;},setTimeout:function(value){this.timeout.numberspinner("setValue",parseInt(value)/this.TIMEOUT_FACTOR).numberspinner("validate");},getCredentialsData:function(){return!this.keyData.textbox("options").disabled?this.keyData.filebox("getText"):null;},setCredentialsData:function(value){this.keyData.textbox("setText",value);this.keyType.filter("[value=data]").prop("checked",true).change();},getCredentialsFile:function(){return!this.keyFile.textbox("options").disabled?this.keyFile.textbox("getValue"):null;},setCredentialsFile:function(value){this.keyFile.textbox("setValue",value);this.keyType.filter("[value=file]").prop("checked",true).change();},_onClick$BrowseKeyFileButton:function(){this.keyFile.textbox("button").linkbutton("disable");this.listener.onSelectKeyFile().done($.proxy(function(value){this.keyFile.textbox("setValue",value).textbox("textbox").focus();},this)).always($.proxy(function(){this.keyFile.textbox("button").linkbutton("enable");},this));},_onChange$KeyData:function(){this.keyData.filebox("button").linkbutton("disable");this.listener.onLoadFileContent(this.keyData.filebox("files")).done($.proxy(function(data){this.keyData.filebox("clear").filebox("setText",data);},this)).fail($.proxy(function(){this.keyData.filebox("clear").filebox("setText","");},this)).always($.proxy(function(){this.keyData.filebox("button").linkbutton("enable");},this));},_onChange$KeyType:function(){var type=this.keyType.filter(":checked").val();this.keyFile.textbox(type=="file"?"enable":"disable");this.keyData.textbox(type=="data"?"enable":"disable");}});jscape.domain.AddGoogleDriveTradingPartnerDialog=jscape.domain.GoogleDriveTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-add-googledrive"));this.name=$("input[name=name]",this.fieldset).textbox({required:true,validType:["partner_name_nonempty","partner_unique"],missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_NAME,width:"60%"});},getName:function(){return this.name.textbox("getValue");}});jscape.domain.EditGoogleDriveTradingPartnerDialog=jscape.domain.GoogleDriveTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-edit-googledrive"));this.keyData.filebox("textbox").validatebox("options").required=false;this.title=this.dialog.dialog("header").text()||"";},setName:function(value){this.dialog.dialog("setTitle",this.title.supplant({0:value}));}});jscape.domain.AddMicrosoftAzureFileStorageTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({onSubmit:function(dialog){return this.listener.onAddTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.AddMicrosoftAzureFileStorageTradingPartnerDialog();dialog.setEndPointSuffix("core.windows.net");dialog.setTimeout(30*1000);dialog.setUsername("");return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.microsoftAzureFileStorage(dialog.getName(),dialog.getCompany(),dialog.getEmail(),dialog.getTimeout(),dialog.getUsername(),dialog.getPassword(),dialog.getAuthenticationType(),dialog.getEndPointSuffix(),dialog.isSslRequired(),dialog.getTags());}});jscape.domain.EditMicrosoftAzureFileStorageTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({start:function(listener,domainName,partner){this.partner=partner;return this._super.apply(this,arguments);},onSubmit:function(dialog){return this.listener.onEditTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.EditMicrosoftAzureFileStorageTradingPartnerDialog();var partner=this.partner;if(partner){dialog.setName(partner.name);dialog.setCompany(partner.company);dialog.setEmail(partner.email);dialog.setTimeout(partner.timeout);dialog.setUsername(partner.username);dialog.setPassword(partner.password);var data=partner.microsoftAzureFileStorageData;if(data){dialog.setAuthenticationType(data.authenticationType);dialog.setEndPointSuffix(data.endPointSuffix);dialog.setSslRequired(data.sslRequired);}
dialog.setTags(partner.tags);}
return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.microsoftAzureFileStorage(this.partner.name,dialog.getCompany(),dialog.getEmail(),dialog.getTimeout(),dialog.getUsername(),dialog.getPassword(),dialog.getAuthenticationType(),dialog.getEndPointSuffix(),dialog.isSslRequired(),dialog.getTags());}});jscape.domain.AddMicrosoftAzureBlobStorageTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({onSubmit:function(dialog){return this.listener.onAddTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.AddMicrosoftAzureBlobStorageTradingPartnerDialog();dialog.setEndPointSuffix("core.windows.net");dialog.setTimeout(30*1000);return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.microsoftAzureBlobStorage(dialog.getName(),dialog.getCompany(),dialog.getEmail(),dialog.getTimeout(),dialog.getUsername(),dialog.getPassword(),dialog.getAuthenticationType(),dialog.getEndPointSuffix(),dialog.isSslRequired(),dialog.getTags());}});jscape.domain.EditMicrosoftAzureBlobStorageTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({start:function(listener,domainName,partner){this.partner=partner;return this._super.apply(this,arguments);},onSubmit:function(dialog){return this.listener.onEditTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.EditMicrosoftAzureBlobStorageTradingPartnerDialog();var partner=this.partner;if(partner){dialog.setName(partner.name);dialog.setCompany(partner.company);dialog.setEmail(partner.email);dialog.setTimeout(partner.timeout);dialog.setUsername(partner.username);dialog.setPassword(partner.password);var data=partner.microsoftAzureBlobStorageData;if(data){dialog.setAuthenticationType(data.authenticationType);dialog.setEndPointSuffix(data.endPointSuffix);dialog.setSslRequired(data.sslRequired);}
dialog.setTags(partner.tags);}
return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.microsoftAzureBlobStorage(this.partner.name,dialog.getCompany(),dialog.getEmail(),dialog.getTimeout(),dialog.getUsername(),dialog.getPassword(),dialog.getAuthenticationType(),dialog.getEndPointSuffix(),dialog.isSslRequired(),dialog.getTags());}});jscape.domain.AddMicrosoftAzureDataLakeTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({onSubmit:function(dialog){return this.listener.onAddTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.AddMicrosoftAzureDataLakeTradingPartnerDialog();dialog.setTimeout(30*1000);dialog.setUsername("");return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.microsoftAzureDataLake(dialog.getName(),dialog.getCompany(),dialog.getEmail(),dialog.getTimeout(),dialog.getUsername(),dialog.getPassword(),jscape.MicrosoftAzureAuthenticationType.CREDENTIALS,dialog.getTenantId(),dialog.getAzureAccount(),dialog.getTags());}});jscape.domain.EditMicrosoftAzureDataLakeTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({start:function(listener,domainName,partner){this.partner=partner;return this._super.apply(this,arguments);},onSubmit:function(dialog){return this.listener.onEditTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.EditMicrosoftAzureDataLakeTradingPartnerDialog();var partner=this.partner;if(partner){dialog.setName(partner.name);dialog.setCompany(partner.company);dialog.setEmail(partner.email);dialog.setTimeout(partner.timeout);dialog.setUsername(partner.username);dialog.setPassword(partner.password);var data=partner.microsoftAzureDataLakeData;if(data){dialog.setAuthenticationType(data.authenticationType);dialog.setTenantId(data.tenantId);dialog.setAzureAccount(data.accountFqdn);}
dialog.setTags(partner.tags);}
return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.microsoftAzureDataLake(this.partner.name,dialog.getCompany(),dialog.getEmail(),dialog.getTimeout(),dialog.getUsername(),dialog.getPassword(),jscape.MicrosoftAzureAuthenticationType.CREDENTIALS,dialog.getTenantId(),dialog.getAzureAccount(),dialog.getTags());}});jscape.domain.AddMicrosoftAzureDataLake2TradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({onSubmit:function(dialog){return this.listener.onAddTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.AddMicrosoftAzureDataLake2TradingPartnerDialog();dialog.setTimeout(30*1000);dialog.setUsername("");return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.microsoftAzureDataLake2(dialog.getName(),dialog.getCompany(),dialog.getEmail(),dialog.getTimeout(),dialog.getUsername(),dialog.getPassword(),dialog.getAuthenticationType(),dialog.getEndpoint(),dialog.getTags());}});jscape.domain.EditMicrosoftAzureDataLake2TradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({start:function(listener,domainName,partner){this.partner=partner;return this._super.apply(this,arguments);},onSubmit:function(dialog){return this.listener.onEditTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.EditMicrosoftAzureDataLake2TradingPartnerDialog();var partner=this.partner;if(partner){dialog.setName(partner.name);dialog.setCompany(partner.company);dialog.setEmail(partner.email);dialog.setTimeout(partner.timeout);dialog.setUsername(partner.username);dialog.setPassword(partner.password);var data=partner.microsoftAzureDataLake2Data;if(data){dialog.setAuthenticationType(data.authenticationType);dialog.setEndpoint(data.endPointSuffix);}
dialog.setTags(partner.tags);}
return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.microsoftAzureDataLake2(this.partner.name,dialog.getCompany(),dialog.getEmail(),dialog.getTimeout(),dialog.getUsername(),dialog.getPassword(),dialog.getAuthenticationType(),dialog.getEndpoint(),dialog.getTags());}});jscape.domain.MicrosoftAzureTradingPartnerDialog=jscape.domain.TradingPartnerDialog.extend({TIMEOUT_FACTOR:1000,initialize:function(dialog){this._super(dialog);this.endPointSuffix=$("input[name=endpointsuffix]",this.fieldset).textbox({required:false,validType:"non_empty",width:"60%"});this.timeout=$("input[name=timeout]",this.fieldset).numberspinner({required:true,min:1,max:60,width:60});this.username=$("input[name=username]",this.fieldset).textbox({required:true,validType:"non_empty",width:"60%"});this.password=$("input[name=password]",this.fieldset).passwordbox2({required:true,width:"60%"});this.authentication=$("input[name=authtype]:radio",this.fieldset).change($.proxy(this._onChange$AuthType,this));this.useRole=this.authentication.filter("[value=AMI_ROLE]");this.useCredentials=this.authentication.filter("[value=CREDENTIALS]");this.useCredentials.prop("checked",true);},show:function(){this._super.apply(this,arguments);this.useCredentials.change();},getAuthenticationType:function(){return this.authentication.filter(":checked").val();},setAuthenticationType:function(value){this.authentication.filter("[value="+value+"]").prop("checked",true).change();},getEndPointSuffix:function(){return this.endPointSuffix.textbox("getValue");},setEndPointSuffix:function(value){this.endPointSuffix.textbox("setValue",value);},getTimeout:function(){return this.timeout.numberspinner("getValue")*this.TIMEOUT_FACTOR;},setTimeout:function(value){this.timeout.numberspinner("setValue",parseInt(value)/this.TIMEOUT_FACTOR).numberspinner("validate");},isUseCredentials:function(){return this.useCredentials.is(":checked");},isUseRole:function(){return this.useRole.is(":checked");},getUsername:function(){return this.username.textbox("getValue");},setUsername:function(value){this.username.textbox("setValue",value);},getPassword:function(){return this.password.passwordbox2("getValue");},setPassword:function(value){this.password.passwordbox2("setValue",value);},_onChange$AuthType:function(){if(this.isUseCredentials()){this.username.textbox({required:true});this.password.passwordbox2({required:true});}else if(this.isUseRole()){this.username.textbox({required:false});this.password.passwordbox2({required:false});}
this.username.textbox("isValid");this.password.passwordbox2("isValid");}});jscape.domain.AddMicrosoftAzureFileStorageTradingPartnerDialog=jscape.domain.MicrosoftAzureTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-add-microsoftazure-filestorage"));this.name=$("input[name=name]",this.fieldset).textbox({required:true,validType:["partner_name_nonempty","partner_unique"],missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_NAME,width:"60%"});this.ssl=$("input[name=ssl]",this.fieldset);},getName:function(){return this.name.textbox("getValue");},isSslRequired:function(){return this.ssl.is(":checked");}});jscape.domain.EditMicrosoftAzureFileStorageTradingPartnerDialog=jscape.domain.MicrosoftAzureTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-edit-microsoftazure-filestorage"));this.title=this.dialog.dialog("header").text()||"";this.password.passwordbox2({required:false}).passwordbox2("textbox").validatebox("options").required=false;this.ssl=$("input[name=ssl]",this.fieldset);},setName:function(value){this.dialog.dialog("setTitle",this.title.supplant({0:value}));},isSslRequired:function(){return this.ssl.is(":checked");},setSslRequired:function(value){this.ssl.prop("checked",!!value);},_onChange$AuthType:function(){if(this.isUseCredentials()||this.isUseRole()){this.username.textbox({required:false});this.password.passwordbox2({required:false});}
this.username.textbox("isValid");this.password.passwordbox2("isValid");}});jscape.domain.AddMicrosoftAzureBlobStorageTradingPartnerDialog=jscape.domain.MicrosoftAzureTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-add-microsoftazure-blobstorage"));this.name=$("input[name=name]",this.fieldset).textbox({required:true,validType:["partner_name_nonempty","partner_unique"],missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_NAME,width:"60%"});this.ssl=$("input[name=ssl]",this.fieldset);},getName:function(){return this.name.textbox("getValue");},isSslRequired:function(){return this.ssl.is(":checked");}});jscape.domain.EditMicrosoftAzureBlobStorageTradingPartnerDialog=jscape.domain.MicrosoftAzureTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-edit-microsoftazure-blobstorage"));this.title=this.dialog.dialog("header").text()||"";this.password.passwordbox2({required:false}).passwordbox2("textbox").validatebox("options").required=false;this.ssl=$("input[name=ssl]",this.fieldset);},setName:function(value){this.dialog.dialog("setTitle",this.title.supplant({0:value}));},isSslRequired:function(){return this.ssl.is(":checked");},setSslRequired:function(value){this.ssl.prop("checked",!!value);},_onChange$AuthType:function(){if(this.isUseCredentials()||this.isUseRole()){this.username.textbox({required:false});this.password.passwordbox2("enable").passwordbox2({required:false});}
this.username.textbox("isValid");this.password.passwordbox2("isValid");}});jscape.domain.AddMicrosoftAzureDataLakeTradingPartnerDialog=jscape.domain.MicrosoftAzureTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-add-microsoftazure-datalake"));this.name=$("input[name=name]",this.fieldset).textbox({required:true,validType:["partner_name_nonempty","partner_unique"],missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_NAME,width:"60%"});this.tenantId=$("input[name=tenantid]",this.fieldset).textbox({required:true,validType:"non_empty",width:"60%"});this.azureAccount=$("input[name=azureaccount]",this.fieldset).textbox({required:true,validType:"non_empty",width:"60%"});},getName:function(){return this.name.textbox("getValue");},getTenantId:function(){return this.tenantId.textbox("getValue");},getAzureAccount:function(){return this.azureAccount.textbox("getValue");}});jscape.domain.EditMicrosoftAzureDataLakeTradingPartnerDialog=jscape.domain.MicrosoftAzureTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-edit-microsoftazure-datalake"));this.title=this.dialog.dialog("header").text()||"";this.password.passwordbox2({required:false});this.tenantId=$("input[name=tenantid]",this.fieldset).textbox({required:true,validType:"non_empty",width:"60%"});this.azureAccount=$("input[name=azureaccount]",this.fieldset).textbox({required:true,validType:"non_empty",width:"60%"});},setName:function(value){this.dialog.dialog("setTitle",this.title.supplant({0:value}));},getTenantId:function(){return this.tenantId.textbox("getValue");},setTenantId:function(value){value&&this.tenantId.textbox("setValue",value);},getAzureAccount:function(){return this.azureAccount.textbox("getValue");},setAzureAccount:function(value){value&&this.azureAccount.textbox("setValue",value);}});jscape.domain.AddMicrosoftAzureDataLake2TradingPartnerDialog=jscape.domain.MicrosoftAzureTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-add-microsoftazure-datalake-2"));this.name=$("input[name=name]",this.fieldset).textbox({required:true,validType:["partner_name_nonempty","partner_unique"],missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_NAME,width:"60%"});this.endpoint=$("input[name=endpoint]",this.fieldset).textbox({required:false,validType:"non_empty",width:"60%"});},getName:function(){return this.name.textbox("getValue");},getEndpoint:function(){return this.endpoint.textbox("getValue");},setEndpoint:function(value){value&&this.endpoint.textbox("setValue",value);},_onChange$AuthType:function(){this._super();var enabled=this.isUseCredentials()||this.isUseRole();this.endpoint.textbox(enabled?"enable":"disable").textbox("isValid");}});jscape.domain.EditMicrosoftAzureDataLake2TradingPartnerDialog=jscape.domain.MicrosoftAzureTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-edit-microsoftazure-datalake-2"));this.title=this.dialog.dialog("header").text()||"";this.password.passwordbox2({required:false}).passwordbox2("textbox").validatebox("options").required=false;this.endpoint=$("input[name=endpoint]",this.fieldset).textbox({required:false,validType:"non_empty",width:"60%"});},setName:function(value){this.dialog.dialog("setTitle",this.title.supplant({0:value}));},getEndpoint:function(){return this.endpoint.textbox("getValue");},setEndpoint:function(value){value&&this.endpoint.textbox("setValue",value);},_onChange$AuthType:function(){if(this.isUseCredentials()||this.isUseRole()){this.username.textbox({required:false});this.password.passwordbox2({required:false});this.endpoint.textbox("enable").textbox("isValid");}else{this.endpoint.textbox("disable");}
this.username.textbox("isValid");this.password.passwordbox2("isValid");this.endpoint.textbox("isValid");}});jscape.domain.AddMicrosoftOneDriveTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({onSubmit:function(dialog){return this.listener.onAddTradingPartner(this._createPartner(dialog));},_setupDialog:function(){return new jscape.domain.AddMicrosoftOneDriveTradingPartnerDialog();},_createPartner:function(dialog){return jscape.TradingPartner.microsoftOneDrive(dialog.getName(),dialog.getCompany(),dialog.getEmail(),dialog.getDirectoryId(),dialog.getClientId(),dialog.getClientSecret(),dialog.getUsername(),dialog.isUserRootDriveAccessRequired(),dialog.getTags());}});jscape.domain.EditMicrosoftOneDriveTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({start:function(listener,domainName,partner){this.partner=partner;return this._super.apply(this,arguments);},onSubmit:function(dialog){return this.listener.onEditTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.EditMicrosoftOneDriveTradingPartnerDialog();var partner=this.partner;if(partner){dialog.setName(partner.name);dialog.setCompany(partner.company);dialog.setEmail(partner.email);var data=partner.microsoftOneDriveData;if(data){dialog.setDirectoryId(data.directoryId);dialog.setClientId(data.clientId);dialog.setClientSecret(data.clientSecret);dialog.setUsername(data.username);dialog.setUserRootDriveAccessRequired(data.userRootDriveAccessRequired);}
dialog.setTags(partner.tags);}
return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.microsoftOneDrive(this.partner.name,dialog.getCompany(),dialog.getEmail(),dialog.getDirectoryId(),dialog.getClientId(),dialog.getClientSecret(),dialog.getUsername(),dialog.isUserRootDriveAccessRequired(),dialog.getTags());}});jscape.domain.MicrosoftOneDriveTradingPartnerDialog=jscape.domain.TradingPartnerDialog.extend({initialize:function(dialog){this._super(dialog);this.directory=$("input[name=dir]",this.fieldset).textbox({required:true,width:"60%"});this.client=$("input[name=client]",this.fieldset).textbox({required:true,width:"60%"});this.secret=$("input[name=secret]",this.fieldset).passwordbox2({required:true,width:"60%"});this.user=$("input[name=user]",this.fieldset).textbox({validType:"non_empty",width:"60%"});this.rootAccess=$("input[name=rootaccess]:checkbox",this.fieldset);},getDirectoryId:function(){return this.directory.textbox("getValue");},setDirectoryId:function(value){this.directory.textbox("setValue",value);},getClientId:function(){return this.client.textbox("getValue");},setClientId:function(value){this.client.textbox("setValue",value);},getClientSecret:function(){return this.secret.passwordbox2("getValue");},setClientSecret:function(value){this.secret.passwordbox2("setValue",value);},getUsername:function(){return this.user.textbox("getValue");},setUsername:function(value){this.user.textbox("setValue",value);},isUserRootDriveAccessRequired:function(){return this.rootAccess.is(":checked");},setUserRootDriveAccessRequired:function(value){this.rootAccess.prop("checked",value).change();}});jscape.domain.AddMicrosoftOneDriveTradingPartnerDialog=jscape.domain.MicrosoftOneDriveTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-add-microsort-onedrive"));this.name=$("input[name=name]",this.fieldset).textbox({required:true,validType:["partner_name_nonempty","partner_unique"],missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_NAME,width:"40%"});},getName:function(){return this.name.textbox("getValue");}});jscape.domain.EditMicrosoftOneDriveTradingPartnerDialog=jscape.domain.MicrosoftOneDriveTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-edit-microsort-onedrive"));this.title=this.dialog.dialog("header").text()||"";},setName:function(value){this.dialog.dialog("setTitle",this.title.supplant({0:value}));}});jscape.domain.AddBoxTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({onSubmit:function(dialog){return this.listener.onAddTradingPartner(this._createPartner(dialog));},_setupDialog:function(){return new jscape.domain.AddBoxTradingPartnerDialog();},_createPartner:function(dialog){return jscape.TradingPartner.box(dialog.getName(),dialog.getCompany(),dialog.getEmail(),dialog.getCredentialsFile(),dialog.getCredentialsData(),dialog.getTags());},onSelectKeyFile:function(){return new SelectPathController($.proxy(jscape.API.listPartnerPath,jscape.API),$.proxy(jscape.API.createPartnerPath,jscape.API)).selectFile().then(function(entry){return entry.path;});}});jscape.domain.EditBoxTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({start:function(listener,domainName,partner){this.partner=partner;return this._super.apply(this,arguments);},onSubmit:function(dialog){return this.listener.onEditTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.EditBoxTradingPartnerDialog();var partner=this.partner;if(partner){dialog.setName(partner.name);dialog.setCompany(partner.company);dialog.setEmail(partner.email);var data=partner.boxData;if(data){if(!!data.credentialsFile){dialog.setCredentialsFile(data.credentialsFile);}else{dialog.setCredentialsData("");}}
dialog.setTags(partner.tags);}
return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.box(this.partner.name,dialog.getCompany(),dialog.getEmail(),dialog.getCredentialsFile(),this.partner.boxData?this.partner.boxData.credentialsData:null,dialog.getTags());},onSelectKeyFile:function(){return new SelectPathController($.proxy(jscape.API.listPartnerPath,jscape.API),$.proxy(jscape.API.createPartnerPath,jscape.API)).selectFile().then(function(entry){return entry.path;});}});jscape.domain.BoxTradingPartnerDialog=jscape.domain.TradingPartnerDialog.extend({initialize:function(dialog){this._super(dialog);this.keyType=$("input[name=useprivatekey]:radio",this.fieldset).change($.proxy(this._onChange$KeyType,this));this.keyFile=$("input[name=privatekeyfile]",this.fieldset).textbox({required:true,validType:"non_empty",buttonText:"...",buttonAlign:"right",buttonIcon:null,onClickButton:$.proxy(this._onClick$BrowseKeyFileButton,this),width:"45%"});this.keyData=$("textarea[name=privatekeydata]",this.fieldset).filebox({required:true,readonly:false,multiline:true,validType:["non_empty","json"],buttonText:"...",buttonAlign:"right",accept:"text/plain, application/json",multiple:false,onChange:$.proxy(this._onChange$KeyData,this),width:"45%",height:80});this.keyData.filebox("textbox").prop("readonly",false);var btn=this.keyData.filebox("button");btn.find(".filebox-label").css("height",btn.height());this.keyType.filter("[value=file]").prop("checked",true).change();},getCredentialsData:function(){return!this.keyData.textbox("options").disabled?this.keyData.filebox("getText"):null;},setCredentialsData:function(value){this.keyData.textbox("setText",value);this.keyType.filter("[value=data]").prop("checked",true).change();},getCredentialsFile:function(){return!this.keyFile.textbox("options").disabled?this.keyFile.textbox("getValue"):null;},setCredentialsFile:function(value){this.keyFile.textbox("setValue",value);this.keyType.filter("[value=file]").prop("checked",true).change();},_onClick$BrowseKeyFileButton:function(){this.keyFile.textbox("button").linkbutton("disable");this.listener.onSelectKeyFile().done($.proxy(function(value){this.keyFile.textbox("setValue",value).textbox("textbox").focus();},this)).always($.proxy(function(){this.keyFile.textbox("button").linkbutton("enable");},this));},_onChange$KeyData:function(){this.keyData.filebox("button").linkbutton("disable");this.listener.onLoadFileContent(this.keyData.filebox("files")).done($.proxy(function(data){this.keyData.filebox("clear").filebox("setText",data);},this)).fail($.proxy(function(){this.keyData.filebox("clear").filebox("setText","");},this)).always($.proxy(function(){this.keyData.filebox("button").linkbutton("enable");},this));},_onChange$KeyType:function(){var type=this.keyType.filter(":checked").val();this.keyFile.textbox(type=="file"?"enable":"disable");this.keyData.textbox(type=="data"?"enable":"disable");}});jscape.domain.AddBoxTradingPartnerDialog=jscape.domain.BoxTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-add-box"));this.name=$("input[name=name]",this.fieldset).textbox({required:true,validType:["partner_name_nonempty","partner_unique"],missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_NAME,width:"60%"});},getName:function(){return this.name.textbox("getValue");}});jscape.domain.EditBoxTradingPartnerDialog=jscape.domain.BoxTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-edit-box"));this.keyData.filebox("textbox").validatebox("options").required=false;this.title=this.dialog.dialog("header").text()||"";},setName:function(value){this.dialog.dialog("setTitle",this.title.supplant({0:value}));}});jscape.domain.AddDropboxTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({onSubmit:function(dialog){return this.listener.onAddTradingPartner(this._createPartner(dialog));},_setupDialog:function(){return new jscape.domain.AddDropboxTradingPartnerDialog();},_createPartner:function(dialog){return jscape.TradingPartner.dropbox(dialog.getName(),dialog.getCompany(),dialog.getEmail(),dialog.getAccessToken(),dialog.getTags());}});jscape.domain.EditDropboxTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({start:function(listener,domainName,partner){this.partner=partner;return this._super.apply(this,arguments);},onSubmit:function(dialog){return this.listener.onEditTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.EditDropboxTradingPartnerDialog();var partner=this.partner;if(partner){dialog.setName(partner.name);dialog.setCompany(partner.company);dialog.setEmail(partner.email);if(partner.dropboxData){dialog.setAccessToken(partner.dropboxData.accessToken);}
dialog.setTags(partner.tags);}
return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.dropbox(this.partner.name,dialog.getCompany(),dialog.getEmail(),dialog.getAccessToken(),dialog.getTags());}});jscape.domain.DropboxTradingPartnerDialog=jscape.domain.TradingPartnerDialog.extend({initialize:function(dialog){this._super(dialog);this.token=$("input[name=token]",this.fieldset).passwordbox2({required:true,width:"60%"});},getAccessToken:function(){return this.token.passwordbox2("getValue");},setAccessToken:function(value){this.token.passwordbox2("setValue",value);}});jscape.domain.AddDropboxTradingPartnerDialog=jscape.domain.DropboxTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-add-dropbox"));this.name=$("input[name=name]",this.fieldset).textbox({required:true,validType:["partner_name_nonempty","partner_unique"],missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_NAME,width:"60%"});},getName:function(){return this.name.textbox("getValue");}});jscape.domain.EditDropboxTradingPartnerDialog=jscape.domain.DropboxTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-edit-dropbox"));this.title=this.dialog.dialog("header").text()||"";},setName:function(value){this.dialog.dialog("setTitle",this.title.supplant({0:value}));}});jscape.domain.AddIbmCloudTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({onSubmit:function(dialog){return this.listener.onAddTradingPartner(this._createPartner(dialog));},_setupDialog:function(){return new jscape.domain.AddIbmCloudTradingPartnerDialog();},_createPartner:function(dialog){return jscape.TradingPartner.ibmCloud(dialog.getName(),dialog.getCompany(),dialog.getEmail(),dialog.getEndPoint(),dialog.getProxyType()!=null?new jscape.ProxyData(dialog.getProxyType(),dialog.getProxyHost(),dialog.getProxyPort(),dialog.getProxyUsername(),dialog.getProxyPassword()):null,dialog.getUsername(),dialog.getPassword(),dialog.getTags());}});jscape.domain.EditIbmCloudTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({start:function(listener,domainName,partner){this.partner=partner;return this._super.apply(this,arguments);},onSubmit:function(dialog){return this.listener.onEditTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.EditIbmCloudTradingPartnerDialog();var partner=this.partner;if(partner){dialog.setName(partner.name);dialog.setCompany(partner.company);dialog.setEmail(partner.email);var proxy=partner.proxyData;if(proxy){dialog.setProxyType(proxy.type);dialog.setProxyHost(proxy.host);dialog.setProxyPort(proxy.port);dialog.setProxyUsername(proxy.username);dialog.setProxyPassword(proxy.password);}
dialog.setUsername(partner.username);dialog.setPassword(partner.password);if(partner.ibmCloudData){dialog.setEndPoint(partner.ibmCloudData.endPoint);}
dialog.setTags(partner.tags);}
return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.ibmCloud(this.partner.name,dialog.getCompany(),dialog.getEmail(),dialog.getEndPoint(),dialog.getProxyType()!=null?new jscape.ProxyData(dialog.getProxyType(),dialog.getProxyHost(),dialog.getProxyPort(),dialog.getProxyUsername(),dialog.getProxyPassword()):null,dialog.getUsername(),dialog.getPassword(),dialog.getTags());}});jscape.domain.IbmCloudTradingPartnerDialog=jscape.domain.TradingPartnerDialog.extend({initialize:function(dialog){this._super(dialog);this.endPoint=$("input[name=endpoint]",this.fieldset).textbox({required:true,validType:"non_empty",width:"60%"});this.username=$("input[name=username]",this.fieldset).textbox({required:true,validType:"non_empty",width:"50%"});this.password=$("input[name=password]",this.fieldset).passwordbox2({required:true,width:"50%"});},getEndPoint:function(){return this.endPoint.textbox("getValue");},setEndPoint:function(value){this.endPoint.textbox("setValue",value);},getUsername:function(){return this.username.textbox("getValue");},setUsername:function(value){this.username.textbox("setValue",value);},getPassword:function(){return this.password.passwordbox2("getValue");},setPassword:function(value){this.password.passwordbox2("setValue",value);}});jscape.domain.AddIbmCloudTradingPartnerDialog=jscape.domain.IbmCloudTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-add-ibmcloud"));this.name=$("input[name=name]",this.fieldset).textbox({required:true,validType:["partner_name_nonempty","partner_unique"],missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_NAME,width:"60%"});},getName:function(){return this.name.textbox("getValue");}});jscape.domain.EditIbmCloudTradingPartnerDialog=jscape.domain.IbmCloudTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-edit-ibmcloud"));this.title=this.dialog.dialog("header").text()||"";this.password.passwordbox2({required:false});},setName:function(value){this.dialog.dialog("setTitle",this.title.supplant({0:value}));}});jscape.domain.AddLocalDirectoryTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({onSubmit:function(dialog){return this.listener.onAddTradingPartner(this._createPartner(dialog));},_setupDialog:function(){return new jscape.domain.AddLocalDirectoryTradingPartnerDialog();},_createPartner:function(dialog){return jscape.TradingPartner.localDirectory(dialog.getName(),dialog.getCompany(),dialog.getEmail(),dialog.getTags());}});jscape.domain.EditLocalDirectoryTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({start:function(listener,domainName,partner){this.partner=partner;return this._super.apply(this,arguments);},onSubmit:function(dialog){return this.listener.onEditTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.EditLocalDirectoryTradingPartnerDialog();var partner=this.partner;if(partner){dialog.setName(partner.name);dialog.setCompany(partner.company);dialog.setEmail(partner.email);dialog.setTags(partner.tags);}
return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.localDirectory(this.partner.name,dialog.getCompany(),dialog.getEmail(),dialog.getTags());}});jscape.domain.AddLocalDirectoryTradingPartnerDialog=jscape.domain.TradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-add-localdir"));this.name=$("input[name=name]",this.fieldset).textbox({required:true,validType:["partner_name_nonempty","partner_unique"],missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_NAME,width:"60%"});},getName:function(){return this.name.textbox("getValue");}});jscape.domain.EditLocalDirectoryTradingPartnerDialog=jscape.domain.TradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-edit-localdir"));this.title=this.dialog.dialog("header").text()||"";},setName:function(value){this.dialog.dialog("setTitle",this.title.supplant({0:value}));}});jscape.domain.AddRedwoodTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({onSubmit:function(dialog){return this.listener.onAddTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.AddRedwoodTradingPartnerDialog();dialog.setTimeout(30*1000);return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.redwood(dialog.getName(),dialog.getCompany(),dialog.getEmail(),dialog.getUrl(),dialog.getTimeout(),dialog.getUsername(),dialog.getTags());}});jscape.domain.EditRedwoodTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({start:function(listener,domainName,partner){this.partner=partner;return this._super.apply(this,arguments);},onSubmit:function(dialog){return this.listener.onEditTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.EditRedwoodTradingPartnerDialog();var partner=this.partner;if(partner){dialog.setName(partner.name);dialog.setCompany(partner.company);dialog.setEmail(partner.email);dialog.setUrl(partner.url);dialog.setTimeout(partner.timeout);dialog.setUsername(partner.username);dialog.setTags(partner.tags);}
return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.redwood(this.partner.name,dialog.getCompany(),dialog.getEmail(),dialog.getUrl(),dialog.getTimeout(),dialog.getUsername(),dialog.getTags());}});jscape.domain.RedwoodTradingPartnerDialog=jscape.domain.TradingPartnerDialog.extend({TIMEOUT_FACTOR:1000,initialize:function(dialog){this._super(dialog);this.url=$("input[name=url]",this.fieldset).textbox({required:true,validType:"partner_url",missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_URL,width:"60%"});this.timeout=$("input[name=timeout]",this.fieldset).numberspinner({required:true,min:1,max:60,width:60});this.username=$("input[name=username]",this.fieldset).passwordbox2({required:true,validType:"non_empty",width:"70%"});},getUrl:function(){return this.url.textbox("getValue");},setUrl:function(value){this.url.textbox("setValue",value);},getTimeout:function(){return this.timeout.numberspinner("getValue")*this.TIMEOUT_FACTOR;},setTimeout:function(value){this.timeout.numberspinner("setValue",parseInt(value)/this.TIMEOUT_FACTOR);},getUsername:function(){return this.username.passwordbox2("getValue");},setUsername:function(value){this.username.passwordbox2("setValue",value);}});jscape.domain.AddRedwoodTradingPartnerDialog=jscape.domain.RedwoodTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-add-redwood"));this.name=$("input[name=name]",this.fieldset).textbox({required:true,validType:["partner_name_nonempty","partner_unique"],missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_NAME,width:"60%"});},getName:function(){return this.name.textbox("getValue");}});jscape.domain.EditRedwoodTradingPartnerDialog=jscape.domain.RedwoodTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-edit-redwood"));this.title=this.dialog.dialog("header").text()||"";},setName:function(value){this.dialog.dialog("setTitle",this.title.supplant({0:value}));}});jscape.domain.AddActiveBatchTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({onSubmit:function(dialog){return this.listener.onAddTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.AddActiveBatchTradingPartnerDialog();dialog.setPort(20443);dialog.setTimeout(30*1000);return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.activeBatch(dialog.getName(),dialog.getCompany(),dialog.getEmail(),dialog.getHost(),dialog.getPort(),dialog.getTimeout(),dialog.getUsername(),dialog.getPassword(),dialog.getSchedulerHost(),dialog.getTags());}});jscape.domain.EditActiveBatchTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({start:function(listener,domainName,partner){this.partner=partner;return this._super.apply(this,arguments);},onSubmit:function(dialog){return this.listener.onEditTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.EditActiveBatchTradingPartnerDialog();var partner=this.partner;if(partner){dialog.setName(partner.name);dialog.setCompany(partner.company);dialog.setEmail(partner.email);dialog.setHost(partner.host);dialog.setPort(partner.port);dialog.setTimeout(partner.timeout);dialog.setUsername(partner.username);dialog.setPassword(partner.password);if(partner.activeBatchData){dialog.setSchedulerHost(partner.activeBatchData.jobSchedulerHost);}
dialog.setTags(partner.tags);}
return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.activeBatch(this.partner.name,dialog.getCompany(),dialog.getEmail(),dialog.getHost(),dialog.getPort(),dialog.getTimeout(),dialog.getUsername(),dialog.getPassword(),dialog.getSchedulerHost(),dialog.getTags());}});jscape.domain.ActiveBatchTradingPartnerDialog=jscape.domain.TradingPartnerDialog.extend({TIMEOUT_FACTOR:1000,initialize:function(dialog){this._super(dialog);this.host=$("input[name=host]",this.fieldset).textbox({required:true,validType:"partner_host_nonempty",missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_HOST,width:"60%"});this.port=$("input[name=port]",this.fieldset).numberspinner({required:true,min:1,max:65535,width:100});this.timeout=$("input[name=timeout]",this.fieldset).numberspinner({required:true,min:1,max:60,width:60});this.username=$("input[name=username]",this.fieldset).textbox({required:true,validType:"non_empty",width:"60%"});this.password=$("input[name=password]",this.fieldset).passwordbox2({required:false,validType:"non_empty",width:"60%"});this.schedulerHost=$("input[name=schedulerhost]",this.fieldset).textbox({required:true,validType:"non_empty",width:"60%"});},getHost:function(){return this.host.textbox("getValue");},setHost:function(value){this.host.textbox("setValue",value);},getPort:function(){return this.port.numberspinner("getValue");},setPort:function(value){this.port.numberspinner("setValue",value);},getTimeout:function(){return this.timeout.numberspinner("getValue")*this.TIMEOUT_FACTOR;},setTimeout:function(value){this.timeout.numberspinner("setValue",parseInt(value)/this.TIMEOUT_FACTOR);},getUsername:function(){return this.username.textbox("getValue");},setUsername:function(value){this.username.textbox("setValue",value);},getPassword:function(){return this.password.passwordbox2("getValue");},setPassword:function(value){this.password.passwordbox2("setValue",value);},getSchedulerHost:function(){return this.schedulerHost.textbox("getValue");},setSchedulerHost:function(value){this.schedulerHost.textbox("setValue",value);}});jscape.domain.AddActiveBatchTradingPartnerDialog=jscape.domain.ActiveBatchTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-add-activebatch"));this.name=$("input[name=name]",this.fieldset).textbox({required:true,validType:["partner_name_nonempty","partner_unique"],missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_NAME,width:"60%"});},getName:function(){return this.name.textbox("getValue");}});jscape.domain.EditActiveBatchTradingPartnerDialog=jscape.domain.ActiveBatchTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-edit-activebatch"));this.title=this.dialog.dialog("header").text()||"";},setName:function(value){this.dialog.dialog("setTitle",this.title.supplant({0:value}));}});jscape.domain.AddJdbcTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({onSubmit:function(dialog){return this.listener.onAddTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.AddJdbcTradingPartnerDialog();dialog.setUrl("jdbc:driver://host:port/db");return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.jdbc(dialog.getName(),dialog.getCompany(),dialog.getEmail(),dialog.getUrl(),dialog.getUsername(),dialog.getPassword(),dialog.getTags());}});jscape.domain.EditJdbcTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({start:function(listener,domainName,partner){this.partner=partner;return this._super.apply(this,arguments);},onSubmit:function(dialog){return this.listener.onEditTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.EditJdbcTradingPartnerDialog();var partner=this.partner;if(partner){dialog.setName(partner.name);dialog.setCompany(partner.company);dialog.setEmail(partner.email);dialog.setUrl(partner.url);dialog.setUsername(partner.username);dialog.setPassword(partner.password);dialog.setTags(partner.tags);}
return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.jdbc(this.partner.name,dialog.getCompany(),dialog.getEmail(),dialog.getUrl(),dialog.getUsername(),dialog.getPassword(),dialog.getTags());}});jscape.domain.JdbcTradingPartnerDialog=jscape.domain.TradingPartnerDialog.extend({initialize:function(dialog){this._super(dialog);this.url=$("input[name=url]",this.fieldset).textbox({required:true,validType:"jdbc_url",missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_URL,width:"70%"});this.username=$("input[name=username]",this.fieldset).textbox({required:false,validType:"non_empty",width:"60%"});this.password=$("input[name=password]",this.fieldset).passwordbox2({required:false,validType:"non_empty",width:"60%"});},getUrl:function(){return this.url.textbox("getValue");},setUrl:function(value){this.url.textbox("setValue",value);},getUsername:function(){return this.username.textbox("getValue");},setUsername:function(value){this.username.textbox("setValue",value);},getPassword:function(){return this.password.passwordbox2("getValue");},setPassword:function(value){this.password.passwordbox2("setValue",value);}});jscape.domain.AddJdbcTradingPartnerDialog=jscape.domain.JdbcTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-add-jdbc"));this.name=$("input[name=name]",this.fieldset).textbox({required:true,validType:["partner_name_nonempty","partner_unique"],missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_NAME,width:"60%"});},getName:function(){return this.name.textbox("getValue");}});jscape.domain.EditJdbcTradingPartnerDialog=jscape.domain.JdbcTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-edit-jdbc"));this.title=this.dialog.dialog("header").text()||"";},setName:function(value){this.dialog.dialog("setTitle",this.title.supplant({0:value}));}});jscape.domain.AddTidalTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({onSubmit:function(dialog){return this.listener.onAddTradingPartner(this._createPartner(dialog));},_setupDialog:function(){return new jscape.domain.AddTidalTradingPartnerDialog();},_createPartner:function(dialog){return jscape.TradingPartner.tidal(dialog.getName(),dialog.getCompany(),dialog.getEmail(),dialog.getUrl(),dialog.getUsername(),dialog.getPassword(),dialog.getTags());}});jscape.domain.EditTidalTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({start:function(listener,domainName,partner){this.partner=partner;return this._super.apply(this,arguments);},onSubmit:function(dialog){return this.listener.onEditTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.EditTidalTradingPartnerDialog();var partner=this.partner;if(partner){dialog.setName(partner.name);dialog.setCompany(partner.company);dialog.setEmail(partner.email);dialog.setUrl(partner.url);dialog.setUsername(partner.username);dialog.setPassword(partner.password);dialog.setTags(partner.tags);}
return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.tidal(this.partner.name,dialog.getCompany(),dialog.getEmail(),dialog.getUrl(),dialog.getUsername(),dialog.getPassword(),dialog.getTags());}});jscape.domain.TidalTradingPartnerDialog=jscape.domain.TradingPartnerDialog.extend({TIMEOUT_FACTOR:1000,initialize:function(dialog){this._super(dialog);this.url=$("input[name=url]",this.fieldset).textbox({required:true,validType:"partner_url",missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_URL,width:"60%"});this.username=$("input[name=username]",this.fieldset).textbox({required:true,validType:"non_empty",width:"60%"});this.password=$("input[name=password]",this.fieldset).passwordbox2({required:false,validType:"non_empty",width:"60%"});},getUrl:function(){return this.url.textbox("getValue");},setUrl:function(value){this.url.textbox("setValue",value);},getUsername:function(){return this.username.textbox("getValue");},setUsername:function(value){this.username.textbox("setValue",value);},getPassword:function(){return this.password.passwordbox2("getValue");},setPassword:function(value){this.password.passwordbox2("setValue",value);}});jscape.domain.AddTidalTradingPartnerDialog=jscape.domain.TidalTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-add-tidal"));this.name=$("input[name=name]",this.fieldset).textbox({required:true,validType:["partner_name_nonempty","partner_unique"],missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_NAME,width:"60%"});},getName:function(){return this.name.textbox("getValue");}});jscape.domain.EditTidalTradingPartnerDialog=jscape.domain.TidalTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-edit-tidal"));this.title=this.dialog.dialog("header").text()||"";},setName:function(value){this.dialog.dialog("setTitle",this.title.supplant({0:value}));}});jscape.domain.AddCyberArkTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({onSubmit:function(dialog){return this.listener.onAddTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.AddCyberArkTradingPartnerDialog();dialog.setPort(80);dialog.setTimeout(30*1000);return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.cyberArk(dialog.getName(),dialog.getCompany(),dialog.getEmail(),dialog.getHost(),dialog.getPort(),dialog.getTimeout(),dialog.getUsername(),dialog.getPassword(),dialog.getTags());}});jscape.domain.EditCyberArkTradingPartnerController=jscape.domain.BaseTradingPartnerController.extend({start:function(listener,domainName,partner){this.partner=partner;return this._super.apply(this,arguments);},onSubmit:function(dialog){return this.listener.onEditTradingPartner(this._createPartner(dialog));},_setupDialog:function(){var dialog=new jscape.domain.EditCyberArkTradingPartnerDialog();var partner=this.partner;if(partner){dialog.setName(partner.name);dialog.setCompany(partner.company);dialog.setEmail(partner.email);dialog.setHost(partner.host);dialog.setPort(partner.port);dialog.setTimeout(partner.timeout);dialog.setUsername(partner.username);dialog.setPassword(partner.password);if(partner.cyberArkData){}
dialog.setTags(partner.tags);}
return dialog;},_createPartner:function(dialog){return jscape.TradingPartner.cyberArk(this.partner.name,dialog.getCompany(),dialog.getEmail(),dialog.getHost(),dialog.getPort(),dialog.getTimeout(),dialog.getUsername(),dialog.getPassword(),dialog.getTags());}});jscape.domain.CyberArkTradingPartnerDialog=jscape.domain.TradingPartnerDialog.extend({TIMEOUT_FACTOR:1000,initialize:function(dialog){this._super(dialog);this.host=$("input[name=host]",this.fieldset).textbox({required:true,validType:"partner_host_nonempty",missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_HOST,width:"60%"});this.port=$("input[name=port]",this.fieldset).numberspinner({required:true,min:1,max:65535,width:100});this.timeout=$("input[name=timeout]",this.fieldset).numberspinner({required:true,min:1,max:60,width:60});this.username=$("input[name=username]",this.fieldset).textbox({required:true,validType:"non_empty",width:"60%"});this.password=$("input[name=password]",this.fieldset).passwordbox2({required:false,validType:"non_empty",width:"60%"});},getHost:function(){return this.host.textbox("getValue");},setHost:function(value){this.host.textbox("setValue",value);},getPort:function(){return this.port.numberspinner("getValue");},setPort:function(value){this.port.numberspinner("setValue",value);},getTimeout:function(){return this.timeout.numberspinner("getValue")*this.TIMEOUT_FACTOR;},setTimeout:function(value){this.timeout.numberspinner("setValue",parseInt(value)/this.TIMEOUT_FACTOR);},getUsername:function(){return this.username.textbox("getValue");},setUsername:function(value){this.username.textbox("setValue",value);},getPassword:function(){return this.password.passwordbox2("getValue");},setPassword:function(value){this.password.passwordbox2("setValue",value);}});jscape.domain.AddCyberArkTradingPartnerDialog=jscape.domain.CyberArkTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-add-cyberark"));this.name=$("input[name=name]",this.fieldset).textbox({required:true,validType:["partner_name_nonempty","partner_unique"],missingMessage:window.R.string.TRADING_PARTNERS_ERROR_BAD_NAME,width:"60%"});},getName:function(){return this.name.textbox("getValue");}});jscape.domain.EditCyberArkTradingPartnerDialog=jscape.domain.CyberArkTradingPartnerDialog.extend({initialize:function(){this._super($("#d-partner-edit-cyberark"));this.title=this.dialog.dialog("header").text()||"";},setName:function(value){this.dialog.dialog("setTitle",this.title.supplant({0:value}));}});